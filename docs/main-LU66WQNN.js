import{a as P,b as ge,c as jp,d as N,e as zI,f as ul,g as GI,h as WI,i as KI,j as Bp,k as QI,l as Za,m as Up,n as cl,o as YI,p as ZI,q as $p,r as He,s as Ui,t as Hn,u as ll,v as Ja,w as JI,x as XI,y as Wr,z as on}from"./chunk-4ZHOUZTK.js";function e0(n,e){return Object.is(n,e)}var ct=null,dl=!1,hl=1,mr=Symbol("SIGNAL");function De(n){let e=ct;return ct=n,e}function t0(){return ct}var eu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zp(n){if(dl)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.nextProducerIndex++;if(ml(ct),e<ct.producerNode.length&&ct.producerNode[e]!==n&&Xa(ct)){let t=ct.producerNode[e];gl(t,ct.producerIndexOfThis[e])}ct.producerNode[e]!==n&&(ct.producerNode[e]=n,ct.producerIndexOfThis[e]=Xa(ct)?o0(n,ct,e):0),ct.producerLastReadVersion[e]=n.version}function AN(){hl++}function n0(n){if(!(Xa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hl)){if(!n.producerMustRecompute(n)&&!Wp(n)){n.dirty=!1,n.lastCleanEpoch=hl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hl}}function r0(n){if(n.liveConsumerNode===void 0)return;let e=dl;dl=!0;try{for(let t of n.liveConsumerNode)t.dirty||MN(t)}finally{dl=e}}function i0(){return ct?.consumerAllowSignalWrites!==!1}function MN(n){n.dirty=!0,r0(n),n.consumerMarkedDirty?.(n)}function pl(n){return n&&(n.nextProducerIndex=0),De(n)}function Gp(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Xa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wp(n){ml(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(n0(t),r!==t.version))return!0}return!1}function Kp(n){if(ml(n),Xa(n))for(let e=0;e<n.producerNode.length;e++)gl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function o0(n,e,t){if(s0(n),n.liveConsumerNode.length===0&&a0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=o0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gl(n,e){if(s0(n),n.liveConsumerNode.length===1&&a0(n))for(let r=0;r<n.producerNode.length;r++)gl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ml(i),i.producerIndexOfThis[r]=e}}function Xa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ml(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function s0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function a0(n){return n.producerNode!==void 0}function u0(n){let e=Object.create(xN);e.computation=n;let t=()=>{if(n0(e),zp(e),e.value===fl)throw e.error;return e.value};return t[mr]=e,t}var Hp=Symbol("UNSET"),qp=Symbol("COMPUTING"),fl=Symbol("ERRORED"),xN=ge(P({},eu),{value:Hp,dirty:!0,error:null,equal:e0,producerMustRecompute(n){return n.value===Hp||n.value===qp},producerRecomputeValue(n){if(n.value===qp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=qp;let t=pl(n),r;try{r=n.computation()}catch(i){r=fl,n.error=i}finally{Gp(n,t)}if(e!==Hp&&e!==fl&&r!==fl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function RN(){throw new Error}var c0=RN;function l0(){c0()}function d0(n){c0=n}var NN=null;function h0(n){let e=Object.create(p0);e.value=n;let t=()=>(zp(e),e.value);return t[mr]=e,t}function Qp(n,e){i0()||l0(),n.equal(n.value,e)||(n.value=e,PN(n))}function f0(n,e){i0()||l0(),Qp(n,e(n.value))}var p0=ge(P({},eu),{equal:e0,value:void 0});function PN(n){n.version++,AN(),r0(n),NN?.()}function ae(n){return typeof n=="function"}function Wo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yl=Wo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $i(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof yl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{g0(o)}catch(s){e=e??[],s instanceof yl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)g0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$i(t,e)}remove(e){let{_finalizers:t}=this;t&&$i(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var Yp=Ke.EMPTY;function vl(n){return n instanceof Ke||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function g0(n){ae(n)?n():n.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ko={setTimeout(n,e,...t){let{delegate:r}=Ko;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ko;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _l(n){Ko.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(n);else throw n})}function tu(){}var m0=Zp("C",void 0,void 0);function y0(n){return Zp("E",void 0,n)}function v0(n){return Zp("N",n,void 0)}function Zp(n,e,t){return{kind:n,value:e,error:t}}var Hi=null;function Qo(n){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!Hi;if(e&&(Hi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Hi;if(Hi=null,t)throw r}}else n()}function _0(n){Sn.useDeprecatedSynchronousErrorHandling&&Hi&&(Hi.errorThrown=!0,Hi.error=n)}var qi=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vl(e)&&e.add(this)):this.destination=FN}static create(e,t,r){return new yr(e,t,r)}next(e){this.isStopped?Xp(v0(e),this):this._next(e)}error(e){this.isStopped?Xp(y0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xp(m0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kN=Function.prototype.bind;function Jp(n,e){return kN.call(n,e)}var eg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wl(r)}else wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wl(t)}}},yr=class extends qi{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jp(e.next,o),error:e.error&&Jp(e.error,o),complete:e.complete&&Jp(e.complete,o)}):i=e}this.destination=new eg(i)}};function wl(n){Sn.useDeprecatedSynchronousErrorHandling?_0(n):_l(n)}function ON(n){throw n}function Xp(n,e){let{onStoppedNotification:t}=Sn;t&&Ko.setTimeout(()=>t(n,e))}var FN={closed:!0,next:tu,error:ON,complete:tu};var Yo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(n){return n}function tg(...n){return ng(n)}function ng(n){return n.length===0?Vt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=LN(t)?t:new yr(t,r,i);return Qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=w0(r),new r((i,o)=>{let s=new yr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Yo](){return this}pipe(...t){return ng(t)(this)}toPromise(t){return t=w0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function w0(n){var e;return(e=n??Sn.Promise)!==null&&e!==void 0?e:Promise}function VN(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function LN(n){return n&&n instanceof qi||VN(n)&&vl(n)}function rg(n){return ae(n?.lift)}function de(n){return e=>{if(rg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new ig(n,e,t,r,i)}var ig=class extends qi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zo(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jo=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return Zo()(this)}};var E0=Wo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new El(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new E0}next(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yp:(this.currentObservers=null,o.push(t),new Ke(()=>{this.currentObservers=null,$i(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new El(e,t),n})(),El=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Yp}};var _t=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nu={now(){return(nu.delegate||Date).now()},delegate:void 0};var Il=class extends Ue{constructor(e=1/0,t=1/0,r=nu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Dl=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var ru={setInterval(n,e,...t){let{delegate:r}=ru;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ru;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xo=class extends Dl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ru.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ru.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$i(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var es=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};es.now=nu.now;var ts=class extends es{constructor(e,t=es.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var iu=new ts(Xo);var Cl=class extends Xo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var bl=class extends ts{};var og=new bl(Cl);var Lt=new ye(n=>n.complete());function I0(n){return n&&ae(n.schedule)}function sg(n){return n[n.length-1]}function Tl(n){return ae(sg(n))?n.pop():void 0}function qn(n){return I0(sg(n))?n.pop():void 0}function D0(n,e){return typeof sg(n)=="number"?n.pop():e}var Sl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Al(n){return ae(n?.then)}function Ml(n){return ae(n[Yo])}function xl(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function Rl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nl=jN();function Pl(n){return ae(n?.[Nl])}function kl(n){return GI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ul(t.read());if(i)return yield ul(void 0);yield yield ul(r)}}finally{t.releaseLock()}})}function Ol(n){return ae(n?.getReader)}function Le(n){if(n instanceof ye)return n;if(n!=null){if(Ml(n))return BN(n);if(Sl(n))return UN(n);if(Al(n))return $N(n);if(xl(n))return C0(n);if(Pl(n))return HN(n);if(Ol(n))return qN(n)}throw Rl(n)}function BN(n){return new ye(e=>{let t=n[Yo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UN(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $N(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_l)})}function HN(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function C0(n){return new ye(e=>{zN(n,e).catch(t=>e.error(t))})}function qN(n){return C0(kl(n))}function zN(n,e){var t,r,i,o;return zI(this,void 0,void 0,function*(){try{for(t=WI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Wt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function fn(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Wt(r,n,()=>r.next(i),e),()=>Wt(r,n,()=>r.complete(),e),i=>Wt(r,n,()=>r.error(i),e)))})}function An(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function b0(n,e){return Le(n).pipe(An(e),fn(e))}function T0(n,e){return Le(n).pipe(An(e),fn(e))}function S0(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function A0(n,e){return new ye(t=>{let r;return Wt(t,e,()=>{r=n[Nl](),Wt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Fl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Wt(t,e,()=>{let r=n[Symbol.asyncIterator]();Wt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function M0(n,e){return Fl(kl(n),e)}function x0(n,e){if(n!=null){if(Ml(n))return b0(n,e);if(Sl(n))return S0(n,e);if(Al(n))return T0(n,e);if(xl(n))return Fl(n,e);if(Pl(n))return A0(n,e);if(Ol(n))return M0(n,e)}throw Rl(n)}function _e(n,e){return e?x0(n,e):Le(n)}function ne(...n){let e=qn(n);return _e(n,e)}function ns(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function ag(n){return!!n&&(n instanceof ye||ae(n.lift)&&ae(n.subscribe))}var vr=Wo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:GN}=Array;function WN(n,e){return GN(e)?n(...e):n(e)}function Vl(n){return Y(e=>WN(n,e))}var{isArray:KN}=Array,{getPrototypeOf:QN,prototype:YN,keys:ZN}=Object;function Ll(n){if(n.length===1){let e=n[0];if(KN(e))return{args:e,keys:null};if(JN(e)){let t=ZN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function JN(n){return n&&typeof n=="object"&&QN(n)===YN}function jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ou(...n){let e=qn(n),t=Tl(n),{args:r,keys:i}=Ll(n);if(r.length===0)return _e([],e);let o=new ye(XN(r,e,i?s=>jl(i,s):Vt));return t?o.pipe(Vl(t)):o}function XN(n,e,t=Vt){return r=>{R0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)R0(e,()=>{let l=_e(n[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function R0(n,e,t){n?Wt(t,n,e):e()}function N0(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let M=!1;Le(t(A,h++)).subscribe(he(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let B=u.shift();s?Wt(e,s,()=>b(B)):b(B)}g()}catch(B){e.error(B)}}))};return n.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function it(n,e,t=1/0){return ae(e)?it((r,i)=>Y((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>N0(r,i,n,t)))}function zn(n=1/0){return it(Vt,n)}function P0(){return zn(1)}function rs(...n){return P0()(_e(n,qn(n)))}function Bl(n){return new ye(e=>{Le(n()).subscribe(e)})}function ug(...n){let e=Tl(n),{args:t,keys:r}=Ll(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(t[h]).subscribe(he(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?jl(r,a):a),o.complete())}))}});return e?i.pipe(Vl(e)):i}function cg(...n){let e=qn(n),t=D0(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):zn(t)(_e(r,e)):Lt}function wt(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Kr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Le(n(s,Kr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function k0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function zi(n,e){return ae(e)?it(n,e,1):it(n,1)}function Qr(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _r(n){return n<=0?()=>Lt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function lg(n){return Y(()=>n)}function dg(n,e=Vt){return n=n??eP,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function eP(n,e){return n===e}function Ul(n=tP){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tP(){return new vr}function su(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,o)=>n(i,o,r)):Vt,_r(1),t?Qr(e):Ul(()=>new vr))}function is(n){return n<=0?()=>Lt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,o)=>n(i,o,r)):Vt,is(1),t?Qr(e):Ul(()=>new vr))}function au(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Gi(n,e){return de(k0(n,e,arguments.length>=2,!0))}function O0(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return de((A,M)=>{l++,!p&&!h&&g();let B=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=fg(b,i))}),B.subscribe(M),!s&&l>0&&(s=new yr({next:G=>B.next(G),error:G=>{p=!0,g(),a=fg(y,t,G),B.error(G)},complete:()=>{h=!0,g(),a=fg(y,r),B.complete()}}),Le(A).subscribe(s))})(o)}}function fg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new yr({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function $l(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,O0({connector:()=>new Il(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wi(...n){let e=qn(n);return de((t,r)=>{(e?rs(n,t,e):rs(n,t)).subscribe(r)})}function Qe(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Hl(n,e){return ae(e)?Qe(()=>n,e):Qe(()=>n)}function pg(n){return de((e,t)=>{Le(n).subscribe(he(t,()=>t.complete(),tu)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}var ID="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(Im(e,t)),this.code=e}};function Im(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function yu(n){return{toString:n}.toString()}var ql="__parameters__";function nP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function DD(n,e,t){return yu(()=>{let r=nP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ql)?u[ql]:Object.defineProperty(u,ql,{value:[]})[ql];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rn=globalThis;function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function rP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function F0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var iP=Pe({__forward_ref__:Pe});function Is(n){return n.__forward_ref__=Is,n.toString=function(){return Bt(this())},n}function jt(n){return CD(n)?n():n}function CD(n){return typeof n=="function"&&n.hasOwnProperty(iP)&&n.__forward_ref__===Is}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ad(n){return V0(n,TD)||V0(n,SD)}function bD(n){return Ad(n)!==null}function V0(n,e){return n.hasOwnProperty(e)?n[e]:null}function oP(n){let e=n&&(n[TD]||n[SD]);return e||null}function L0(n){return n&&(n.hasOwnProperty(j0)||n.hasOwnProperty(sP))?n[j0]:null}var TD=Pe({\u0275prov:Pe}),j0=Pe({\u0275inj:Pe}),SD=Pe({ngInjectableDef:Pe}),sP=Pe({ngInjectorDef:Pe}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AD(n){return n&&!!n.\u0275providers}var aP=Pe({\u0275cmp:Pe}),uP=Pe({\u0275dir:Pe}),cP=Pe({\u0275pipe:Pe}),lP=Pe({\u0275mod:Pe}),td=Pe({\u0275fac:Pe}),cu=Pe({__NG_ELEMENT_ID__:Pe}),B0=Pe({__NG_ENV_ID__:Pe});function wr(n){return typeof n=="string"?n:n==null?"":String(n)}function dP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wr(n)}function hP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Dm(n,e){throw new X(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),Ag;function MD(){return Ag}function gn(n){let e=Ag;return Ag=n,e}function xD(n,e,t){let r=Ad(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;Dm(n,"Injector")}var fP={},du=fP,Mg="__NG_DI_FLAG__",nd="ngTempTokenPath",pP="ngTokenPath",gP=/\n/gm,mP="\u0275",U0="__source",cs;function yP(){return cs}function Yr(n){let e=cs;return cs=n,e}function vP(n,e=pe.Default){if(cs===void 0)throw new X(-203,!1);return cs===null?xD(n,void 0,e):cs.get(n,e&pe.Optional?null:void 0,e)}function L(n,e=pe.Default){return(MD()||vP)(jt(n),e)}function $(n,e=pe.Default){return L(n,Md(e))}function Md(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xg(n){let e=[];for(let t=0;t<n.length;t++){let r=jt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=_P(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function RD(n,e){return n[Mg]=e,n.prototype[Mg]=e,n}function _P(n){return n[Mg]}function wP(n,e,t,r){let i=n[nd];throw e[U0]&&i.unshift(e[U0]),n.message=EP(`
`+n.message,i,t,r),n[pP]=i,n[nd]=null,n}function EP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==mP?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(gP,`
  `)}`}var Ds=RD(DD("Optional"),8);var Cm=RD(DD("SkipSelf"),4);function ds(n,e){let t=n.hasOwnProperty(td);return t?n[td]:null}function IP(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function DP(n){return n.flat(Number.POSITIVE_INFINITY)}function bm(n,e){n.forEach(t=>Array.isArray(t)?bm(t,e):e(t))}function ND(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function bP(n,e,t){let r=vu(n,e);return r>=0?n[r|1]=t:(r=~r,CP(n,r,e,t)),r}function gg(n,e){let t=vu(n,e);if(t>=0)return n[t|1]}function vu(n,e){return TP(n,e,1)}function TP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var hs={},mn=[],fs=new K(""),PD=new K("",-1),kD=new K(""),id=class{get(e,t=du){if(t===du){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}},OD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(OD||{}),Kn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kn||{}),Xr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xr||{});function SP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Rg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];AP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function FD(n){return n===3||n===4||n===6}function AP(n){return n.charCodeAt(0)===64}function hu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?$0(n,t,i,null,e[++r]):$0(n,t,i,null,null))}}return n}function $0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var VD="ng-template";function MP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Tm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Tm(n){return n.type===4&&n.value!==VD}function xP(n,e,t){let r=n.type===4&&!t?VD:n.value;return e===r}function RP(n,e,t){let r=4,i=n.attrs,o=i!==null?kP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Mn(r)&&!Mn(u))return!1;if(s&&Mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!xP(n,u,t)||u===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!MP(n,i,u,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=NP(u,i,Tm(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function NP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OP(e,n)}function PP(n,e,t=!1){for(let r=0;r<e.length;r++)if(RP(n,e[r],t))return!0;return!1}function kP(n){for(let e=0;e<n.length;e++){let t=n[e];if(FD(t))return e}return n.length}function OP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function H0(n,e){return n?":not("+e.trim()+")":e}function FP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=H0(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=H0(o,i)),e}function VP(n){return n.map(FP).join(",")}function LP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return{attrs:e,classes:t}}function gt(n){return yu(()=>{let e=$D(n),t=ge(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===OD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kn.Emulated,styles:n.styles||mn,_:null,schemas:n.schemas||null,tView:null,id:""});HD(t);let r=n.dependencies;return t.directiveDefs=z0(r,!1),t.pipeDefs=z0(r,!0),t.id=UP(t),t})}function jP(n){return ei(n)||LD(n)}function BP(n){return n!==null}function mt(n){return yu(()=>({type:n.type,bootstrap:n.bootstrap||mn,declarations:n.declarations||mn,imports:n.imports||mn,exports:n.exports||mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function q0(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Xr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Xr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Mt(n){return yu(()=>{let e=$D(n);return HD(e),e})}function ei(n){return n[aP]||null}function LD(n){return n[uP]||null}function jD(n){return n[cP]||null}function BD(n){let e=ei(n)||LD(n)||jD(n);return e!==null?e.standalone:!1}function UD(n,e){let t=n[lP]||null;if(!t&&e===!0)throw new Error(`Type ${Bt(n)} does not have '\u0275mod' property.`);return t}function $D(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:q0(n.inputs,e),outputs:q0(n.outputs),debugInfo:null}}function HD(n){n.features?.forEach(e=>e(n))}function z0(n,e){if(!n)return null;let t=e?jD:jP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(BP)}function UP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $P(...n){return{\u0275providers:qD(!0,n),\u0275fromNgModule:!0}}function qD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return bm(e,s=>{let a=s;Ng(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zD(i,o),t}function zD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Sm(i,o=>{e(o,r)})}}function Ng(n,e,t,r){if(n=jt(n),!n)return!1;let i=null,o=L0(n),s=!o&&ei(n);if(!o&&!s){let u=n.ngModule;if(o=L0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ng(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{bm(o.imports,h=>{Ng(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&zD(l,e)}if(!a){let l=ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:mn},i),e({provide:kD,useValue:i,multi:!0},i),e({provide:fs,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Sm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Sm(n,e){for(let t of n)AD(t)&&(t=t.\u0275providers),Array.isArray(t)?Sm(t,e):e(t)}var HP=Pe({provide:String,useValue:Pe});function GD(n){return n!==null&&typeof n=="object"&&HP in n}function qP(n){return!!(n&&n.useExisting)}function zP(n){return!!(n&&n.useFactory)}function ps(n){return typeof n=="function"}function GP(n){return!!n.useClass}var xd=new K(""),Yl={},WP={},mg;function Am(){return mg===void 0&&(mg=new id),mg}var an=class{},fu=class extends an{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kg(e,s=>this.processProvider(s)),this.records.set(PD,os(void 0,this)),i.has("environment")&&this.records.set(an,os(void 0,this));let o=this.records.get(xd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kD,mn,pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Yr(this),r=gn(void 0),i;try{return e()}finally{Yr(t),gn(r)}}get(e,t=du,r=pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(B0))return e[B0](this);r=Md(r);let i,o=Yr(this),s=gn(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=JP(e)&&Ad(e);l&&this.injectableDefInScope(l)?u=os(Pg(e),Yl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?Am():this.parent;return t=r&pe.Optional&&t===du?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[nd]=a[nd]||[]).unshift(Bt(e)),o)throw a;return wP(a,e,"R3InjectorError",this.source)}else throw a}finally{gn(s),Yr(o)}}resolveInjectorInitializers(){let e=De(null),t=Yr(this),r=gn(void 0),i;try{let o=this.get(fs,mn,pe.Self);for(let s of o)s()}finally{Yr(t),gn(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=jt(e);let t=ps(e)?e:jt(e&&e.provide),r=QP(e);if(!ps(e)&&e.multi===!0){let i=this.records.get(t);i||(i=os(void 0,Yl,!0),i.factory=()=>xg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Yl&&(t.value=WP,t.value=t.factory()),typeof t.value=="object"&&t.value&&ZP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Pg(n){let e=Ad(n),t=e!==null?e.factory:ds(n);if(t!==null)return t;if(n instanceof K)throw new X(204,!1);if(n instanceof Function)return KP(n);throw new X(204,!1)}function KP(n){if(n.length>0)throw new X(204,!1);let t=oP(n);return t!==null?()=>t.factory(n):()=>new n}function QP(n){if(GD(n))return os(void 0,n.useValue);{let e=WD(n);return os(e,Yl)}}function WD(n,e,t){let r;if(ps(n)){let i=jt(n);return ds(i)||Pg(i)}else if(GD(n))r=()=>jt(n.useValue);else if(zP(n))r=()=>n.useFactory(...xg(n.deps||[]));else if(qP(n))r=()=>L(jt(n.useExisting));else{let i=jt(n&&(n.useClass||n.provide));if(YP(n))r=()=>new i(...xg(n.deps));else return ds(i)||Pg(i)}return r}function os(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YP(n){return!!n.deps}function ZP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JP(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function kg(n,e){for(let t of n)Array.isArray(t)?kg(t,e):t&&AD(t)?kg(t.\u0275providers,e):e(t)}function Jn(n,e){n instanceof fu&&n.assertNotDestroyed();let t,r=Yr(n),i=gn(void 0);try{return e()}finally{Yr(r),gn(i)}}function KD(){return MD()!==void 0||yP()!=null}function XP(n){if(!KD())throw new X(-203,!1)}function e1(n){let e=Rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function t1(n){return typeof n=="function"}var br=0,fe=1,se=2,At=3,xn=4,Pn=5,od=6,sd=7,Nn=8,gs=9,Qn=10,dt=11,pu=12,G0=13,Cs=14,Yn=15,Qi=16,ss=17,Er=18,Rd=19,QD=20,Zr=21,yg=22,yn=23,ti=25,YD=1;var Yi=7,ad=8,ms=9,sn=10,ud=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ud||{});function Jr(n){return Array.isArray(n)&&typeof n[YD]=="object"}function Tr(n){return Array.isArray(n)&&n[YD]===!0}function ZD(n){return(n.flags&4)!==0}function Nd(n){return n.componentOffset>-1}function Mm(n){return(n.flags&1)===1}function ni(n){return!!n.template}function Og(n){return(n[se]&512)!==0}var Fg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function JD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function oi(){return XD}function XD(n){return n.type.prototype.ngOnChanges&&(n.setInput=r1),n1}oi.ngInherit=!0;function n1(){let n=tC(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function r1(n,e,t,r,i){let o=this.declaredInputs[r],s=tC(n)||i1(n,{previous:hs,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Fg(l&&l.currentValue,t,u===hs),JD(n,e,i,t)}var eC="__ngSimpleChanges__";function tC(n){return n[eC]||null}function i1(n,e){return n[eC]=e}var W0=null;var Gn=function(n,e,t){W0?.(n,e,t)},o1="svg",s1="math";function Zn(n){for(;Array.isArray(n);)n=n[br];return n}function nC(n,e){return Zn(e[n])}function vn(n,e){return Zn(e[n.index])}function rC(n,e){return n.data[e]}function si(n,e){let t=e[n];return Jr(t)?t:t[br]}function a1(n){return(n[se]&4)===4}function xm(n){return(n[se]&128)===128}function u1(n){return Tr(n[At])}function cd(n,e){return e==null?null:n[e]}function iC(n){n[ss]=0}function oC(n){n[se]&1024||(n[se]|=1024,xm(n)&&kd(n))}function c1(n,e){for(;n>0;)e=e[Cs],n--;return e}function Pd(n){return!!(n[se]&9216||n[yn]?.dirty)}function Vg(n){n[Qn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Pd(n)&&kd(n)}function kd(n){n[Qn].changeDetectionScheduler?.notify(0);let e=Zi(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!xm(e)));)e=Zi(e)}function sC(n,e){if((n[se]&256)===256)throw new X(911,!1);n[Zr]===null&&(n[Zr]=[]),n[Zr].push(e)}function l1(n,e){if(n[Zr]===null)return;let t=n[Zr].indexOf(e);t!==-1&&n[Zr].splice(t,1)}function Zi(n){let e=n[At];return Tr(e)?e[At]:e}var me={lFrame:mC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var aC=!1;function d1(){return me.lFrame.elementDepthCount}function h1(){me.lFrame.elementDepthCount++}function f1(){me.lFrame.elementDepthCount--}function uC(){return me.bindingsEnabled}function p1(){return me.skipHydrationRootTNode!==null}function g1(n){return me.skipHydrationRootTNode===n}function m1(){me.skipHydrationRootTNode=null}function Me(){return me.lFrame.lView}function Ut(){return me.lFrame.tView}function Je(n){return me.lFrame.contextLView=n,n[Nn]}function Xe(n){return me.lFrame.contextLView=null,n}function xt(){let n=cC();for(;n!==null&&n.type===64;)n=n.parent;return n}function cC(){return me.lFrame.currentTNode}function y1(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _u(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function lC(){return me.lFrame.isParent}function v1(){me.lFrame.isParent=!1}function dC(){return aC}function K0(n){aC=n}function hC(){return me.lFrame.bindingIndex}function _1(n){return me.lFrame.bindingIndex=n}function Od(){return me.lFrame.bindingIndex++}function Rm(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function w1(){return me.lFrame.inI18n}function E1(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Lg(e)}function I1(){return me.lFrame.currentDirectiveIndex}function Lg(n){me.lFrame.currentDirectiveIndex=n}function D1(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fC(){return me.lFrame.currentQueryIndex}function Nm(n){me.lFrame.currentQueryIndex=n}function C1(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[Pn]:null}function pC(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=C1(o),i===null||(o=o[Cs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=gC();return r.currentTNode=e,r.lView=n,!0}function Pm(n){let e=gC(),t=n[fe];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gC(){let n=me.lFrame,e=n===null?null:n.child;return e===null?mC(n):e}function mC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yC(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vC=yC;function km(){let n=yC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function b1(n){return(me.lFrame.contextLView=c1(n,me.lFrame.contextLView))[Nn]}function ai(){return me.lFrame.selectedIndex}function Ji(n){me.lFrame.selectedIndex=n}function Om(){let n=me.lFrame;return rC(n.tView,n.selectedIndex)}function T1(){return me.lFrame.currentNamespace}var _C=!0;function Fm(){return _C}function Vm(n){_C=n}function S1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=XD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Lm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zl(n,e,t){wC(n,e,3,t)}function Jl(n,e,t,r){(n[se]&3)===t&&wC(n,e,t,r)}function vg(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function wC(n,e,t,r){let i=r!==void 0?n[ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ss]+=65536),(a<o||o==-1)&&(A1(n,t,e,u),n[ss]=(n[ss]&4294901760)+u+2),u++}function Q0(n,e){Gn(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),Gn(5,n,e)}}function A1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[ss]>>16&&(n[se]&3)===e&&(n[se]+=16384,Q0(a,o)):Q0(a,o)}var ls=-1,Xi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function M1(n){return n instanceof Xi}function x1(n){return(n.flags&8)!==0}function R1(n){return(n.flags&16)!==0}var _g={},jg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Md(r);let i=this.injector.get(e,_g,r);return i!==_g||t===_g?i:this.parentInjector.get(e,t,r)}};function EC(n){return n!==ls}function ld(n){return n&32767}function N1(n){return n>>16}function dd(n,e){let t=N1(n),r=e;for(;t>0;)r=r[Cs],t--;return r}var Bg=!0;function Y0(n){let e=Bg;return Bg=n,e}var P1=256,IC=P1-1,DC=5,k1=0,Wn={};function O1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(cu)&&(r=t[cu]),r==null&&(r=t[cu]=k1++);let i=r&IC,o=1<<i;e.data[n+(i>>DC)]|=o}function hd(n,e){let t=CC(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,wg(r.data,n),wg(e,null),wg(r.blueprint,null));let i=jm(n,e),o=n.injectorIndex;if(EC(i)){let s=ld(i),a=dd(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function wg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function CC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=MC(i),r===null)return ls;if(t++,i=i[Cs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ls}function Ug(n,e,t){O1(n,e,t)}function F1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(FD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function bC(n,e,t){if(t&pe.Optional||n!==void 0)return n;Dm(e,"NodeInjector")}function TC(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),!(t&(pe.Self|pe.Host))){let i=n[gs],o=gn(void 0);try{return i?i.get(e,r,t&pe.Optional):xD(e,r,t&pe.Optional)}finally{gn(o)}}return bC(r,e,t)}function SC(n,e,t,r=pe.Default,i){if(n!==null){if(e[se]&2048&&!(r&pe.Self)){let s=B1(n,e,t,r,Wn);if(s!==Wn)return s}let o=AC(n,e,t,r,Wn);if(o!==Wn)return o}return TC(e,t,r,i)}function AC(n,e,t,r,i){let o=L1(t);if(typeof o=="function"){if(!pC(e,n,r))return r&pe.Host?bC(i,t,r):TC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))Dm(t);else return s}finally{vC()}}else if(typeof o=="number"){let s=null,a=CC(n,e),u=ls,l=r&pe.Host?e[Yn][Pn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?jm(n,e):e[a+8],u===ls||!J0(r,!1)?a=-1:(s=e[fe],a=ld(u),e=dd(u,e)));a!==-1;){let h=e[fe];if(Z0(o,a,h.data)){let p=V1(a,e,t,s,r,l);if(p!==Wn)return p}u=e[a+8],u!==ls&&J0(r,e[fe].data[a+8]===l)&&Z0(o,a,e)?(s=h,a=ld(u),e=dd(u,e)):a=-1}}return i}function V1(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],u=r==null?Nd(a)&&Bg:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,h=Xl(a,s,t,u,l);return h!==null?eo(e,s,h,a):Wn}function Xl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&ni(y)&&y.type===t)return u}return null}function eo(n,e,t,r){let i=n[t],o=e.data;if(M1(i)){let s=i;s.resolving&&hP(dP(o[t]));let a=Y0(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?gn(s.injectImpl):null,h=pC(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&S1(t,o[t],e)}finally{l!==null&&gn(l),Y0(a),s.resolving=!1,vC()}}return i}function L1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(cu)?n[cu]:void 0;return typeof e=="number"?e>=0?e&IC:j1:e}function Z0(n,e,t){let r=1<<n;return!!(t[e+(n>>DC)]&r)}function J0(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var Ki=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return SC(this._tNode,this._lView,e,Md(r),t)}};function j1(){return new Ki(xt(),Me())}function wu(n){return yu(()=>{let e=n.prototype.constructor,t=e[td]||$g(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[td]||$g(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $g(n){return CD(n)?()=>{let e=$g(jt(n));return e&&e()}:ds(n)}function B1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=AC(o,s,t,r|pe.Self,Wn);if(a!==Wn)return a;let u=o.parent;if(!u){let l=s[QD];if(l){let h=l.get(t,Wn,r);if(h!==Wn)return h}u=MC(s),s=s[Cs]}o=u}return i}function MC(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[Pn]:null}function Bm(n){return F1(xt(),n)}function X0(n,e=null,t=null,r){let i=xC(n,e,t,r);return i.resolveInjectorInitializers(),i}function xC(n,e=null,t=null,r,i=new Set){let o=[t||mn,$P(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new fu(o,e||Am(),r||null,i)}var un=class n{static{this.THROW_IF_NOT_FOUND=du}static{this.NULL=new id}static create(e,t){if(Array.isArray(e))return X0({name:""},t,e,"");{let r=e.name??"";return X0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>L(PD)})}static{this.__NG_ELEMENT_ID__=-1}};var U1=new K("");U1.__NG_ELEMENT_ID__=n=>{let e=xt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new X(204,!1)};var $1="ngOriginalError";function Eg(n){return n[$1]}var RC=!0,Um=(()=>{class n{static{this.__NG_ELEMENT_ID__=H1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Hg=class extends Um{constructor(e){super(),this._lView=e}onDestroy(e){return sC(this._lView,e),()=>l1(this._lView,e)}};function H1(){return new Hg(Me())}var bs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var qg=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,KD()&&(this.destroyRef=$(Um,{optional:!0})??void 0,this.pendingTasks=$(bs,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ye=qg;function fd(...n){}function NC(n){let e,t;function r(){n=fd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function eD(n){return queueMicrotask(()=>n()),()=>{n=fd}}var $m="isAngularZone",pd=$m+"_ID",q1=0,we=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ye(!1),this.onMicrotaskEmpty=new Ye(!1),this.onStable=new Ye(!1),this.onError=new Ye(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=RC}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,W1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($m)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,z1,fd,fd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},z1={};function Hm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function G1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){NC(()=>{n.callbackScheduled=!1,zg(n),n.isCheckStableRunning=!0,Hm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),zg(n)}function W1(n){let e=()=>{G1(n)},t=q1++;n._inner=n._inner.fork({name:"angular",properties:{[$m]:!0,[pd]:t,[pd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(K1(u))return r.invokeTask(o,s,a,u);try{return tD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),nD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return tD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Q1(u)&&e(),nD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,zg(n),Hm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function zg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nD(n){n._nesting--,Hm(n)}var gd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ye,this.onMicrotaskEmpty=new Ye,this.onStable=new Ye,this.onError=new Ye}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function K1(n){return PC(n,"__ignore_ng_zone__")}function Q1(n){return PC(n,"__scheduler_tick__")}function PC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function Y1(n="zone.js",e){return n==="noop"?new gd:n==="zone.js"?new we(e):n}var Ir=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Eg(e);for(;t&&Eg(t);)t=Eg(t);return t||null}},Z1=new K("",{providedIn:"root",factory:()=>{let n=$(we),e=$(Ir);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function J1(){return Ts(xt(),Me())}function Ts(n,e){return new _n(vn(n,e))}var _n=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=J1}}return n})();function X1(n){return n instanceof _n?n.nativeElement:n}function ek(){return this._results[Symbol.iterator]()}var Gg=class n{get changes(){return this._changes??=new Ye}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=ek)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DP(e);(this._changesDetected=!IP(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function kC(n){return(n.flags&128)===128}var OC=new Map,tk=0;function nk(){return tk++}function rk(n){OC.set(n[Rd],n)}function Wg(n){OC.delete(n[Rd])}var rD="__ngContext__";function to(n,e){Jr(e)?(n[rD]=e[Rd],rk(e)):n[rD]=e}function FC(n){return LC(n[pu])}function VC(n){return LC(n[xn])}function LC(n){for(;n!==null&&!Tr(n);)n=n[xn];return n}var Kg;function jC(n){Kg=n}function ik(){if(Kg!==void 0)return Kg;if(typeof document<"u")return document;throw new X(210,!1)}var Fd=new K("",{providedIn:"root",factory:()=>ok}),ok="ng",qm=new K(""),Kt=new K("",{providedIn:"platform",factory:()=>"unknown"});var zm=new K("",{providedIn:"root",factory:()=>ik().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sk="h",ak="b";var uk=()=>null;function Gm(n,e,t=!1){return uk(n,e,t)}var BC=!1,ck=new K("",{providedIn:"root",factory:()=>BC});var zl;function lk(){if(zl===void 0&&(zl=null,Rn.trustedTypes))try{zl=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zl}function iD(n){return lk()?.createScriptURL(n)||n}var md=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ID})`}};function Eu(n){return n instanceof md?n.changingThisBreaksApplicationSecurity:n}function Wm(n,e){let t=dk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ID})`)}return t===e}function dk(n){return n instanceof md&&n.getTypeName()||null}var hk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UC(n){return n=String(n),n.match(hk)?n:"unsafe:"+n}var Vd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vd||{});function Km(n){let e=HC();return e?e.sanitize(Vd.URL,n)||"":Wm(n,"URL")?Eu(n):UC(wr(n))}function fk(n){let e=HC();if(e)return iD(e.sanitize(Vd.RESOURCE_URL,n)||"");if(Wm(n,"ResourceURL"))return iD(Eu(n));throw new X(904,!1)}function pk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?fk:Km}function $C(n,e,t){return pk(e,t)(n)}function HC(){let n=Me();return n&&n[Qn].sanitizer}function qC(n){return n instanceof Function?n():n}function gk(n){return(n??$(un)).get(Kt)==="browser"}var Dr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Dr||{}),mk;function Qm(n,e){return mk(n,e)}function as(n,e,t,r,i){if(r!=null){let o,s=!1;Tr(r)?o=r:Jr(r)&&(s=!0,r=r[br]);let a=Zn(r);n===0&&t!==null?i==null?QC(e,t,a):yd(e,t,a,i||null,!0):n===1&&t!==null?yd(e,t,a,i||null,!0):n===2?Rk(e,a,s):n===3&&e.destroyNode(a),o!=null&&Pk(e,n,o,t,i)}}function yk(n,e){return n.createText(e)}function vk(n,e,t){n.setValue(e,t)}function zC(n,e,t){return n.createElement(e,t)}function _k(n,e){GC(n,e),e[br]=null,e[Pn]=null}function wk(n,e,t,r,i,o){r[br]=i,r[Pn]=e,Ld(n,r,t,1,i,o)}function GC(n,e){e[Qn].changeDetectionScheduler?.notify(9),Ld(n,e,e[dt],2,null,null)}function Ek(n){let e=n[pu];if(!e)return Ig(n[fe],n);for(;e;){let t=null;if(Jr(e))t=e[pu];else{let r=e[sn];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)Jr(e)&&Ig(e[fe],e),e=e[At];e===null&&(e=n),Jr(e)&&Ig(e[fe],e),t=e&&e[xn]}e=t}}function Ik(n,e,t,r){let i=sn+r,o=t.length;r>0&&(t[i-1][xn]=e),r<o-sn?(e[xn]=t[i],ND(t,sn+r,e)):(t.push(e),e[xn]=null),e[At]=t;let s=e[Qi];s!==null&&t!==s&&WC(s,e);let a=e[Er];a!==null&&a.insertView(n),Vg(e),e[se]|=128}function WC(n,e){let t=n[ms],r=e[At];if(Jr(r))n[se]|=ud.HasTransplantedViews;else{let i=r[At][Yn];e[Yn]!==i&&(n[se]|=ud.HasTransplantedViews)}t===null?n[ms]=[e]:t.push(e)}function Ym(n,e){let t=n[ms],r=t.indexOf(e);t.splice(r,1)}function Qg(n,e){if(n.length<=sn)return;let t=sn+e,r=n[t];if(r){let i=r[Qi];i!==null&&i!==n&&Ym(i,r),e>0&&(n[t-1][xn]=r[xn]);let o=rd(n,sn+e);_k(r[fe],r);let s=o[Er];s!==null&&s.detachView(o[fe]),r[At]=null,r[xn]=null,r[se]&=-129}return r}function KC(n,e){if(!(e[se]&256)){let t=e[dt];t.destroyNode&&Ld(n,e,t,3,null,null),Ek(e)}}function Ig(n,e){if(e[se]&256)return;let t=De(null);try{e[se]&=-129,e[se]|=256,e[yn]&&Kp(e[yn]),Ck(n,e),Dk(n,e),e[fe].type===1&&e[dt].destroy();let r=e[Qi];if(r!==null&&Tr(e[At])){r!==e[At]&&Ym(r,e);let i=e[Er];i!==null&&i.detachView(n)}Wg(e)}finally{De(t)}}function Dk(n,e){let t=n.cleanup,r=e[sd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[sd]=null);let i=e[Zr];if(i!==null){e[Zr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Ck(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Xi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Gn(4,a,u);try{u.call(a)}finally{Gn(5,a,u)}}else{Gn(4,i,o);try{o.call(i)}finally{Gn(5,i,o)}}}}}function bk(n,e,t){return Tk(n,e.parent,t)}function Tk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[br];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Kn.None||o===Kn.Emulated)return null}return vn(r,t)}}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QC(n,e,t){n.appendChild(e,t)}function oD(n,e,t,r,i){r!==null?yd(n,e,t,r,i):QC(n,e,t)}function YC(n,e){return n.parentNode(e)}function Sk(n,e){return n.nextSibling(e)}function Ak(n,e,t){return xk(n,e,t)}function Mk(n,e,t){return n.type&40?vn(n,t):null}var xk=Mk,sD;function Zm(n,e,t,r){let i=bk(n,r,e),o=e[dt],s=r.parent||e[Pn],a=Ak(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)oD(o,i,t[u],a,!1);else oD(o,i,t,a,!1);sD!==void 0&&sD(o,r,e,t,i)}function uu(n,e){if(e!==null){let t=e.type;if(t&3)return vn(e,n);if(t&4)return Yg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uu(n,r);{let i=n[e.index];return Tr(i)?Yg(-1,i):Zn(i)}}else{if(t&128)return uu(n,e.next);if(t&32)return Qm(e,n)()||Zn(n[e.index]);{let r=ZC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zi(n[Yn]);return uu(i,r)}else return uu(n,e.next)}}}return null}function ZC(n,e){if(e!==null){let r=n[Yn][Pn],i=e.projection;return r.projection[i]}return null}function Yg(n,e){let t=sn+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return uu(r,i)}return e[Yi]}function Rk(n,e,t){n.removeChild(null,e,t)}function Jm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&to(Zn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Jm(n,e,t.child,r,i,o,!1),as(e,n,i,a,o);else if(u&32){let l=Qm(t,r),h;for(;h=l();)as(e,n,i,h,o);as(e,n,i,a,o)}else u&16?Nk(n,e,r,t,i,o):as(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ld(n,e,t,r,i,o){Jm(t,r,n.firstChild,e,i,o,!1)}function Nk(n,e,t,r,i,o){let s=t[Yn],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];as(e,n,i,h,o)}else{let l=u,h=s[At];kC(r)&&(l.flags|=128),Jm(n,e,l,h,i,o,!0)}}function Pk(n,e,t,r,i){let o=t[Yi],s=Zn(t);o!==s&&as(e,n,r,o,i);for(let a=sn;a<t.length;a++){let u=t[a];Ld(u[fe],u,n,e,r,o)}}function kk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Dr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Dr.Important),n.setStyle(t,r,i,o))}}function Ok(n,e,t){n.setAttribute(e,"style",t)}function JC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Rg(n,e,r),i!==null&&JC(n,e,i),o!==null&&Ok(n,e,o)}var Xn={};function te(n=1){eb(Ut(),Me(),ai()+n,!1)}function eb(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jl(e,o,0,t)}Ji(t)}function ie(n,e=pe.Default){let t=Me();if(t===null)return L(n,e);let r=xt();return SC(r,t,jt(n),e)}function tb(){let n="invalid";throw new Error(n)}function nb(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Xr.SignalBased&&(a=e[r][mr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Xr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):JD(e,a,r,o)}finally{De(s)}}function Fk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ji(~i);else{let o=i,s=t[++r],a=t[++r];E1(s,o);let u=e[o];a(2,u)}}}finally{Ji(-1)}}function jd(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[br]=i,p[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),iC(p),p[At]=p[Cs]=n,p[Nn]=t,p[Qn]=s||n&&n[Qn],p[dt]=a||n&&n[dt],p[gs]=u||n&&n[gs]||null,p[Pn]=o,p[Rd]=nk(),p[od]=h,p[QD]=l,p[Yn]=e.type==2?n[Yn]:p,p}function Bd(n,e,t,r,i){let o=n.data[e];if(o===null)o=Vk(n,e,t,r,i),w1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=y1();o.injectorIndex=s===null?-1:s.injectorIndex}return _u(o,!0),o}function Vk(n,e,t,r,i){let o=cC(),s=lC(),a=s?o:o&&o.parent,u=n.data[e]=Hk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function rb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ib(n,e,t,r,i){let o=ai(),s=r&2;try{Ji(-1),s&&e.length>ti&&eb(n,e,ti,!1),Gn(s?2:0,i),t(r,i)}finally{Ji(o),Gn(s?3:1,i)}}function ob(n,e,t){if(ZD(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{De(r)}}}function sb(n,e,t){uC()&&(Qk(n,e,t,vn(t,e)),(t.flags&64)===64&&hb(n,e,t))}function ab(n,e,t=vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function ub(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Xm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Xm(n,e,t,r,i,o,s,a,u,l,h){let p=ti+r,g=p+i,y=Lk(p,g),b=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function Lk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xn);return t}function jk(n,e,t,r){let o=r.get(ck,BC)||t===Kn.ShadowDom,s=n.selectRootElement(e,o);return Bk(s),s}function Bk(n){Uk(n)}var Uk=()=>null;function $k(n,e,t,r){let i=gb(e);i.push(t),n.firstCreatePass&&mb(n).push(r,i.length-1)}function Hk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return p1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Xr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?uD(r,t,l,a,u):uD(r,t,l,a)}return r}function uD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function qk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],g=t?t.get(p):null,y=g?g.inputs:null,b=g?g.outputs:null;u=aD(0,p.inputs,h,u,y),l=aD(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!Tm(e)?sO(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function zk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cb(n,e,t,r,i,o,s,a){let u=vn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ey(n,t,h,r,i),Nd(e)&&Gk(t,e.index)):e.type&3?(r=zk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Gk(n,e){let t=si(e,n);t[se]&16||(t[se]|=64)}function lb(n,e,t,r){if(uC()){let i=r===null?null:{"":-1},o=Zk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&db(n,e,t,s,i,a),i&&Jk(t,r,i)}t.mergedAttrs=hu(t.mergedAttrs,t.attrs)}function db(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Ug(hd(t,e),n,r[l].type);eO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=rb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=hu(t.mergedAttrs,h.hostAttrs),tO(n,t,e,u,h),Xk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}qk(n,t,o)}function Wk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Kk(s)!=a&&s.push(a),s.push(t,r,o)}}function Kk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Qk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Nd(t)&&nO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hd(t,e),to(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=eo(e,n,a,t);if(to(l,e),s!==null&&oO(e,a-i,l,u,t,s),ni(u)){let h=si(t.index,e);h[Nn]=eo(e,n,a,t)}}}function hb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=I1();try{Ji(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Lg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Yk(u,l)}}finally{Ji(-1),Lg(s)}}function Yk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Zk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(PP(e,s.selectors,!1))if(r||(r=[]),ni(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Zg(n,e,u)}else r.unshift(s),Zg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Zg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Jk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function Xk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ni(e)&&(t[""]=n)}}function eO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ds(i.type,!0)),s=new Xi(o,ni(i),ie);n.blueprint[r]=s,t[r]=s,Wk(n,e,r,rb(n,t,i.hostVars,Xn),i)}function nO(n,e,t){let r=vn(e,n),i=ub(t),o=n[Qn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ud(n,jd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function rO(n,e,t,r,i,o){let s=vn(n,e);iO(e[dt],s,o,n.value,t,r,i)}function iO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function oO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];nb(r,t,u,l,h,p)}}function sO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function fb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function pb(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Nm(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function Ud(n,e){return n[pu]?n[G0][xn]=e:n[pu]=e,n[G0]=e,e}function Jg(n,e,t){Nm(0);let r=De(null);try{e(n,t)}finally{De(r)}}function gb(n){return n[sd]??=[]}function mb(n){return n.cleanup??=[]}function yb(n,e){let t=n[gs],r=t?t.get(Ir,null):null;r&&r.handleError(e)}function ey(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];nb(h,l,r,a,u,i)}}function ty(n,e,t){let r=nC(e,n);vk(n[dt],r,t)}function aO(n,e){let t=si(e,n),r=t[fe];uO(r,t);let i=t[br];i!==null&&t[od]===null&&(t[od]=Gm(i,t[gs])),ny(r,t,t[Nn])}function uO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ny(n,e,t){Pm(e);try{let r=n.viewQuery;r!==null&&Jg(1,r,t);let i=n.template;i!==null&&ib(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Er]?.finishViewCreation(n),n.staticContentQueries&&pb(n,e),n.staticViewQueries&&Jg(2,n.viewQuery,t);let o=n.components;o!==null&&cO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,km()}}function cO(n,e){for(let t=0;t<e.length;t++)aO(n,e[t])}function lO(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=jd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Qi]=l;let h=n[Er];return h!==null&&(u[Er]=h.createEmbeddedView(o)),ny(o,u,t),u}finally{De(i)}}function cD(n,e){return!e||e.firstChild===null||kC(n)}function dO(n,e,t,r=!0){let i=e[fe];if(Ik(i,e,n,t),r){let s=Yg(t,n),a=e[dt],u=YC(a,n[Yi]);u!==null&&wk(i,n[Pn],a,e,u,s)}let o=e[od];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Zn(o)),Tr(o)&&hO(o,r);let s=t.type;if(s&8)vd(n,e,t.child,r);else if(s&32){let a=Qm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ZC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Zi(e[Yn]);vd(u[fe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hO(n,e){for(let t=sn;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&vd(r[fe],r,i,e)}n[Yi]!==n[br]&&e.push(n[Yi])}var vb=[];function fO(n){return n[yn]??pO(n)}function pO(n){let e=vb.pop()??Object.create(mO);return e.lView=n,e}function gO(n){n.lView[yn]!==n&&(n.lView=null,vb.push(n))}var mO=ge(P({},eu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kd(n.lView)},consumerOnSignalRead(){this.lView[yn]=this}});function yO(n){let e=n[yn]??Object.create(vO);return e.lView=n,e}var vO=ge(P({},eu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Zi(n.lView);for(;e&&!_b(e[fe]);)e=Zi(e);e&&oC(e)},consumerOnSignalRead(){this.lView[yn]=this}});function _b(n){return n.type!==2}var _O=100;function wb(n,e=!0,t=0){let r=n[Qn],i=r.rendererFactory,o=!1;o||i.begin?.();try{wO(n,t)}catch(s){throw e&&yb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function wO(n,e){let t=dC();try{K0(!0),Xg(n,e);let r=0;for(;Pd(n);){if(r===_O)throw new X(103,!1);r++,Xg(n,1)}}finally{K0(t)}}function EO(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Qn].inlineEffectRunner?.flush(),Pm(e);let a=!0,u=null,l=null;o||(_b(n)?(l=fO(e),u=pl(l)):t0()===null?(a=!1,l=yO(e),u=pl(l)):e[yn]&&(Kp(e[yn]),e[yn]=null));try{iC(e),_1(n.bindingStartIndex),t!==null&&ib(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Zl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Jl(e,y,0,null),vg(e,0)}if(s||IO(e),Eb(e,0),n.contentQueries!==null&&pb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Zl(e,y)}else{let y=n.contentHooks;y!==null&&Jl(e,y,1),vg(e,1)}Fk(n,e);let p=n.components;p!==null&&Db(e,p,0);let g=n.viewQuery;if(g!==null&&Jg(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Zl(e,y)}else{let y=n.viewHooks;y!==null&&Jl(e,y,2),vg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[yg]){for(let y of e[yg])y();e[yg]=null}o||(e[se]&=-73)}catch(h){throw o||kd(e),h}finally{l!==null&&(Gp(l,u),a&&gO(l)),km()}}function Eb(n,e){for(let t=FC(n);t!==null;t=VC(t))for(let r=sn;r<t.length;r++){let i=t[r];Ib(i,e)}}function IO(n){for(let e=FC(n);e!==null;e=VC(e)){if(!(e[se]&ud.HasTransplantedViews))continue;let t=e[ms];for(let r=0;r<t.length;r++){let i=t[r];oC(i)}}}function DO(n,e,t){let r=si(e,n);Ib(r,t)}function Ib(n,e){xm(n)&&Xg(n,e)}function Xg(n,e){let r=n[fe],i=n[se],o=n[yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Wp(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)EO(r,n,r.template,n[Nn]);else if(i&8192){Eb(n,1);let a=r.components;a!==null&&Db(n,a,1)}}function Db(n,e,t){for(let r=0;r<e.length;r++)DO(n,e[r],t)}function ry(n,e){let t=dC()?64:1088;for(n[Qn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=Zi(n);if(Og(n)&&!r)return n;n=r}return null}var no=class{get rootNodes(){let e=this._lView,t=e[fe];return vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(Tr(e)){let t=e[ad],r=t?t.indexOf(this):-1;r>-1&&(Qg(e,r),rd(t,r))}this._attachedToViewContainer=!1}KC(this._lView[fe],this._lView)}onDestroy(e){sC(this._lView,e)}markForCheck(){ry(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Vg(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,wb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Og(this._lView),t=this._lView[Qi];t!==null&&!e&&Ym(t,this._lView),GC(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Og(this._lView),r=this._lView[Qi];r!==null&&!t&&WC(r,this._lView),Vg(this._lView)}},ro=(()=>{class n{static{this.__NG_ELEMENT_ID__=TO}}return n})(),CO=ro,bO=class extends CO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=lO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new no(i)}};function TO(){return iy(xt(),Me())}function iy(n,e){return n.type&4?new bO(e,n,Ts(n,e)):null}var BG=new RegExp(`^(\\d+)*(${ak}|${sk})*(.*)`);var SO=()=>null;function lD(n,e){return SO(n,e)}var ys=class{},oy=new K("",{providedIn:"root",factory:()=>!1});var Cb=new K(""),bb=new K(""),em=class{},_d=class{};function AO(n){let e=Error(`No component factory found for ${Bt(n)}.`);return e[MO]=n,e}var MO="ngComponent";var tm=class{resolveComponentFactory(e){throw AO(e)}},vs=class{static{this.NULL=new tm}},_s=class{},ui=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>xO()}}return n})();function xO(){let n=Me(),e=xt(),t=si(e.index,n);return(Jr(t)?t:n)[dt]}var RO=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function nm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=F0(i,a);else if(o==2){let u=a,l=e[++s];r=F0(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var wd=class extends vs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ei(e);return new ws(t,this.ngModule)}};function dD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Xr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Xr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function NO(n){let e=n.toLowerCase();return e==="svg"?o1:e==="math"?s1:null}var ws=class extends _d{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=dD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return dD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=VP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof an?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new jg(e,s):e,u=a.get(_s,null);if(u===null)throw new X(407,!1);let l=a.get(RO,null),h=a.get(ys,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?jk(g,r,this.componentDef.encapsulation,a):zC(g,y,NO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;b!==null&&(M=Gm(b,a,!0));let B=Xm(0,null,null,1,0,null,null,null,null,null,null),G=jd(null,B,null,A,null,null,p,g,a,null,M);Pm(G);let j,J,oe=null;try{let ee=this.componentDef,E,v=null;ee.findHostDirectiveDefs?(E=[],v=new Map,ee.findHostDirectiveDefs(ee,E,v),E.push(ee)):E=[ee];let w=PO(G,b);oe=kO(w,b,ee,E,G,p,g),J=rC(B,ti),b&&VO(g,ee,b,r),t!==void 0&&LO(J,this.ngContentSelectors,t),j=FO(oe,ee,E,v,G,[jO]),ny(B,G,null)}catch(ee){throw oe!==null&&Wg(oe),Wg(G),ee}finally{km()}return new rm(this.componentType,j,Ts(J,G),G,J)}finally{De(o)}}},rm=class extends em{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new no(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ey(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=si(this._tNode.index,o);ry(s,1)}}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PO(n,e){let t=n[fe],r=ti;return n[r]=e,Bd(t,r,2,"#host",null)}function kO(n,e,t,r,i,o,s){let a=i[fe];OO(r,n,e,s);let u=null;e!==null&&(u=Gm(e,i[gs]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=jd(i,ub(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Zg(a,n,r.length-1),Ud(i,p),i[n.index]=p}function OO(n,e,t,r){for(let i of n)e.mergedAttrs=hu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nm(e,e.mergedAttrs,!0),t!==null&&XC(r,t,e))}function FO(n,e,t,r,i,o){let s=xt(),a=i[fe],u=vn(s,i);db(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,g=eo(i,a,p,s);to(g,i)}hb(a,i,s),u&&to(u,i);let l=eo(i,a,s.directiveStart+s.componentOffset,s);if(n[Nn]=i[Nn]=l,o!==null)for(let h of o)h(l,e);return ob(a,s,i),l}function VO(n,e,t,r){if(r)Rg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=LP(e.selectors[0]);i&&Rg(n,t,i),o&&o.length>0&&JC(n,t,o.join(" "))}}function LO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function jO(){let n=xt();Lm(Me()[fe],n)}var ci=(()=>{class n{static{this.__NG_ELEMENT_ID__=BO}}return n})();function BO(){let n=xt();return Sb(n,Me())}var UO=ci,Tb=class extends UO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=jm(this._hostTNode,this._hostLView);if(EC(e)){let t=dd(e,this._hostLView),r=ld(e),i=t[fe].data[r+8];return new Ki(i,t)}else return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,cD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!t1(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new ws(ei(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(an,null);A&&(o=A)}let h=ei(u.componentType??{}),p=lD(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,cD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(u1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[At],l=new Tb(u,u[Pn],u[At]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return dO(s,i,o,r),e.attachToViewContainerRef(),ND(Dg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Qg(this._lContainer,t);r&&(rd(Dg(this._lContainer),t),KC(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Qg(this._lContainer,t);return r&&rd(Dg(this._lContainer),t)!=null?new no(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hD(n){return n[ad]}function Dg(n){return n[ad]||(n[ad]=[])}function Sb(n,e){let t,r=e[n.index];return Tr(r)?t=r:(t=fb(r,e,null,n),e[n.index]=t,Ud(e,t)),HO(t,e,n,r),new Tb(t,n,e)}function $O(n,e){let t=n[dt],r=t.createComment(""),i=vn(e,n),o=YC(t,i);return yd(t,o,r,Sk(t,i),!1),r}var HO=GO,qO=()=>!1;function zO(n,e,t){return qO(n,e,t)}function GO(n,e,t,r){if(n[Yi])return;let i;t.type&8?i=Zn(r):i=$O(e,t),n[Yi]=i}var im=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},om=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)sy(e,t).matches!==null&&this.queries[t].setDirty()}},sm=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=eF(e):this.predicate=e}},am=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},um=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,WO(t,o)),this.matchTNodeWithReadOption(e,t,Xl(t,e,o,!1,!1))}else r===ro?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===_n||i===ci||i===ro&&t.type&4)this.addMatch(t.index,-2);else{let o=Xl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function WO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function KO(n,e){return n.type&11?Ts(n,e):n.type&4?iy(n,e):null}function QO(n,e,t,r){return t===-1?KO(e,n):t===-2?YO(n,e,r):eo(n,n[fe],t,e)}function YO(n,e,t){if(t===_n)return Ts(e,n);if(t===ro)return iy(e,n);if(t===ci)return Sb(e,n)}function Ab(n,e,t,r){let i=e[Er].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(QO(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function cm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Ab(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=sn;p<h.length;p++){let g=h[p];g[Qi]===g[At]&&cm(g[fe],g,l,r)}if(h[ms]!==null){let p=h[ms];for(let g=0;g<p.length;g++){let y=p[g];cm(y[fe],y,l,r)}}}}}return r}function ZO(n,e){return n[Er].queries[e].queryList}function JO(n,e,t){let r=new Gg((t&4)===4);return $k(n,e,r,r.destroy),(e[Er]??=new om).queries.push(new im(r))-1}function XO(n,e,t,r){let i=Ut();if(i.firstCreatePass){let o=xt();tF(i,new sm(e,t,r),o.index),nF(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return JO(i,Me(),t)}function eF(n){return n.split(",").map(e=>e.trim())}function tF(n,e,t){n.queries===null&&(n.queries=new am),n.queries.track(new um(e,t))}function nF(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function sy(n,e){return n.queries.getByIndex(e)}function rF(n,e){let t=n[fe],r=sy(t,e);return r.crossesNgTemplate?cm(t,n,e,[]):Ab(t,n,r,e)}var fD=new Set;function Iu(n){fD.has(n)||(fD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function iF(n){return typeof n=="function"&&n[mr]!==void 0}function Du(n,e){Iu("NgSignals");let t=h0(n),r=t[mr];return e?.equal&&(r.equal=e.equal),t.set=i=>Qp(r,i),t.update=i=>f0(r,i),t.asReadonly=oF.bind(t),t}function oF(){let n=this[mr];if(n.readonlyFn===void 0){let e=()=>this();e[mr]=n,n.readonlyFn=e}return n.readonlyFn}function Mb(n){return iF(n)&&typeof n.set=="function"}function sF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(lF))}return o}return Ed.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,g)=>{a.push(""),s.push(r(p).then(y=>{a[l+g]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>dF(o));e.push(u)}),uF(),Promise.all(e).then(()=>{})}var Ed=new Map,aF=new Set;function uF(){let n=Ed;return Ed=new Map,n}function cF(){return Ed.size===0}function lF(n){return typeof n=="string"?n:n.text()}function dF(n){aF.delete(n)}function hF(n){return Object.getPrototypeOf(n.prototype).constructor}function li(n){let e=hF(n.type),t=!0,r=[n];for(;e;){let i;if(ni(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Gl(n.inputs),s.inputTransforms=Gl(n.inputTransforms),s.declaredInputs=Gl(n.declaredInputs),s.outputs=Gl(n.outputs);let a=i.hostBindings;a&&yF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&gF(n,u),l&&mF(n,l),fF(n,i),rP(n.outputs,i.outputs),ni(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===li&&(t=!1)}}e=Object.getPrototypeOf(e)}pF(r)}function fF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function pF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hu(i.hostAttrs,t=hu(t,i.hostAttrs))}}function Gl(n){return n===hs?{}:n===mn?[]:n}function gF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function mF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function yF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ay(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ri=class{},gu=class{};var Id=class extends ri{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);let o=UD(e);this._bootstrapComponents=qC(o.bootstrap),this._r3Injector=xC(e,t,[{provide:ri,useValue:this},{provide:vs,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dd=class extends gu{constructor(e){super(),this.moduleType=e}create(e){return new Id(this.moduleType,e,[])}};function vF(n,e,t){return new Id(n,e,t,!1)}var lm=class extends ri{constructor(e){super(),this.componentFactoryResolver=new wd(this),this.instance=null;let t=new fu([...e.providers,{provide:ri,useValue:this},{provide:vs,useValue:this.componentFactoryResolver}],e.parent||Am(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $d(n,e,t=null){return new lm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function xb(n){return wF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _F(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function wF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ii(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Rb(n,e,t,r){let i=ii(n,e,t);return ii(n,e+1,r)||i}function EF(n,e,t,r,i){let o=Rb(n,e,t,r);return ii(n,e+2,i)||o}function IF(n){return(n.flags&32)===32}function DF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Bd(e,n,4,s||null,a||null);lb(e,t,h,cd(l,u)),Lm(e,h);let p=h.tView=Xm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function CF(n,e,t,r,i,o,s,a,u,l){let h=t+ti,p=e.firstCreatePass?DF(h,e,n,r,i,o,s,a,u):e.data[h];_u(p,!1);let g=bF(e,n,p,t);Fm()&&Zm(e,n,g,p),to(g,n);let y=fb(g,n,g,p);return n[h]=y,Ud(n,y),zO(y,p,n),Mm(p)&&sb(e,n,p),u!=null&&ab(n,p,l),p}function Rt(n,e,t,r,i,o,s,a){let u=Me(),l=Ut(),h=cd(l.consts,o);return CF(u,l,n,e,t,r,i,h,s,a),Rt}var bF=TF;function TF(n,e,t,r){return Vm(!0),e[dt].createComment("")}var us=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(us||{}),Nb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),dm=class n{constructor(){this.ngZone=$(we),this.scheduler=$(ys),this.errorHandler=$(Ir,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[us.EarlyRead,us.Write,us.MixedReadWrite,us.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}},hm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function uy(n,e){!e?.injector&&XP(uy);let t=e?.injector??$(un);return gk(t)?(Iu("NgAfterNextRender"),AF(n,t,e,!0)):MF}function SF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function AF(n,e,t,r){let i=e.get(Nb);i.impl??=e.get(dm);let o=t?.phase??us.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Um):null,a=new hm(i.impl,SF(n,o),r,s);return i.impl.register(a),a}var MF={destroy(){}};function Hd(n,e,t,r){let i=Me(),o=Od();if(ii(i,o,e)){let s=Ut(),a=Om();rO(a,i,n,e,t,r)}return Hd}function xF(n,e,t,r){return ii(n,Od(),t)?e+wr(t)+r:Xn}function RF(n,e,t,r,i,o){let s=hC(),a=Rb(n,s,t,i);return Rm(2),a?e+wr(t)+r+wr(i)+o:Xn}function NF(n,e,t,r,i,o,s,a){let u=hC(),l=EF(n,u,t,i,s);return Rm(3),l?e+wr(t)+r+wr(i)+o+wr(s)+a:Xn}function Wl(n,e){return n<<17|e<<2}function io(n){return n>>17&32767}function PF(n){return(n&2)==2}function kF(n,e){return n&131071|e<<17}function fm(n){return n|2}function Es(n){return(n&131068)>>2}function Cg(n,e){return n&-131069|e<<2}function OF(n){return(n&1)===1}function pm(n){return n|1}function FF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=io(s),u=Es(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||vu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=io(n[a+1]);n[r+1]=Wl(g,a),g!==0&&(n[g+1]=Cg(n[g+1],r)),n[a+1]=kF(n[a+1],r)}else n[r+1]=Wl(a,0),a!==0&&(n[a+1]=Cg(n[a+1],r)),a=r;else n[r+1]=Wl(u,0),a===0?a=r:n[u+1]=Cg(n[u+1],r),u=r;l&&(n[r+1]=fm(n[r+1])),pD(n,h,r,!0),pD(n,h,r,!1),VF(e,h,n,r,o),s=Wl(a,u),o?e.classBindings=s:e.styleBindings=s}function VF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&vu(o,e)>=0&&(t[r+1]=pm(t[r+1]))}function pD(n,e,t,r){let i=n[t+1],o=e===null,s=r?io(i):Es(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];LF(u,e)&&(a=!0,n[s+1]=r?pm(l):fm(l)),s=r?io(l):Es(l)}a&&(n[t+1]=r?fm(i):pm(i))}function LF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?vu(n,e)>=0:!1}function Et(n,e,t){let r=Me(),i=Od();if(ii(r,i,e)){let o=Ut(),s=Om();cb(o,s,r,n,e,r[dt],t,!1)}return Et}function gD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";ey(n,t,o[s],s,r)}function qd(n,e,t){return Pb(n,e,t,!1),qd}function zd(n,e){return Pb(n,e,null,!0),zd}function Pb(n,e,t,r){let i=Me(),o=Ut(),s=Rm(2);if(o.firstUpdatePass&&BF(o,n,s,r),e!==Xn&&ii(i,s,e)){let a=o.data[ai()];zF(o,a,i,i[dt],n,i[s+1]=GF(e,t),r,s)}}function jF(n,e){return e>=n.expandoStartIndex}function BF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=jF(n,t);WF(o,r)&&e===null&&!s&&(e=!1),e=UF(i,o,e,r),FF(i,o,e,t,s,r)}}function UF(n,e,t,r){let i=D1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=bg(null,n,e,t,r),t=mu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=bg(i,n,e,t,r),o===null){let u=$F(n,e,r);u!==void 0&&Array.isArray(u)&&(u=bg(null,n,e,u[1],r),u=mu(u,e.attrs,r),HF(n,e,r,u))}else o=qF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function $F(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Es(r)!==0)return n[io(r)]}function HF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[io(i)]=r}function qF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=mu(r,s,t)}return mu(r,e.attrs,t)}function bg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=mu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function mu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),bP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function zF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=OF(l)?mD(u,e,t,i,Es(l),s):void 0;if(!Cd(h)){Cd(o)||PF(l)&&(o=mD(u,null,t,i,a,s));let p=nC(ai(),t);kk(r,s,p,i,o)}}function mD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===Xn&&(g=p?mn:void 0);let y=p?gg(g,r):h===r?g:void 0;if(l&&!Cd(y)&&(y=gg(u,r)),Cd(y)&&(a=y,s))return a;let b=n[i+1];i=s?io(b):Es(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=gg(u,r))}return a}function Cd(n){return n!==void 0}function GF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(Eu(n)))),n}function WF(n,e){return(n.flags&(e?8:16))!==0}function KF(n,e,t,r,i,o){let s=e.consts,a=cd(s,i),u=Bd(e,n,2,r,a);return lb(e,t,u,cd(s,o)),u.attrs!==null&&nm(u,u.attrs,!1),u.mergedAttrs!==null&&nm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function F(n,e,t,r){let i=Me(),o=Ut(),s=ti+n,a=i[dt],u=o.firstCreatePass?KF(s,o,i,e,t,r):o.data[s],l=QF(o,i,u,a,e,n);i[s]=l;let h=Mm(u);return _u(u,!0),XC(a,l,u),!IF(u)&&Fm()&&Zm(o,i,l,u),d1()===0&&to(l,i),h1(),h&&(sb(o,i,u),ob(o,u,i)),r!==null&&ab(i,u),F}function O(){let n=xt();lC()?v1():(n=n.parent,_u(n,!1));let e=n;g1(e)&&m1(),f1();let t=Ut();return t.firstCreatePass&&(Lm(t,n),ZD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&x1(e)&&gD(t,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&R1(e)&&gD(t,e,Me(),e.stylesWithoutHost,!1),O}function kn(n,e,t,r){return F(n,e,t,r),O(),kn}var QF=(n,e,t,r,i,o)=>(Vm(!0),zC(r,i,T1()));function Qt(){return Me()}var bd="en-US";var YF=bd;function ZF(n){typeof n=="string"&&(YF=n.toLowerCase().replace(/_/g,"-"))}var JF=(n,e,t)=>{};function Oe(n,e,t,r){let i=Me(),o=Ut(),s=xt();return kb(o,i,i[dt],s,n,e,r),Oe}function XF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[sd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function kb(n,e,t,r,i,o,s){let a=Mm(r),l=n.firstCreatePass&&mb(n),h=e[Nn],p=gb(e),g=!0;if(r.type&3||s){let A=vn(r,e),M=s?s(A):A,B=p.length,G=s?J=>s(Zn(J[r.index])):r.index,j=null;if(!s&&a&&(j=XF(n,e,i,r.index)),j!==null){let J=j.__ngLastListenerFn__||j;J.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,g=!1}else{o=vD(r,e,h,o),JF(A,i,o);let J=t.listen(M,i,o);p.push(o,J),l&&l.push(i,G,B,B+1)}}else o=vD(r,e,h,o);let y=r.outputs,b;if(g&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let M=0;M<A;M+=2){let B=b[M],G=b[M+1],oe=e[B][G].subscribe(o),ee=p.length;p.push(o,oe),l&&l.push(i,r.index,ee,-(ee+1))}}}function yD(n,e,t,r){let i=De(null);try{return Gn(6,e,t),t(r)!==!1}catch(o){return yb(n,o),!1}finally{Gn(7,e,t),De(i)}}function vD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?si(n.index,e):e;ry(s,5);let a=yD(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=yD(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function qe(n=1){return b1(n)}function Ob(n,e,t,r){XO(n,e,t,r)}function Fb(n){let e=Me(),t=Ut(),r=fC();Nm(r+1);let i=sy(t,r);if(n.dirty&&a1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=rF(e,r);n.reset(o,X1),n.notifyOnChanges()}return!0}return!1}function Vb(){return ZO(Me(),fC())}function W(n,e=""){let t=Me(),r=Ut(),i=n+ti,o=r.firstCreatePass?Bd(r,i,1,e,null):r.data[i],s=eV(r,t,o,e,n);t[i]=s,Fm()&&Zm(r,t,s,o),_u(o,!1)}var eV=(n,e,t,r,i)=>(Vm(!0),yk(e[dt],r));function wn(n){return er("",n,""),wn}function er(n,e,t){let r=Me(),i=xF(r,n,e,t);return i!==Xn&&ty(r,ai(),i),er}function oo(n,e,t,r,i){let o=Me(),s=RF(o,n,e,t,r,i);return s!==Xn&&ty(o,ai(),s),oo}function cy(n,e,t,r,i,o,s){let a=Me(),u=NF(a,n,e,t,r,i,o,s);return u!==Xn&&ty(a,ai(),u),cy}function Ce(n,e,t){Mb(e)&&(e=e());let r=Me(),i=Od();if(ii(r,i,e)){let o=Ut(),s=Om();cb(o,s,r,n,e,r[dt],t,!1)}return Ce}function Ae(n,e){let t=Mb(n);return t&&n.set(e),t}function be(n,e){let t=Me(),r=Ut(),i=xt();return kb(r,t,t[dt],i,n,e),be}function tV(n,e,t){let r=Ut();if(r.firstCreatePass){let i=ni(n);gm(t,r.data,r.blueprint,i,!0),gm(e,r.data,r.blueprint,i,!1)}}function gm(n,e,t,r,i){if(n=jt(n),Array.isArray(n))for(let o=0;o<n.length;o++)gm(n[o],e,t,r,i);else{let o=Ut(),s=Me(),a=xt(),u=ps(n)?n:jt(n.provide),l=WD(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(ps(n)||!n.multi){let y=new Xi(l,i,ie),b=Sg(u,e,i?h:h+g,p);b===-1?(Ug(hd(a,s),o,u),Tg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Sg(u,e,h+g,p),b=Sg(u,e,h,h+g),A=y>=0&&t[y],M=b>=0&&t[b];if(i&&!M||!i&&!A){Ug(hd(a,s),o,u);let B=iV(i?rV:nV,t.length,i,r,l);!i&&M&&(t[b].providerFactory=B),Tg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=Lb(t[i?b:y],l,!i&&r);Tg(o,n,y>-1?y:b,B)}!i&&r&&M&&t[b].componentProviders++}}}function Tg(n,e,t,r){let i=ps(e),o=GP(e);if(i||o){let u=(o?jt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Lb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Sg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function nV(n,e,t,r){return mm(this.multi,[])}function rV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=eo(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),mm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],mm(i,o);return o}function mm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function iV(n,e,t,r,i){let o=new Xi(n,t,ie);return o.multi=[],o.index=e,o.componentProviders=0,Lb(o,i,r&&!t),o}function Gd(n,e=[]){return t=>{t.providersResolver=(r,i)=>tV(r,i?i(n):n,e)}}var oV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qD(!1,t.type),i=r.length>0?$d([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(L(an))})}}return n})();function jb(n){Iu("NgStandalone"),n.getStandaloneInjector=e=>e.get(oV).getOrCreateStandaloneInjector(n)}var Kl=null;function sV(n){Kl!==null&&(n.defaultEncapsulation!==Kl.defaultEncapsulation||n.preserveWhitespaces!==Kl.preserveWhitespaces)||(Kl=n)}var Cr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Bb=new Cr("18.2.13");var Wd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ly=new K(""),Cu=new K(""),Kd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,dy||(aV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(we),L(Qd),L(Cu))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Qd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return dy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function aV(n){dy=n}var dy;function so(n){return!!n&&typeof n.then=="function"}function Ub(n){return!!n&&typeof n.subscribe=="function"}var Yd=new K(""),$b=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$(Yd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(so(o))t.push(o);else if(Ub(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hy=new K("");function uV(){d0(()=>{throw new X(600,!1)})}function cV(n){return n.isBoundToModule}var lV=10;function dV(n,e,t){try{let r=t();return so(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function Hb(n,e){return Array.isArray(e)?e.reduce(Hb,n):P(P({},n),e)}var di=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(Z1),this.afterRenderManager=$(Nb),this.zonelessEnabled=$(oy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=$(bs).hasPendingTasks.pipe(Y(t=>!t)),this._injector=$(an)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof _d;if(!this._injector.get($b).done){let g=!i&&BD(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(vs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=cV(s)?void 0:this._injector.get(ri),u=r||s.selector,l=s.create(un.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(ly,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ed(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(_s,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<lV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)hV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Pd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ed(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(hy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ed(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ed(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hV(n,e,t,r){if(!t&&!Pd(n))return;wb(n,e,t&&!r?0:1)}var ym=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zd=(()=>{class n{compileModuleSync(t){return new Dd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=UD(t),o=qC(i.declarations).reduce((s,a)=>{let u=ei(a);return u&&s.push(new ws(u)),s},[]);return new ym(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fV=new K("");function pV(n,e,t){let r=new Dd(t);return Promise.resolve(r)}function _D(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var gV=(()=>{class n{constructor(){this.zone=$(we),this.changeDetectionScheduler=$(ys),this.applicationRef=$(di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new we(ge(P({},qb()),{scheduleInRootZone:t})),[{provide:we,useFactory:n},{provide:fs,multi:!0,useFactory:()=>{let r=$(gV,{optional:!0});return()=>r.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let r=$(yV);return()=>{r.initialize()}}},e===!0?{provide:Cb,useValue:!0}:[],{provide:bb,useValue:t??RC}]}function qb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yV=(()=>{class n{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=$(we),this.pendingTasks=$(bs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vV=(()=>{class n{constructor(){this.appRef=$(di),this.taskService=$(bs),this.ngZone=$(we),this.zonelessEnabled=$(oy),this.disableScheduling=$(Cb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(bb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?eD:NC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _V(){return typeof $localize<"u"&&$localize.locale||bd}var fy=new K("",{providedIn:"root",factory:()=>$(fy,pe.Optional|pe.SkipSelf)||_V()});var Td=new K("");function Ql(n){return!n.moduleRef}function wV(n){let e=Ql(n)?n.r3Injector:n.moduleRef.injector,t=e.get(we);return t.run(()=>{Ql(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ir,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Ql(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Td);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Td);s.add(o),n.moduleRef.onDestroy(()=>{ed(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return dV(r,t,()=>{let o=e.get($b);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(fy,bd);if(ZF(s||bd),Ql(n)){let a=e.get(di);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return EV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function EV(n,e){let t=n.injector.get(di);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var zb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>Y1(r?.ngZone,ge(P({},qb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[mV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ys,useExisting:vV}],u=vF(t.moduleType,this.injector,a);return wV({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=Hb({},r);return pV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Td,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(un))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),lu=null,Gb=new K("");function IV(n){if(lu&&!lu.get(Gb,!1))throw new X(400,!1);uV(),lu=n;let e=n.get(zb);return bV(n),e}function py(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(o=[])=>{let s=Wb();if(!s||s.injector.get(Gb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):IV(DV(a,r))}return CV(i)}}function DV(n=[],e){return un.create({name:e,providers:[{provide:xd,useValue:"platform"},{provide:Td,useValue:new Set([()=>lu=null])},...n]})}function CV(n){let e=Wb();if(!e)throw new X(401,!1);return e}function Wb(){return lu?.get(zb)??null}function bV(n){n.get(qm,null)?.forEach(t=>t())}function gy(){return!1}var hi=(()=>{class n{static{this.__NG_ELEMENT_ID__=TV}}return n})();function TV(n){return SV(xt(),Me(),(n&16)===16)}function SV(n,e,t){if(Nd(n)&&!t){let r=si(n.index,e);return new no(r,r)}else if(n.type&175){let r=e[Yn];return new no(r,e)}return null}var vm=class{constructor(){}supports(e){return xb(e)}create(e){return new _m(e)}},AV=(n,e)=>e,_m=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||AV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<wD(r,i,o)?t:r,a=wD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,b=y+g;h<=b&&b<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xb(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_F(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new wm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Em=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Em,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function ED(){return new my([new vm])}var my=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:ED})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ED()),deps:[[n,new Cm,new Ds]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var Kb=py(null,"core",[]),Qb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(di))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();function ao(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function bu(n,e){Iu("NgSignals");let t=u0(n);return e?.equal&&(t[mr].equal=e.equal),t}function Sr(n){let e=De(null);try{return n()}finally{De(e)}}function Yb(n){let e=ei(n);if(!e)return null;let t=new ws(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var tT=null;function tr(){return tT}function nT(n){tT??=n}var Jd=class{};var Yt=new K(""),Ey=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(MV),providedIn:"platform"})}}return n})(),rT=new K(""),MV=(()=>{class n extends Ey{constructor(){super(),this._doc=$(Yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Iy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Zb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ar(n){return n&&n[0]!=="?"?"?"+n:n}var Mr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(Dy),providedIn:"root"})}}return n})(),iT=new K(""),Dy=(()=>{class n extends Mr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Iy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ar(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ey),L(iT,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oT=(()=>{class n extends Mr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Iy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Ey),L(iT,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ss=(()=>{class n{constructor(t){this._subject=new Ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=NV(Zb(Jb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ar(r))}normalize(t){return n.stripTrailingSlash(RV(this._basePath,Jb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ar(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ar(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ar}static{this.joinWithSlash=Iy}static{this.stripTrailingSlash=Zb}static{this.\u0275fac=function(r){return new(r||n)(L(Mr))}}static{this.\u0275prov=z({token:n,factory:()=>xV(),providedIn:"root"})}}return n})();function xV(){return new Ss(L(Mr))}function RV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Jb(n){return n.replace(/\/index.html$/,"")}function NV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function sT(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},En=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new yy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Xb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Xb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(ci),ie(ro),ie(my))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Xb(n,e){n.context.$implicit=e.item}var aT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(ci),ie(ro))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),vy=class{constructor(){this.$implicit=null,this.ngIf=null}};function eT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}var uT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})(),Cy="browser",PV="server";function kV(n){return n===Cy}function uo(n){return n===PV}var cT=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>kV($(Kt))?new _y($(Yt),window):new wy})}}return n})(),_y=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=OV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function OV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var wy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xd=class{};var Sy=class extends Jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ay=class n extends Sy{static makeCurrent(){nT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=VV();return t==null?null:LV(t)}resetBaseElement(){Tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sT(document.cookie,e)}},Tu=null;function VV(){return Tu=Tu||document.querySelector("base"),Tu?Tu.getAttribute("href"):null}function LV(n){return new URL(n,document.baseURI).pathname}var My=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?tr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},jV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),xy=new K(""),fT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(xy),L(we))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),eh=class{constructor(e){this._doc=e}},by="ng-app-id",pT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uo(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${by}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(by),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(by,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Yt),L(Fd),L(zm,8),L(Kt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ny=/%COMP%/g,gT="%COMP%",BV=`_nghost-${gT}`,UV=`_ngcontent-${gT}`,$V=!0,HV=new K("",{providedIn:"root",factory:()=>$V});function qV(n){return UV.replace(Ny,n)}function zV(n){return BV.replace(Ny,n)}function mT(n,e){return e.map(t=>t.replace(Ny,n))}var lT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=uo(a),this.defaultRenderer=new Su(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Kn.ShadowDom&&(r=ge(P({},r),{encapsulation:Kn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof Au&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Kn.Emulated:o=new th(u,l,r,this.appId,h,s,a,p);break;case Kn.ShadowDom:return new Ry(u,l,t,r,s,a,this.nonce,p);default:o=new Au(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(fT),L(pT),L(Fd),L(HV),L(Yt),L(Kt),L(we),L(zm))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Su=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ty[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(dT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(dT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ty[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ty[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Dr.DashCase|Dr.Important)?e.style.setProperty(t,r,i&Dr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Dr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=tr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function dT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ry=class extends Su{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=mT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Au=class extends Su{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?mT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},th=class extends Au{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=qV(l),this.hostAttr=zV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},GV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),hT=["alt","control","meta","shift"],WV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),hT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=WV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hT.forEach(s=>{if(s!==i){let a=KV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function YV(){Ay.makeCurrent()}function ZV(){return new Ir}function JV(){return jC(document),document}var XV=[{provide:Kt,useValue:Cy},{provide:qm,useValue:YV,multi:!0},{provide:Yt,useFactory:JV,deps:[]}],yT=py(Kb,"browser",XV),eL=new K(""),tL=[{provide:Cu,useClass:My,deps:[]},{provide:ly,useClass:Kd,deps:[we,Qd,Cu]},{provide:Kd,useClass:Kd,deps:[we,Qd,Cu]}],nL=[{provide:xd,useValue:"root"},{provide:Ir,useFactory:ZV,deps:[]},{provide:xy,useClass:GV,multi:!0,deps:[Yt,we,Kt]},{provide:xy,useClass:QV,multi:!0,deps:[Yt]},lT,pT,fT,{provide:_s,useExisting:lT},{provide:Xd,useClass:jV,deps:[]},[]],vT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Fd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(eL,12))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({providers:[...nL,...tL],imports:[uT,Qb]})}}return n})();var _T=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var le="primary",$u=Symbol("RouteTitle"),Vy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new Vy(n)}function rL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function iL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nr(n[t],e[t]))return!1;return!0}function nr(n,e){let t=n?Ly(n):void 0,r=e?Ly(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!RT(n[i],e[i]))return!1;return!0}function Ly(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function NT(n){return n.length>0?n[n.length-1]:null}function gi(n){return ag(n)?n:so(n)?_e(Promise.resolve(n)):ne(n)}var oL={exact:kT,subset:OT},PT={exact:sL,subset:aL,ignored:()=>!0};function ET(n,e,t){return oL[t.paths](n.root,e.root,t.matrixParams)&&PT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sL(n,e){return nr(n,e)}function kT(n,e,t){if(!lo(n.segments,e.segments)||!ih(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kT(n.children[r],e.children[r],t))return!1;return!0}function aL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>RT(n[t],e[t]))}function OT(n,e,t){return FT(n,e,e.segments,t)}function FT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!lo(i,t)||e.hasChildren()||!ih(i,t,r))}else if(n.segments.length===t.length){if(!lo(n.segments,t)||!ih(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!lo(n.segments,i)||!ih(n.segments,i,r)||!n.children[le]?!1:FT(n.children[le],e,o,r)}}function ih(n,e,t){return e.every((r,i)=>PT[t](n[i].parameters,r.parameters))}var Rr=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return lL.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oh(this)}},co=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return LT(this)}};function uL(n,e){return lo(n,e)&&n.every((t,r)=>nr(t.parameters,e[r].parameters))}function lo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function cL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var Hu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new ks,providedIn:"root"})}}return n})(),ks=class{parse(e){let t=new By(e);return new Rr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Mu(e.root,!0)}`,r=fL(e.queryParams),i=typeof e.fragment=="string"?`#${dL(e.fragment)}`:"";return`${t}${r}${i}`}},lL=new ks;function oh(n){return n.segments.map(e=>LT(e)).join("/")}function Mu(n,e){if(!n.hasChildren())return oh(n);if(e){let t=n.children[le]?Mu(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Mu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=cL(n,(r,i)=>i===le?[Mu(n.children[le],!1)]:[`${i}:${Mu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${oh(n)}/${t[0]}`:`${oh(n)}/(${t.join("//")})`}}function VT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nh(n){return VT(n).replace(/%3B/gi,";")}function dL(n){return encodeURI(n)}function jy(n){return VT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(n){return decodeURIComponent(n)}function IT(n){return sh(n.replace(/\+/g,"%20"))}function LT(n){return`${jy(n.path)}${hL(n.parameters)}`}function hL(n){return Object.entries(n).map(([e,t])=>`;${jy(e)}=${jy(t)}`).join("")}function fL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nh(t)}=${nh(i)}`).join("&"):`${nh(t)}=${nh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var pL=/^[^\/()?;#]+/;function Py(n){let e=n.match(pL);return e?e[0]:""}var gL=/^[^\/()?;=#]+/;function mL(n){let e=n.match(gL);return e?e[0]:""}var yL=/^[^=?&#]+/;function vL(n){let e=n.match(yL);return e?e[0]:""}var _L=/^[^&#]+/;function wL(n){let e=n.match(_L);return e?e[0]:""}var By=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new xe(e,t)),r}parseSegment(){let e=Py(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new co(sh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=mL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Py(this.remaining);i&&(r=i,this.capture(r))}e[sh(t)]=sh(r)}parseQueryParam(e){let t=vL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=wL(this.remaining);s&&(r=s,this.capture(r))}let i=IT(t),o=IT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Py(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function jT(n){return n.segments.length>0?new xe([],{[le]:n}):n}function BT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=BT(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return EL(t)}function EL(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new xe(n.segments.concat(e.segments),e.children)}return n}function ho(n){return n instanceof Rr}function IL(n,e,t=null,r=null){let i=UT(n);return $T(i,e,t,r)}function UT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=jT(r);return e??i}function $T(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ky(i,i,i,t,r);let o=DL(e);if(o.toRoot())return ky(i,i,new xe([],{}),t,r);let s=CL(o,i,n),a=s.processChildren?Nu(s.segmentGroup,s.index,o.commands):qT(s.segmentGroup,s.index,o.commands);return ky(i,s.segmentGroup,a,t,r)}function ah(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ou(n){return typeof n=="object"&&n!=null&&n.outlets}function ky(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=HT(n,e,t);let a=jT(BT(s));return new Rr(a,o,i)}function HT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=HT(o,e,t)}),new xe(n.segments,r)}var uh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ah(r[0]))throw new X(4003,!1);let i=r.find(Ou);if(i&&i!==NT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new uh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new uh(t,e,r)}var xs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function CL(n,e,t){if(n.isAbsolute)return new xs(e,!0,0);if(!t)return new xs(e,!1,NaN);if(t.parent===null)return new xs(t,!0,0);let r=ah(n.commands[0])?0:1,i=t.segments.length-1+r;return bL(t,i,n.numberOfDoubleDots)}function bL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function TL(n){return Ou(n[0])?n[0].outlets:{[le]:n}}function qT(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return Nu(n,e,t);let r=SL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new xe(n.segments.slice(r.pathIndex),n.children),Nu(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?Uy(n,e,t):r.match?Nu(n,0,i):Uy(n,e,t)}function Nu(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=TL(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Nu(n.children[le],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function SL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ou(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!CT(u,l,s))return o;r+=2}else{if(!CT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ou(o)){let u=AL(o.outlets);return new xe(r,u)}if(i===0&&ah(t[0])){let u=n.segments[e];r.push(new co(u.path,DT(t[0]))),i++;continue}let s=Ou(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ah(a)?(r.push(new co(s,DT(a))),i+=2):(r.push(new co(s,{})),i++)}return new xe(r,{})}function AL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Uy(new xe([],{}),0,r))}),e}function DT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CT(n,e,t){return n==t.path&&nr(e,t.parameters)}var Pu="imperative",yt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(yt||{}),In=class{constructor(e,t){this.id=e,this.url=t}},Os=class extends In{constructor(e,t,r="imperative",i=null){super(e,t),this.type=yt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fn=class extends In{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=yt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ln=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ln||{}),ch=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ch||{}),xr=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=yt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pi=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=yt.NavigationSkipped}},Fu=class extends In{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=yt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lh=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class extends In{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=yt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qy=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=yt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class{constructor(e){this.route=e,this.type=yt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wy=class{constructor(e){this.route=e,this.type=yt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ky=class{constructor(e){this.snapshot=e,this.type=yt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qy=class{constructor(e){this.snapshot=e,this.type=yt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yy=class{constructor(e){this.snapshot=e,this.type=yt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zy=class{constructor(e){this.snapshot=e,this.type=yt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=yt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Vu=class{},Fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ML(n,e){return n.providers&&!n._injector&&(n._injector=$d(n.providers,e,`Route: ${n.path}`)),n._injector??e}function On(n){return n.outlet||le}function xL(n,e){let t=n.filter(r=>On(r)===e);return t.push(...n.filter(r=>On(r)!==e)),t}function qu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Jy=class{get injector(){return qu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zu(this.rootInjector),this.attachRef=null}},zu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Jy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(an))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ev(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ev(e,this._root).map(t=>t.value)}};function Xy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Xy(n,t);if(r)return r}return null}function ev(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ev(n,t);if(r.length)return r.unshift(e),r}return[]}var cn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ms(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fh=class extends hh{constructor(e,t){super(e),this.snapshot=t,cv(this,e)}toString(){return this.snapshot.toString()}};function zT(n){let e=RL(n),t=new _t([new co("",{})]),r=new _t({}),i=new _t({}),o=new _t({}),s=new _t(""),a=new fo(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new fh(new cn(a,[]),e)}function RL(n){let e={},t={},r={},i="",o=new Rs([],e,r,i,t,le,n,null,{});return new gh("",new cn(o,[]))}var fo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Y(l=>l[$u]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ph(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&WT(i)&&(r.resolve[$u]=i.title),r}var Rs=class{get title(){return this.data?.[$u]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gh=class extends hh{constructor(e,t){super(t),this.url=e,cv(this,t)}toString(){return GT(this._root)}};function cv(n,e){e.value._routerState=n,e.children.forEach(t=>cv(n,t))}function GT(n){let e=n.children.length>0?` { ${n.children.map(GT).join(", ")} } `:"";return`${n.value}${e}`}function Oy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),nr(e.params,t.params)||n.paramsSubject.next(t.params),iL(e.url,t.url)||n.urlSubject.next(t.url),nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tv(n,e){let t=nr(n.params,e.params)&&uL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||tv(n.parent,e.parent))}function WT(n){return typeof n.title=="string"||n.title===null}var lv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ye,this.deactivateEvents=new Ye,this.attachEvents=new Ye,this.detachEvents=new Ye,this.parentContexts=$(zu),this.location=$(ci),this.changeDetector=$(hi),this.inputBinder=$(Eh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new nv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[oi]})}}return n})(),nv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fo?this.route:e===zu?this.childContexts:this.parent.get(e,t)}},Eh=new K(""),bT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ou([r.queryParams,r.params,r.data]).pipe(Qe(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?ne(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Yb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function NL(n,e,t){let r=Lu(n,e._root,t?t._root:void 0);return new fh(r,e)}function Lu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=PL(n,e,t);return new cn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Lu(n,a)),s}}let r=kL(e.value),i=e.children.map(o=>Lu(n,o));return new cn(r,i)}}function PL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lu(n,r,i);return Lu(n,r)})}function kL(n){return new fo(new _t(n.url),new _t(n.params),new _t(n.queryParams),new _t(n.fragment),new _t(n.data),n.outlet,n.component,n)}var ju=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},KT="ngNavigationCancelingError";function mh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QT(!1,ln.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[KT]=!0,t.cancellationCode=e,t}function OL(n){return YT(n)&&ho(n.url)}function YT(n){return!!n&&n[KT]}var FL=(n,e,t,r)=>Y(i=>(new rv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),rv=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Oy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Zy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Qy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Oy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Oy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},yh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,t){this.component=e,this.route=t}};function VL(n,e,t){let r=n._root,i=e?e._root:null;return xu(r,i,t,[r.value])}function LL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ls(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!bD(n)?n:e.get(n):r}function xu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ms(e);return n.children.forEach(s=>{jL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ku(a,t.getContext(s),i)),i}function jL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=BL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xu(n,e,a?a.children:null,r,i):xu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&ku(e,a,i),i.canActivateChecks.push(new yh(r)),o.component?xu(n,null,a?a.children:null,r,i):xu(n,null,t,r,i);return i}function BL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lo(n.url,e.url)||!nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tv(n,e)||!nr(n.queryParams,e.queryParams);case"paramsChange":default:return!tv(n,e)}}function ku(n,e,t){let r=Ms(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ku(s,e.children.getContext(o),t):ku(s,null,t):ku(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Gu(n){return typeof n=="function"}function UL(n){return typeof n=="boolean"}function $L(n){return n&&Gu(n.canLoad)}function HL(n){return n&&Gu(n.canActivate)}function qL(n){return n&&Gu(n.canActivateChild)}function zL(n){return n&&Gu(n.canDeactivate)}function GL(n){return n&&Gu(n.canMatch)}function ZT(n){return n instanceof vr||n?.name==="EmptyError"}var rh=Symbol("INITIAL_VALUE");function Vs(){return Qe(n=>ou(n.map(e=>e.pipe(_r(1),Wi(rh)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===rh)return rh;if(t===!1||WL(t))return t}return!0}),wt(e=>e!==rh),_r(1)))}function WL(n){return ho(n)||n instanceof ju}function KL(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(ge(P({},t),{guardsResult:!0})):QL(s,r,i,n).pipe(it(a=>a&&UL(a)?YL(r,o,n,e):ne(a)),Y(a=>ge(P({},t),{guardsResult:a})))})}function QL(n,e,t,r){return _e(n).pipe(it(i=>t2(i.component,i.route,t,e,r)),pn(i=>i!==!0,!0))}function YL(n,e,t,r){return _e(e).pipe(zi(i=>rs(JL(i.route.parent,r),ZL(i.route,r),e2(n,i.path,t),XL(n,i.route,t))),pn(i=>i!==!0,!0))}function ZL(n,e){return n!==null&&e&&e(new Yy(n)),ne(!0)}function JL(n,e){return n!==null&&e&&e(new Ky(n)),ne(!0)}function XL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>Bl(()=>{let s=qu(e)??t,a=Ls(o,s),u=HL(a)?a.canActivate(e,n):Jn(s,()=>a(e,n));return gi(u).pipe(pn())}));return ne(i).pipe(Vs())}function e2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>LL(s)).filter(s=>s!==null).map(s=>Bl(()=>{let a=s.guards.map(u=>{let l=qu(s.node)??t,h=Ls(u,l),p=qL(h)?h.canActivateChild(r,n):Jn(l,()=>h(r,n));return gi(p).pipe(pn())});return ne(a).pipe(Vs())}));return ne(o).pipe(Vs())}function t2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let u=qu(e)??i,l=Ls(a,u),h=zL(l)?l.canDeactivate(n,e,t,r):Jn(u,()=>l(n,e,t,r));return gi(h).pipe(pn())});return ne(s).pipe(Vs())}function n2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=Ls(s,n),u=$L(a)?a.canLoad(e,t):Jn(n,()=>a(e,t));return gi(u)});return ne(o).pipe(Vs(),JT(r))}function JT(n){return tg(lt(e=>{if(typeof e!="boolean")throw mh(n,e)}),Y(e=>e===!0))}function r2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=Ls(s,n),u=GL(a)?a.canMatch(e,t):Jn(n,()=>a(e,t));return gi(u)});return ne(o).pipe(Vs(),JT(r))}var Bu=class{constructor(e){this.segmentGroup=e||null}},Uu=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return ns(new Bu(n))}function i2(n){return ns(new X(4e3,!1))}function o2(n){return ns(QT(!1,ln.GuardRejected))}var iv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[le])return i2(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:b,title:A}=i,M=Jn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:A}));if(M instanceof Rr)throw new Uu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Uu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Rr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ov={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function s2(n,e,t,r,i){let o=XT(n,e,t);return o.matched?(r=ML(e,r),r2(r,e,t,i).pipe(Y(s=>s===!0?o:P({},ov)))):ne(o)}function XT(n,e,t){if(e.path==="**")return a2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},ov):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rL)(t,n,e);if(!i)return P({},ov);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function a2(n){return{matched:!0,parameters:n.length>0?NT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TT(n,e,t,r){return t.length>0&&l2(n,t,r)?{segmentGroup:new xe(e,c2(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&d2(n,t,r)?{segmentGroup:new xe(n.segments,u2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function u2(n,e,t,r){let i={};for(let o of t)if(Ih(n,e,o)&&!r[On(o)]){let s=new xe([],{});i[On(o)]=s}return P(P({},r),i)}function c2(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&On(r)!==le){let i=new xe([],{});t[On(r)]=i}return t}function l2(n,e,t){return t.some(r=>Ih(n,e,r)&&On(r)!==le)}function d2(n,e,t){return t.some(r=>Ih(n,e,r))}function Ih(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function h2(n,e,t){return e.length===0&&!n.children[t]}var sv=class{};function f2(n,e,t,r,i,o,s="emptyOnly"){return new av(n,e,t,r,i,s,o).recognize()}var p2=31,av=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new iv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=TT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new cn(r,t),o=new gh("",i),s=IL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Rs([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Kr(r=>{if(r instanceof Uu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof cn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _e(o).pipe(zi(s=>{let a=r.children[s],u=xL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Gi((s,a)=>(s.push(...a),s)),Qr(null),hg(),it(s=>{if(s===null)return As(r);let a=eS(s);return g2(a),ne(a)}))}processSegment(e,t,r,i,o,s,a){return _e(t).pipe(zi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Kr(l=>{if(l instanceof Bu)return ne(null);throw l}))),pn(u=>!!u),Kr(u=>{if(ZT(u))return h2(r,i,o)?ne(new sv):As(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return On(r)!==s&&(s===le||!Ih(i,o,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=XT(t,i,o);if(!u)return As(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p2&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ST(i),On(i),i.component??i._loadedComponent??null,i,AT(i)),b=ph(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(it(M=>this.processSegment(e,r,t,M.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=s2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,b=new Rs(g,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ST(r),On(r),r.component??r._loadedComponent??null,r,AT(r)),A=ph(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:B}=TT(t,g,y,l);if(B.length===0&&M.hasChildren())return this.processChildren(h,l,M,b).pipe(Y(j=>new cn(b,j)));if(l.length===0&&B.length===0)return ne(new cn(b,[]));let G=On(r)===o;return this.processSegment(h,l,M,B,G?le:o,!0,b).pipe(Y(j=>new cn(b,j instanceof cn?[j]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):n2(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(lt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):o2(t))):ne({routes:[],injector:e})}};function g2(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function m2(n){let e=n.value.routeConfig;return e&&e.path===""}function eS(n){let e=[],t=new Set;for(let r of n){if(!m2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=eS(r.children);e.push(new cn(r.value,i))}return e.filter(r=>!t.has(r))}function ST(n){return n.data||{}}function AT(n){return n.resolve||{}}function y2(n,e,t,r,i,o){return it(s=>f2(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:u})=>ge(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function v2(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of tS(u))s.add(l);let a=0;return _e(s).pipe(zi(u=>o.has(u)?_2(u,r,n,e):(u.data=ph(u,u.parent,n).resolve,ne(void 0))),lt(()=>a++),is(1),it(u=>a===s.size?ne(t):Lt))})}function tS(n){let e=n.children.map(t=>tS(t)).flat();return[n,...e]}function _2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!WT(i)&&(o[$u]=i.title),w2(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=ph(n,n.parent,t).resolve,null)))}function w2(n,e,t,r){let i=Ly(n);if(i.length===0)return ne({});let o={};return _e(i).pipe(it(s=>E2(n[s],e,t,r).pipe(pn(),lt(a=>{if(a instanceof ju)throw mh(new ks,a);o[s]=a}))),is(1),lg(o),Kr(s=>ZT(s)?Lt:ns(s)))}function E2(n,e,t,r){let i=qu(e)??r,o=Ls(n,i),s=o.resolve?o.resolve(e,t):Jn(i,()=>o(e,t));return gi(s)}function Fy(n){return Qe(e=>{let t=n(e);return t?_e(t).pipe(Y(()=>e)):ne(e)})}var nS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[$u]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(I2),providedIn:"root"})}}return n})(),I2=(()=>{class n extends nS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(_T))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wu=new K("",{providedIn:"root",factory:()=>({})}),D2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=gt({type:n,selectors:[["ng-component"]],standalone:!0,features:[jb],decls:1,vars:0,template:function(r,i){r&1&&kn(0,"router-outlet")},dependencies:[lv],encapsulation:2})}}return n})();function dv(n){let e=n.children&&n.children.map(dv),t=e?ge(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=D2),t}var vh=new K(""),hv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(Zd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=gi(t.loadComponent()).pipe(Y(rS),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),su(()=>{this.componentLoaders.delete(t)})),i=new Jo(r,()=>new Ue).pipe(Zo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=C2(r,this.compiler,t,this.onLoadEndListener).pipe(su(()=>{this.childrenLoaders.delete(r)})),s=new Jo(o,()=>new Ue).pipe(Zo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C2(n,e,t,r){return gi(n.loadChildren()).pipe(Y(rS),it(i=>i instanceof gu||Array.isArray(i)?ne(i):_e(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(vh,[],{optional:!0,self:!0}).flat()),{routes:s.map(dv),injector:o}}))}function b2(n){return n&&typeof n=="object"&&"default"in n}function rS(n){return b2(n)?n.default:n}var fv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(T2),providedIn:"root"})}}return n})(),T2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iS=new K(""),oS=new K("");function S2(n,e,t){let r=n.get(oS),i=n.get(Yt);return n.get(we).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),A2(n))),{onViewTransitionCreated:u}=r;return u&&Jn(n,()=>u({transition:a,from:e,to:t})),s})}function A2(n){return new Promise(e=>{uy({read:()=>setTimeout(e)},{injector:n})})}var M2=new K(""),pv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=$(hv),this.environmentInjector=$(an),this.urlSerializer=$(Hu),this.rootContexts=$(zu),this.location=$(Ss),this.inputBindingEnabled=$(Eh,{optional:!0})!==null,this.titleStrategy=$(nS),this.options=$(Wu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(fv),this.createViewTransition=$(iS,{optional:!0}),this.navigationErrorHandler=$(M2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Gy(i)),r=i=>this.events.next(new Wy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ge(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new _t({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(o=>o.id!==0),Y(o=>ge(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qe(o=>{let s=!1,a=!1;return ne(o).pipe(Qe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ln.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ge(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new pi(u.id,this.urlSerializer.serialize(u.rawUrl),p,ch.IgnoredSameUrlNavigation)),u.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ne(u).pipe(Qe(p=>{let g=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?Lt:Promise.resolve(p)}),y2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ge(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new lh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:g,source:y,restoredState:b,extras:A}=u,M=new Os(p,this.urlSerializer.serialize(g),y,b);this.events.next(M);let B=zT(this.rootComponentType).snapshot;return this.currentTransition=o=ge(P({},u),{targetSnapshot:B,urlAfterRedirects:g,extras:ge(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ne(o)}else{let p="";return this.events.next(new pi(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ch.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Lt}}),lt(u=>{let l=new $y(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Y(u=>(this.currentTransition=o=ge(P({},u),{guards:VL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),KL(this.environmentInjector,u=>this.events.next(u)),lt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw mh(this.urlSerializer,u.guardsResult);let l=new Hy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),wt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ln.GuardRejected),!1)),Fy(u=>{if(u.guards.canActivateChecks.length)return ne(u).pipe(lt(l=>{let h=new qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Qe(l=>{let h=!1;return ne(l).pipe(v2(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",ln.NoDataFromResolver)}}))}),lt(l=>{let h=new zy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Fy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(lt(g=>{h.component=g}),Y(()=>{})));for(let g of h.children)p.push(...l(g));return p};return ou(l(u.targetSnapshot.root)).pipe(Qr(null),_r(1))}),Fy(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?_e(h).pipe(Y(()=>o)):ne(o)}),Y(u=>{let l=NL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ge(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),lt(()=>{this.events.next(new Vu)}),FL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),_r(1),lt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),pg(this.transitionAbortSubject.pipe(lt(u=>{throw u}))),su(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ln.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kr(u=>{if(a=!0,YT(u))this.events.next(new xr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),OL(u)?this.events.next(new Fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Fu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Jn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof ju){let{message:p,cancellationCode:g}=mh(this.urlSerializer,h);this.events.next(new xr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,g)),this.events.next(new Fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let o=new xr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function x2(n){return n!==Pu}var R2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(N2),providedIn:"root"})}}return n})(),uv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},N2=(()=>{class n extends uv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>$(P2),providedIn:"root"})}}return n})(),P2=(()=>{class n extends sS{constructor(){super(...arguments),this.location=$(Ss),this.urlSerializer=$(Hu),this.options=$(Wu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(fv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Os)this.stateMemento=this.createStateMemento();else if(t instanceof pi)this.rawUrlTree=r.initialUrl;else if(t instanceof lh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Vu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof xr&&(t.code===ln.GuardRejected||t.code===ln.NoDataFromResolver)?this.restoreHistory(r):t instanceof Fu?this.restoreHistory(r,!0):t instanceof Fn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Rr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ru=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ru||{});function aS(n,e){n.events.pipe(wt(t=>t instanceof Fn||t instanceof xr||t instanceof Fu||t instanceof pi),Y(t=>t instanceof Fn||t instanceof pi?Ru.COMPLETE:(t instanceof xr?t.code===ln.Redirect||t.code===ln.SupersededByNewNavigation:!1)?Ru.REDIRECTING:Ru.FAILED),wt(t=>t!==Ru.REDIRECTING),_r(1)).subscribe(()=>{e()})}function k2(n){throw n}var O2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},F2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(Wd),this.stateManager=$(sS),this.options=$(Wu,{optional:!0})||{},this.pendingTasks=$(bs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(pv),this.urlSerializer=$(Hu),this.location=$(Ss),this.urlHandlingStrategy=$(fv),this._events=new Ue,this.errorHandler=this.options.errorHandler||k2,this.navigated=!1,this.routeReuseStrategy=$(R2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(vh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Eh,{optional:!0}),this.eventsSubscription=new Ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xr&&r.code!==ln.Redirect&&r.code!==ln.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fn)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||x2(i.source)},s);this.scheduleNavigation(a,Pu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}L2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=UT(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return $T(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ho(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Pu,null,r)}navigate(t,r={skipLocationChange:!1}){return V2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},O2):r===!1?i=P({},F2):i=r,ho(t))return ET(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ET(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return aS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function L2(n){return!(n instanceof Vu)&&!(n instanceof Fs)}var _h=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ho(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:$C(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ho(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ie(Nr),ie(fo),Bm("tabindex"),ie(ui),ie(_n),ie(Mr))}}static{this.\u0275dir=Mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Oe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Hd("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ao],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ao],replaceUrl:[2,"replaceUrl","replaceUrl",ao],routerLink:"routerLink"},standalone:!0,features:[ay,oi]})}}return n})(),uS=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ye,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Fn&&this.update()})}ngAfterContentInit(){ne(this.links.changes,ne(null)).pipe(zn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=_e(t).pipe(zn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=j2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Nr),ie(_n),ie(ui),ie(hi),ie(_h,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Ob(o,_h,5),r&2){let s;Fb(s=Vb())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[oi]})}}return n})();function j2(n){return!!n.paths}var wh=class{};var B2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(wt(t=>t instanceof Fn),zi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=$d(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(zn())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ne(null);let o=i.pipe(it(s=>s===null?ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(zn())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(Nr),L(Zd),L(an),L(wh),L(hv))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cS=new K(""),U2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof pi&&t.code===ch.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){tb()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function $2(n){return n.routerState.root}function Ku(n,e){return{\u0275kind:n,\u0275providers:e}}function H2(){let n=$(un);return e=>{let t=n.get(di);if(e!==t.components[0])return;let r=n.get(Nr),i=n.get(lS);n.get(gv)===1&&r.initialNavigation(),n.get(dS,null,pe.Optional)?.setUpPreloading(),n.get(cS,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lS=new K("",{factory:()=>new Ue}),gv=new K("",{providedIn:"root",factory:()=>1});function q2(){return Ku(2,[{provide:gv,useValue:0},{provide:Yd,multi:!0,deps:[un],useFactory:e=>{let t=e.get(rT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Nr),o=e.get(lS);aS(i,()=>{r(!0)}),e.get(pv).afterPreactivation=()=>(r(!0),o.closed?ne(void 0):o),i.initialNavigation()}))}}])}function z2(){return Ku(3,[{provide:Yd,multi:!0,useFactory:()=>{let e=$(Nr);return()=>{e.setUpLocationChangeListener()}}},{provide:gv,useValue:2}])}var dS=new K("");function G2(n){return Ku(0,[{provide:dS,useExisting:B2},{provide:wh,useExisting:n}])}function W2(){return Ku(8,[bT,{provide:Eh,useExisting:bT}])}function K2(n){let e=[{provide:iS,useValue:S2},{provide:oS,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ku(9,e)}var MT=new K("ROUTER_FORROOT_GUARD"),Q2=[Ss,{provide:Hu,useClass:ks},Nr,zu,{provide:fo,useFactory:$2,deps:[Nr]},hv,[]],mv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Q2,[],{provide:vh,multi:!0,useValue:t},{provide:MT,useFactory:X2,deps:[[Nr,new Ds,new Cm]]},{provide:Wu,useValue:r||{}},r?.useHash?Z2():J2(),Y2(),r?.preloadingStrategy?G2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ej(r):[],r?.bindToComponentInputs?W2().\u0275providers:[],r?.enableViewTransitions?K2().\u0275providers:[],tj()]}}static forChild(t){return{ngModule:n,providers:[{provide:vh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(MT,8))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();function Y2(){return{provide:cS,useFactory:()=>{let n=$(cT),e=$(we),t=$(Wu),r=$(pv),i=$(Hu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new U2(i,r,n,e,t)}}}function Z2(){return{provide:Mr,useClass:oT}}function J2(){return{provide:Mr,useClass:Dy}}function X2(n){return"guarded"}function ej(n){return[n.initialNavigation==="disabled"?z2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?q2().\u0275providers:[]]}var xT=new K("");function tj(){return[{provide:xT,useFactory:H2},{provide:hy,multi:!0,useExisting:xT}]}var Dh=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var rj="firebase",ij="10.14.1";Wr(rj,ij,"app");var Qu=new Cr("ANGULARFIRE2_VERSION");var oj=(n,e)=>{let t=e?[e]:XI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},po=class{constructor(){return oj(sj)}},sj="app-check";function yv(){}var Ch=class{zone;delegate;constructor(e,t=og){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},vv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yv,{},yv,yv)),t.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ch(Zone.current)),this.insideAngular=t.run(()=>new Ch(Zone.current,iu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(we))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Zt(n){return uj(aj())(n)}function uj(n){return function(t){return t=t.lift(new vv(n.ngZone)),t.pipe(An(n.outsideAngular),fn(n.insideAngular))}}var dj=new Map,hj={activated:!1,tokenObservers:[]},fj={initialized:!1,enabled:!1};function Vn(n){return dj.get(n)||Object.assign({},hj)}function yS(){return fj}var pj="https://content-firebaseappcheck.googleapis.com/v1";var gj="exchangeDebugToken",fS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},f5=24*60*60*1e3;var wv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Bp,this.pending.promise.catch(t=>{}),yield mj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Bp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function mj(n){return new Promise(e=>{setTimeout(e,n)})}var yj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},mi=new ZI("appCheck","AppCheck",yj);function vS(n){if(!Vn(n).activated)throw mi.create("use-before-activation",{appName:n.name})}function _S(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw mi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw mi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw mi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function wS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${pj}/projects/${t}/apps/${r}:${gj}?key=${i}`,body:{debug_token:e}}}var vj="firebase-app-check-database",_j=1,Ev="firebase-app-check-store";var Th=null;function wj(){return Th||(Th=new Promise((n,e)=>{try{let t=indexedDB.open(vj,_j);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ev,{keyPath:"compositeKey"})}}}catch(t){e(mi.create("storage-open",{originalErrorMessage:t?.message}))}}),Th)}function Ej(n,e){return Ij(Dj(n),e)}function Ij(n,e){return N(this,null,function*(){let r=(yield wj()).transaction(Ev,"readwrite"),o=r.objectStore(Ev).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(mi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Dj(n){return`${n.options.appId}-${n.name}`}var Iv=new ll("@firebase/app-check");function _v(n,e){return cl()?Ej(n,e).catch(t=>{Iv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ES(){return yS().enabled}function IS(){return N(this,null,function*(){let n=yS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Cj={error:"UNKNOWN_ERROR"};function bj(n){return KI.encodeString(JSON.stringify(n),!1)}function Dv(n,e=!1){return N(this,null,function*(){let t=n.app;vS(t);let r=Vn(t),i=r.token,o;if(i&&!Yu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Yu(u)?i=u:yield _v(t,void 0))}if(!e&&i&&Yu(i))return{token:i.token};let s=!1;if(ES()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_S(wS(t,yield IS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield _v(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Vn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Iv.warn(u.message):Iv.error(u),o=u}let a;return i?o?Yu(i)?a={token:i.token,internalError:o}:a=gS(o):(a={token:i.token},r.token=i,yield _v(t,i)):a=gS(o),s&&Mj(t,a),a})}function Tj(n){return N(this,null,function*(){let e=n.app;vS(e);let{provider:t}=Vn(e);if(ES()){let r=yield IS(),{token:i}=yield _S(wS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Sj(n,e,t,r){let{app:i}=n,o=Vn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Yu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),pS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pS(n))}function DS(n,e){let t=Vn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pS(n){let{app:e}=n,t=Vn(e),r=t.tokenRefresher;r||(r=Aj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Aj(n){let{app:e}=n;return new wv(()=>N(this,null,function*(){let t=Vn(e),r;if(t.token?r=yield Dv(n,!0):r=yield Dv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fS.RETRIAL_MIN_WAIT,fS.RETRIAL_MAX_WAIT)}function Mj(n,e){let t=Vn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yu(n){return n.expireTimeMillis-Date.now()>0}function gS(n){return{token:bj(Cj),error:n}}var Cv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Vn(this.app);for(let t of e)DS(this.app,t.next);return Promise.resolve()}};function xj(n,e){return new Cv(n,e)}function Rj(n){return{getToken:e=>Dv(n,e),getLimitedUseToken:()=>Tj(n),addTokenListener:e=>Sj(n,"INTERNAL",e),removeTokenListener:e=>DS(n.app,e)}}var Nj="@firebase/app-check",Pj="0.8.8";var kj="app-check",mS="app-check-internal";function Oj(){Ja(new Ui(kj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return xj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mS).initialize()})),Ja(new Ui(mS,n=>{let e=n.getProvider("app-check").getImmediate();return Rj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Wr(Nj,Pj)}Oj();var Fj=["localhost","0.0.0.0","127.0.0.1"],b5=typeof window<"u"&&Fj.includes(window.location.hostname);var Vj="firebase",Lj="10.14.1";on.registerVersion(Vj,Lj,"app-compat");var jj=["ngOnDestroy"],TS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(jj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Sh=class{constructor(e){return e}},js=new K("angularfire2.app.options"),Bs=new K("angularfire2.app.name");function Zu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=on.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>on.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;Bj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Sh(s)}var Bj=(n,...e)=>{gy()&&typeof console<"u"&&console[n](...e)},Uj={provide:Sh,useFactory:Zu,deps:[js,we,[new Ds,Bs]]},SS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:js,useValue:t},{provide:Bs,useValue:r}]}}constructor(t){on.registerVersion("angularfire",Qu.full,"core"),on.registerVersion("angularfire",Qu.full,"app-compat"),on.registerVersion("angular",Bb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Kt))};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[Uj]})}return n})();function Ah(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return $j(i,s)||(bS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Hj?" You may need to reload as Firebase is not HMR aware.":""}`),bS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function $j(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Hj=typeof module<"u"&&!!module.hot,bS=(n,...e)=>{gy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bv=new K("angularfire2.auth.use-emulator"),Tv=new K("angularfire2.auth.settings"),Sv=new K("angularfire2.auth.tenant-id"),Av=new K("angularfire2.auth.langugage-code"),Mv=new K("angularfire2.auth.use-device-language"),xv=new K("angularfire.auth.persistence"),Rv=(n,e,t,r,i,o,s,a)=>Ah(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),AS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,g,y){let b=new Ue,A=ne(void 0).pipe(fn(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Y(()=>Zu(t,o,r)),Y(M=>Rv(M,o,a,l,h,p,u,g)),$l({bufferSize:1,refCount:!1}));if(uo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{A.pipe(pn()).subscribe();let M=A.pipe(Qe(j=>j.getRedirectResult().then(J=>J,()=>null)),Zt,$l({bufferSize:1,refCount:!1})),B=A.pipe(Qe(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))})))),G=A.pipe(Qe(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))}))));this.authState=M.pipe(Hl(B),An(s.outsideAngular),fn(s.insideAngular)),this.user=M.pipe(Hl(G),An(s.outsideAngular),fn(s.insideAngular)),this.idToken=this.user.pipe(Qe(j=>j?_e(j.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(Qe(j=>j?_e(j.getIdTokenResult()):ne(null))),this.credential=cg(M,b,this.authState.pipe(wt(j=>!j))).pipe(Y(j=>j?.user?j:null),An(s.outsideAngular),fn(s.insideAngular))}return TS(this,A,o,{spy:{apply:(M,B,G)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&G.then(j=>b.next(j))}}})}static \u0275fac=function(r){return new(r||n)(L(js),L(Bs,8),L(Kt),L(we),L(bh),L(bv,8),L(Tv,8),L(Sv,8),L(Av,8),L(Mv,8),L(xv,8),L(po,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xS={};var yi,Nv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)_[fr-2]=arguments[fr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=J(w,v).g;w=B(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=B(this,E),A(E)?-1:b(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(g)}n.abs=function(){return A(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(E,v){return E.add(M(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?M(this).j(M(E)):M(M(this).j(E));if(A(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,fr=E.i(D)>>>16,Na=E.i(D)&65535;w[2*I+2*D]+=_*Na,G(w,2*I+2*D),w[2*I+2*D+1]+=T*Na,G(w,2*I+2*D+1),w[2*I+2*D+1]+=_*fr,G(w,2*I+2*D+1),w[2*I+2*D+2]+=T*fr,G(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function G(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function j(E,v){this.g=E,this.h=v}function J(E,v){if(b(v))throw Error("division by zero");if(b(E))return new j(p,p);if(A(E))return v=J(M(E),v),new j(M(v.g),M(v.h));if(A(v))return v=J(E,M(v)),new j(M(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=v;0>=I.l(E);)w=oe(w),I=oe(I);var D=ee(w,1),T=ee(I,1);for(I=ee(I,2),w=ee(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=ee(I,1),w=ee(w,1)}return v=B(E,D.j(v)),new j(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=g),D=D.add(T),E=B(E,_)}return new j(D,E)}n.A=function(E){return J(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function oe(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function ee(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nv=xS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,yi=xS.Integer=s}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pr={};var Pv,zj,Us,kv,Ju,xh,Ov,Fv,Vv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,x){for(var U=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)U[Ne-2]=arguments[Ne];return d.prototype[C].apply(m,U)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,x=m.length||0;c.length=C+x;for(let U=0;U<x;U++)c[C+U]=m[U]}else c.push(m)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ee(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=pp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class fr{constructor(){this.h=this.g=null}add(d,f){let m=Na.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Na=new B(()=>new KR,c=>c.reset());class KR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pa,ka=!1,pp=new fr,qE=()=>{let c=a.Promise.resolve(void 0);Pa=()=>{c.then(QR)}};var QR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Na;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ka=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var YR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Oa(c,d){if(Ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(oe){e:{try{J(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ZR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Oa.aa.h.call(this)}}b(Oa,Ct);var ZR={2:"touch",3:"pen",4:"mouse"};Oa.prototype.h=function(){Oa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),JR=0;function XR(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++JR,this.da=this.fa=!1}function zc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gc(c){this.src=c,this.g={},this.h=0}Gc.prototype.add=function(c,d,f,m,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var U=mp(c,d,m,C);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new XR(d,this.src,x,!!m,C),d.fa=f,c.push(d)),d};function gp(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(m,C,1),x&&(zc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function mp(c,d,f,m){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==m)return C}return-1}var yp="closure_lm_"+(1e6*Math.random()|0),vp={};function zE(c,d,f,m,C){if(m&&m.once)return WE(c,d,f,m,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)zE(c,d[x],f,m,C);return null}return f=Ip(f),c&&c[Fa]?c.K(d,f,l(m)?!!m.capture:!!m,C):GE(c,d,f,!1,m,C)}function GE(c,d,f,m,C,x){if(!d)throw Error("Invalid event type");var U=l(C)?!!C.capture:!!C,Ne=wp(c);if(Ne||(c[yp]=Ne=new Gc(c)),f=Ne.add(d,f,m,U,x),f.proxy)return f;if(m=eN(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)YR||(C=U),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(QE(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function eN(){function c(f){return d.call(c.src,c.listener,f)}let d=tN;return c}function WE(c,d,f,m,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)WE(c,d[x],f,m,C);return null}return f=Ip(f),c&&c[Fa]?c.L(d,f,l(m)?!!m.capture:!!m,C):GE(c,d,f,!0,m,C)}function KE(c,d,f,m,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)KE(c,d[x],f,m,C);else m=l(m)?!!m.capture:!!m,f=Ip(f),c&&c[Fa]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=mp(x,f,m,C),-1<f&&(zc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=wp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=mp(d,f,m,C)),(f=-1<c?d[c]:null)&&_p(f))}function _p(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Fa])gp(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(QE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=wp(d))?(gp(f,c),f.h==0&&(f.src=null,d[yp]=null)):zc(c)}}}function QE(c){return c in vp?vp[c]:vp[c]="on"+c}function tN(c,d){if(c.da)c=!0;else{d=new Oa(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&_p(c),c=f.call(m,d)}return c}function wp(c){return c=c[yp],c instanceof Gc?c:null}var Ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ip(c){return typeof c=="function"?c:(c[Ep]||(c[Ep]=function(d){return c.handleEvent(d)}),c[Ep])}function bt(){Hr.call(this),this.i=new Gc(this),this.M=this,this.F=null}b(bt,Hr),bt.prototype[Fa]=!0,bt.prototype.removeEventListener=function(c,d,f,m){KE(this,c,d,f,m)};function Ot(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ct(d,c);else if(d instanceof Ct)d.target=d.target||c;else{var C=d;d=new Ct(m,c),I(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var U=d.g=f[x];C=Wc(U,m,!0,d)&&C}if(U=d.g=c,C=Wc(U,m,!0,d)&&C,C=Wc(U,m,!1,d)&&C,f)for(x=0;x<f.length;x++)U=d.g=f[x],C=Wc(U,m,!1,d)&&C}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)zc(f[m]);delete c.g[d],c.h--}}this.F=null},bt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},bt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Wc(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var U=d[x];if(U&&!U.da&&U.capture==f){var Ne=U.listener,vt=U.ha||U.src;U.fa&&gp(c.i,U),C=Ne.call(vt,m)!==!1&&C}}return C&&!m.defaultPrevented}function YE(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ZE(c){c.g=YE(()=>{c.g=null,c.i&&(c.i=!1,ZE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nN extends Hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ZE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(c){Hr.call(this),this.h=c,this.g={}}b(Va,Hr);var JE=[];function XE(c){ee(c.g,function(d,f){this.g.hasOwnProperty(f)&&_p(d)},c),c.g={}}Va.prototype.N=function(){Va.aa.N.call(this),XE(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dp=a.JSON.stringify,rN=a.JSON.parse,iN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Cp(){}Cp.prototype.h=null;function eI(c){return c.h||(c.h=c.i())}function tI(){}var La={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bp(){Ct.call(this,"d")}b(bp,Ct);function Tp(){Ct.call(this,"c")}b(Tp,Ct);var Vi={},nI=null;function Kc(){return nI=nI||new bt}Vi.La="serverreachability";function rI(c){Ct.call(this,Vi.La,c)}b(rI,Ct);function ja(c){let d=Kc();Ot(d,new rI(d))}Vi.STAT_EVENT="statevent";function iI(c,d){Ct.call(this,Vi.STAT_EVENT,c),this.stat=d}b(iI,Ct);function Ft(c){let d=Kc();Ot(d,new iI(d,c))}Vi.Ma="timingevent";function oI(c,d){Ct.call(this,Vi.Ma,c),this.size=d}b(oI,Ct);function Ba(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ua(){this.g=!0}Ua.prototype.xa=function(){this.g=!1};function oN(c,d,f,m,C,x){c.info(function(){if(c.g)if(x)for(var U="",Ne=x.split("&"),vt=0;vt<Ne.length;vt++){var Se=Ne[vt].split("=");if(1<Se.length){var Tt=Se[0];Se=Se[1];var St=Tt.split("_");U=2<=St.length&&St[1]=="type"?U+(Tt+"="+Se+"&"):U+(Tt+"=redacted&")}}else U=null;else U=x;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+U})}function sN(c,d,f,m,C,x,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+U})}function Ho(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+uN(c,f)+(m?" "+m:"")})}function aN(c,d){c.info(function(){return"TIMEOUT: "+d})}Ua.prototype.info=function(){};function uN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return Dp(f)}catch{return d}}var Qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sp;function Yc(){}b(Yc,Cp),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},Sp=new Yc;function qr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aI}function aI(){this.i=null,this.g="",this.h=!1}var uI={},Ap={};function Mp(c,d,f){c.L=1,c.v=el(pr(d)),c.m=f,c.P=!0,cI(c,null)}function cI(c,d){c.F=Date.now(),Zc(c),c.A=pr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),DI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new aI,c.g=UI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new nN(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(JE[0]=C.toString()),C=JE);for(var x=0;x<C.length;x++){var U=zE(f,C[x],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ja(),oN(c.i,c.u,c.A,c.l,c.R,c.m)}qr.prototype.ca=function(c){c=c.target;let d=this.M;d&&gr(c)==3?d.j():this.Y(c)},qr.prototype.Y=function(c){try{if(c==this.g)e:{let St=gr(this.g);var d=this.g.Ba();let Go=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||xI(this.g)))){this.J||St!=4||d==7||(d==8||0>=Go?ja(3):ja(2)),xp(this);var f=this.g.Z();this.X=f;t:if(lI(this)){var m=xI(this.g);c="";var C=m.length,x=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),$a(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(x&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,sN(this.i,this.u,this.A,this.l,this.R,St,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,vt=this.g;if((Ne=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ne)){var Se=Ne;break t}}Se=null}if(f=Se)Ho(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rp(this,f);else{this.o=!1,this.s=3,Ft(12),Li(this),$a(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<U.length;)if(Tn=cN(this,U),Tn==Ap){St==4&&(this.s=4,Ft(14),f=!1),Ho(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==uI){this.s=4,Ft(15),Ho(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Ho(this.i,this.l,Tn,null),Rp(this,Tn);if(lI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||U.length!=0||this.h.h||(this.s=1,Ft(16),f=!1),this.o=this.o&&f,!f)Ho(this.i,this.l,U,"[Invalid Chunked Response]"),Li(this),$a(this);else if(0<U.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Vp(Tt),Tt.M=!0,Ft(11))}}else Ho(this.i,this.l,U,null),Rp(this,U);St==4&&Li(this),this.o&&!this.J&&(St==4?VI(this.j,this):(this.o=!1,Zc(this)))}else TN(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Li(this),$a(this)}}}catch{}finally{}};function lI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cN(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Ap:(f=Number(d.substring(f,m)),isNaN(f)?uI:(m+=1,m+f>d.length?Ap:(d=d.slice(m,m+f),c.C=m+f,d)))}qr.prototype.cancel=function(){this.J=!0,Li(this)};function Zc(c){c.S=Date.now()+c.I,dI(c,c.I)}function dI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ba(g(c.ba,c),d)}function xp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}qr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(aN(this.i,this.A),this.L!=2&&(ja(),Ft(17)),Li(this),this.s=2,$a(this)):dI(this,this.S-c)};function $a(c){c.j.G==0||c.J||VI(c.j,c)}function Li(c){xp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,XE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Rp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Np(f.h,c))){if(!c.K&&Np(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ol(f),rl(f);else break e;Fp(f),Ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ba(g(f.Za,f),6e3));if(1>=pI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Bi(f,11)}else if((c.K||f.g==c)&&ol(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Se=C[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let Tt=Se[3];Tt!=null&&(f.la=Tt,f.j.info("VER="+f.la));let St=Se[4];St!=null&&(f.Aa=St,f.j.info("SVER="+f.Aa));let Go=Se[5];Go!=null&&typeof Go=="number"&&0<Go&&(m=1.5*Go,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Tn=c.g;if(Tn){let al=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var x=m.h;x.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Pp(x,x.h),x.h=null))}if(m.D){let Lp=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lp&&(m.ya=Lp,Ve(m.I,m.D,Lp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var U=c;if(m.qa=BI(m,m.J?m.ia:null,m.W),U.K){gI(m.h,U);var Ne=U,vt=m.L;vt&&(Ne.I=vt),Ne.B&&(xp(Ne),Zc(Ne)),m.g=U}else OI(m);0<f.i.length&&il(f)}else Se[0]!="stop"&&Se[0]!="close"||Bi(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Bi(f,7):Op(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}ja(4)}catch{}}var lN=class{constructor(c,d){this.g=c,this.map=d}};function hI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function pI(c){return c.h?1:c.g?c.g.size:0}function Np(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pp(c,d){c.g?c.g.add(d):c.h=d}function gI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}hI.prototype.cancel=function(){if(this.i=mI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function mI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function dN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function hN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function yI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=hN(c),m=dN(c),C=m.length,x=0;x<C;x++)d.call(void 0,m[x],f&&f[x],c)}var vI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var x=c[f].substring(0,m);C=c[f].substring(m+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ji(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ji){this.h=c.h,Jc(this,c.j),this.o=c.o,this.g=c.g,Xc(this,c.s),this.l=c.l;var d=c.i,f=new za;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),_I(this,f),this.m=c.m}else c&&(d=String(c).match(vI))?(this.h=!1,Jc(this,d[1]||"",!0),this.o=Ha(d[2]||""),this.g=Ha(d[3]||"",!0),Xc(this,d[4]),this.l=Ha(d[5]||"",!0),_I(this,d[6]||"",!0),this.m=Ha(d[7]||"")):(this.h=!1,this.i=new za(null,this.h))}ji.prototype.toString=function(){var c=[],d=this.j;d&&c.push(qa(d,wI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(qa(d,wI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(qa(f,f.charAt(0)=="/"?mN:gN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",qa(f,vN)),c.join("")};function pr(c){return new ji(c)}function Jc(c,d,f){c.j=f?Ha(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Xc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function _I(c,d,f){d instanceof za?(c.i=d,_N(c.i,c.h)):(f||(d=qa(d,yN)),c.i=new za(d,c.h))}function Ve(c,d,f){c.i.set(d,f)}function el(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ha(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,pN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wI=/[#\/\?@]/g,gN=/[#\?:]/g,mN=/[#\?]/g,yN=/[#\?@]/g,vN=/#/g;function za(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function zr(c){c.g||(c.g=new Map,c.h=0,c.i&&fN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=za.prototype,n.add=function(c,d){zr(this),this.i=null,c=qo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function EI(c,d){zr(c),d=qo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function II(c,d){return zr(c),d=qo(c,d),c.g.has(d)}n.forEach=function(c,d){zr(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},n.na=function(){zr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let x=0;x<C.length;x++)f.push(d[m])}return f},n.V=function(c){zr(this);let d=[];if(typeof c=="string")II(this,c)&&(d=d.concat(this.g.get(qo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return zr(this),this.i=null,c=qo(this,c),II(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function DI(c,d,f){EI(c,d),0<f.length&&(c.i=null,c.g.set(qo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let x=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var C=x;U[m]!==""&&(C+="="+encodeURIComponent(String(U[m]))),c.push(C)}}return this.i=c.join("&")};function qo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function _N(c,d){d&&!c.j&&(zr(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(EI(this,m),DI(this,C,f))},c)),c.j=d}function wN(c,d){let f=new Ua;if(a.Image){let m=new Image;m.onload=y(Gr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Gr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Gr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Gr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function EN(c,d){let f=new Ua,m=new AbortController,C=setTimeout(()=>{m.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(x=>{clearTimeout(C),x.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Gr(f,"TestPingServer: error",!1,d)})}function Gr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function IN(){this.g=new iN}function DN(c,d,f){let m=f||"";try{yI(c,function(C,x){let U=C;l(C)&&(U=Dp(C)),d.push(m+x+"="+encodeURIComponent(U))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ga(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ga,Cp),Ga.prototype.g=function(){return new tl(this.l,this.j)},Ga.prototype.i=function(c){return function(){return c}}({});function tl(c,d){bt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tl,bt),n=tl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ka(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function CI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Wa(this):Ka(this),this.readyState==3&&CI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Wa(this))},n.Qa=function(c){this.g&&(this.response=c,Wa(this))},n.ga=function(){this.g&&Wa(this)};function Wa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ka(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ka(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bI(c){let d="";return ee(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function kp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=bI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ve(c,d,f))}function We(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,bt);var CN=/^https?$/i,bN=["POST","PUT"];n=We.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sp.g(),this.v=this.o?eI(this.o):eI(Sp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){TI(this,x);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bN,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,U]of f)this.g.setRequestHeader(x,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{MI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){TI(this,x)}};function TI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,SI(c),nl(c)}function SI(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),nl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?AI(this):this.bb())},n.bb=function(){AI(this)};function AI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||gr(c)!=4||c.Z()!=2)){if(c.u&&gr(c)==4)YE(c.Ea,0,c);else if(Ot(c,"readystatechange"),gr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=U===0){var C=String(c.D).match(vI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!CN.test(C?C.toLowerCase():"")}f=m}if(f)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var x=2<gr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",SI(c)}}finally{nl(c)}}}}function nl(c,d){if(c.g){MI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ot(c,"ready");try{f.onreadystatechange=m}catch{}}}function MI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function gr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rN(d)}};function xI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function TN(c){let d={};c=(c.g&&2<=gr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var f=D(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}E(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function RI(c){this.Aa=0,this.i=[],this.j=new Ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qa("baseRetryDelayMs",5e3,c),this.cb=Qa("retryDelaySeedMs",1e4,c),this.Wa=Qa("forwardChannelMaxRetries",2,c),this.wa=Qa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new hI(c&&c.concurrentRequestLimit),this.Da=new IN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=RI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Ft(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=BI(this,null,this.W),il(this)};function Op(c){if(NI(c),c.G==3){var d=c.U++,f=pr(c.I);if(Ve(f,"SID",c.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),Ya(c,f),d=new qr(c,c.j,d),d.L=2,d.v=el(pr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=UI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zc(d)}jI(c)}function rl(c){c.g&&(Vp(c),c.g.cancel(),c.g=null)}function NI(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!fI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Pa||qE(),ka||(Pa(),ka=!0),pp.add(d,c),c.B=0}}function SN(c,d){return pI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ba(g(c.Ga,c,d),LI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new qr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=kI(this,C,d),f=pr(this.I),Ve(f,"RID",c),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),Ya(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(bI(x)))+"&"+d:this.m&&kp(f,this.m,x)),Pp(this.h,C),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),C.T=!0,Mp(C,f,null)):Mp(C,f,d),this.G=2}}else this.G==3&&(c?PI(this,c):this.i.length==0||fI(this.h)||PI(this))};function PI(c,d){var f;d?f=d.l:f=c.U++;let m=pr(c.I);Ve(m,"SID",c.K),Ve(m,"RID",f),Ve(m,"AID",c.T),Ya(c,m),c.m&&c.o&&kp(m,c.m,c.o),f=new qr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=kI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pp(c.h,f),Mp(f,m,d)}function Ya(c,d){c.H&&ee(c.H,function(f,m){Ve(d,m,f)}),c.l&&yI({},function(f,m){Ve(d,m,f)})}function kI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let U=["count="+f];x==-1?0<f?(x=C[0].g,U.push("ofs="+x)):x=0:U.push("ofs="+x);let Ne=!0;for(let vt=0;vt<f;vt++){let Se=C[vt].g,Tt=C[vt].map;if(Se-=x,0>Se)x=Math.max(0,C[vt].g-100),Ne=!1;else try{DN(Tt,U,"req"+Se+"_")}catch{m&&m(Tt)}}if(Ne){m=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function OI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Pa||qE(),ka||(Pa(),ka=!0),pp.add(d,c),c.v=0}}function Fp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ba(g(c.Fa,c),LI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,FI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ba(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),rl(this),FI(this))};function Vp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function FI(c){c.g=new qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=pr(c.qa);Ve(d,"RID","rpc"),Ve(d,"SID",c.K),Ve(d,"AID",c.T),Ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(d,"TO",c.ja),Ve(d,"TYPE","xmlhttp"),Ya(c,d),c.m&&c.o&&kp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=el(pr(d)),f.m=null,f.P=!0,cI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,rl(this),Fp(this),Ft(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function VI(c,d){var f=null;if(c.g==d){ol(c),Vp(c),c.g=null;var m=2}else if(Np(c.h,d))f=d.D,gI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Kc(),Ot(m,new oI(m,f)),il(c)}else OI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&SN(c,d)||m==2&&Fp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function LI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Bi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new ji(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(m,"https"),el(m),C?wN(m.toString(),f):EN(m.toString(),f)}else Ft(2);c.G=0,c.l&&c.l.sa(d),jI(c),NI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function jI(c){if(c.G=0,c.ka=[],c.l){let d=mI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function BI(c,d,f){var m=f instanceof ji?pr(f):new ji(f);if(m.g!="")d&&(m.g=d+"."+m.g),Xc(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new ji(null);m&&Jc(x,m),d&&(x.g=d),C&&Xc(x,C),f&&(x.l=f),m=x}return f=c.D,d=c.ya,f&&d&&Ve(m,f,d),Ve(m,"VER",c.la),Ya(c,m),m}function UI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new Ga({eb:f})):new We(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $I(){}n=$I.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new rn(c,d)};function rn(c,d){bt.call(this),this.g=new RI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new zo(this)}b(rn,bt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Op(this.g)},rn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Dp(c),c=f);d.i.push(new lN(d.Ya++,c)),d.G==3&&il(d)},rn.prototype.N=function(){this.g.l=null,delete this.j,Op(this.g),delete this.g,rn.aa.N.call(this)};function HI(c){bp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(HI,bp);function qI(){Tp.call(this),this.status=1}b(qI,Tp);function zo(c){this.g=c}b(zo,$I),zo.prototype.ua=function(){Ot(this.g,"a")},zo.prototype.ta=function(c){Ot(this.g,new HI(c))},zo.prototype.sa=function(c){Ot(this.g,new qI)},zo.prototype.ra=function(){Ot(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,Vv=Pr.createWebChannelTransport=function(){return new sl},Fv=Pr.getStatEventTarget=function(){return Kc()},Ov=Pr.Event=Vi,xh=Pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,Ju=Pr.ErrorCode=Qc,sI.COMPLETE="complete",kv=Pr.EventType=sI,tI.EventType=La,La.OPEN="a",La.CLOSE="b",La.ERROR="c",La.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Us=Pr.WebChannel=tI,zj=Pr.FetchXmlHttpFactory=Ga,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Pv=Pr.XhrIo=We}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});var RS="@firebase/firestore";var at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");var va="10.14.0";var Ci=new ll("@firebase/firestore");function Gs(){return Ci.logLevel}function kA(n){Ci.setLogLevel(n)}function V(n,...e){if(Ci.logLevel<=Hn.DEBUG){let t=e.map($w);Ci.debug(`Firestore (${va}): ${n}`,...t)}}function et(n,...e){if(Ci.logLevel<=Hn.ERROR){let t=e.map($w);Ci.error(`Firestore (${va}): ${n}`,...t)}}function Ln(n,...e){if(Ci.logLevel<=Hn.WARN){let t=e.map($w);Ci.warn(`Firestore (${va}): ${n}`,...t)}}function $w(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+n;throw et(e),new Error(e)}function Z(n,e){n||Q()}function OA(n,e){n||Q()}function H(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends YI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ht=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(at.UNAUTHENTICATED))}shutdown(){}},qv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zv=class{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ht,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ht)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new Bh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new at(e)}},Gv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Wv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Gv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new Kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Gj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Uh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Gj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function ta(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function FA(n){return n+"\0"}var ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $h=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends $h{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Wj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends $h{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Wj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var na=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Yv(n){return n.fields.find(e=>e.kind===2)}function mo(n){return n.fields.filter(e=>e.kind!==2)}na.UNKNOWN_ID=-1;var Js=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var lc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Cn.min())}};function VA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new Cn(i,q.empty(),e)}function LA(n){return new Cn(n.readTime,n.key,-1)}var Cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),q.empty(),-1)}static max(){return new n(re.max(),q.empty(),-1)}};function Hw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ki(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==jA)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var qh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Io(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=qw(r.target.error);this.V.reject(new Io(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Io(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Jv(t)}},bi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Za())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cl())return!1;if(n.v())return!0;let e=Za(),t=n.S(e),r=0<t&&t<10,i=BA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Io(e,s))},i.onupgradeneeded=o=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=qh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(V("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function BA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Zv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yo(this.B.delete())}},Io=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Oi(n){return n.name==="IndexedDbTransactionError"}var Jv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(V("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yo(r)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),yo(this.store.add(e))}get(e){return yo(this.store.get(e)).next(t=>(t===void 0&&(t=null),V("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),yo(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),yo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){V("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=qw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Zv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function yo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=qw(r.target.error);t(i)}})}var NS=!1;function qw(n){let e=bi.S(Za());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NS||(NS=!0,setTimeout(()=>{throw r},0)),r}}return n}var Xv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){V("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{V("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Oi(t)?V("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ki(t)}yield this.X(6e4)}))}},e_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return V("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(V("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=LA(o);Hw(s,r)>0&&(r=s)}),new Cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var dn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Rc(n){return n==null}function dc(n){return n===0&&1/n==-1/0}function UA(n){return typeof n=="number"&&Number.isInteger(n)&&!dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function $t(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PS(e)),e=Kj(n.get(t),e);return PS(e)}function Kj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function PS(n){return n+""}function rr(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),Ie.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Q(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Q()}o=s+2}return new Ie(r)}var kS=["userId","batchId"];function Oh(n,e){return[n,$t(e)]}function $A(n,e,t){return[n,$t(e),t]}var Qj={},Yj=["prefixPath","collectionGroup","readTime","documentId"],Zj=["prefixPath","collectionGroup","documentId"],Jj=["collectionGroup","readTime","prefixPath","documentId"],Xj=["canonicalId","targetId"],eB=["targetId","path"],tB=["path","targetId"],nB=["collectionId","parent"],rB=["indexId","uid"],iB=["uid","sequenceNumber"],oB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sB=["indexId","uid","orderedDocumentKey"],aB=["userId","collectionPath","documentId"],uB=["userId","collectionPath","largestBatchId"],cB=["userId","collectionGroup","largestBatchId"],HA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lB=[...HA,"documentOverlays"],qA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zA=qA,zw=[...zA,"indexConfiguration","indexState","indexEntries"],dB=zw,hB=[...zw,"globals"];var hc=class extends Hh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ft(n,e){let t=H(n);return bi.F(t._e,e)}function OS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Be=class n{constructor(e,t){this.comparator=e,this.root=t||or.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},or=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ke=class n{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zh(this.data.getIterator())}getIteratorFrom(e){return new zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $s(n){return n.hasNext()?n.getNext():void 0}var hn=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ke(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Gh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function WA(){return typeof atob<"u"}var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Gh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var fB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(n){if(Z(!!n),typeof n=="string"){let e=0,t=fB.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ti(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gw(n){let e=n.mapValue.fields.__previous_value__;return Lf(e)?Gw(e):e}function fc(n){let e=Fr(n.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var t_=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Si=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fh={nullValue:"NULL_VALUE"};function Do(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lf(n)?4:KA(n)?9007199254740991:jf(n)?10:11:Q()}function ur(n,e){if(n===e)return!0;let t=Do(n);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fc(n).isEqual(fc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fr(i.timestampValue),a=Fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ti(i.bytesValue).isEqual(Ti(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return $e(i.geoPointValue.latitude)===$e(o.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return $e(i.integerValue)===$e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=$e(i.doubleValue),a=$e(o.doubleValue);return s===a?dc(s)===dc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ta(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(OS(s)!==OS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ur(s[u],a[u])))return!1;return!0}(n,e);default:return Q()}}function pc(n,e){return(n.values||[]).find(t=>ur(t,e))!==void 0}function Ai(n,e){if(n===e)return 0;let t=Do(n),r=Do(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=$e(o.integerValue||o.doubleValue),u=$e(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return FS(n.timestampValue,e.timestampValue);case 4:return FS(fc(n),fc(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ti(o),u=Ti(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ue(a[l],u[l]);if(h!==0)return h}return ue(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue($e(o.latitude),$e(s.latitude));return a!==0?a:ue($e(o.longitude),$e(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return VS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ue(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:VS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ii.mapValue&&s===Ii.mapValue)return 0;if(o===Ii.mapValue)return 1;if(s===Ii.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=ue(u[p],h[p]);if(g!==0)return g;let y=Ai(a[u[p]],l[h[p]]);if(y!==0)return y}return ue(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function FS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=Fr(n),r=Fr(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function VS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ai(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function ra(n){return n_(n)}function n_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=n_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${n_(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function Co(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function r_(n){return!!n&&"integerValue"in n}function gc(n){return!!n&&"arrayValue"in n}function LS(n){return!!n&&"nullValue"in n}function jS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vh(n){return!!n&&"mapValue"in n}function jf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function oc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var QA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function pB(n){return"nullValue"in n?Fh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Co(Si.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jf(n)?QA:{mapValue:{}}:Q()}function gB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Co(Si.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?QA:"mapValue"in n?jf(n)?{mapValue:{}}:Ii:Q()}function BS(n,e){let t=Ai(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function US(n,e){let t=Ai(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Pt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=oc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(oc(this.value))}};function YA(n){let e=[];return ko(n.fields,(t,r)=>{let i=new tt([t]);if(Vh(r)){let o=YA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new hn(e)}var ut=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),Pt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cr=class{constructor(e,t){this.position=e,this.inclusive=t}};function $S(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Ai(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}var bo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function mB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Wh=class{},ve=class n extends Wh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new s_(e,t,r):t==="array-contains"?new c_(e,r):t==="in"?new Kh(e,r):t==="not-in"?new l_(e,r):t==="array-contains-any"?new d_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new a_(e,r):new u_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ai(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(Ai(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class n extends Wh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ia(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ia(n){return n.op==="and"}function i_(n){return n.op==="or"}function Ww(n){return ZA(n)&&ia(n)}function ZA(n){for(let e of n.filters)if(e instanceof Re)return!1;return!0}function o_(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(Ww(n))return n.filters.map(e=>o_(e)).join(",");{let e=n.filters.map(t=>o_(t)).join(",");return`${n.op}(${e})`}}function JA(n,e){return n instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)}(n,e):n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&JA(s,i.filters[a]),!0):!1}(n,e):void Q()}function XA(n,e){let t=n.filters.concat(e);return Re.create(t,n.op)}function eM(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`}(n):n instanceof Re?function(t){return t.op.toString()+" {"+t.getFilters().map(eM).join(" ,")+"}"}(n):"Filter"}var s_=class extends ve{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},a_=class extends ve{constructor(e,t){super(e,"in",t),this.keys=tM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},u_=class extends ve{constructor(e,t){super(e,"not-in",t),this.keys=tM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function tM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var c_=class extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gc(t)&&pc(t.arrayValue,this.value)}},Kh=class extends ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pc(this.value.arrayValue,t)}},l_=class extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!pc(this.value.arrayValue,t)}},d_=class extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pc(this.value.arrayValue,r))}};var h_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function f_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new h_(n,e,t,r,i,o,s)}function To(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>o_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ra(r)).join(",")),e.ue=t}return e.ue}function Nc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HS(n.startAt,e.startAt)&&HS(n.endAt,e.endAt)}function Qh(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Yh(n,e){return n.filters.filter(t=>t instanceof ve&&t.field.isEqual(e))}function qS(n,e,t){let r=Fh,i=!0;for(let o of Yh(n,e)){let s=Fh,a=!0;switch(o.op){case"<":case"<=":s=pB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Fh}BS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];BS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function zS(n,e,t){let r=Ii,i=!0;for(let o of Yh(n,e)){let s=Ii,a=!0;switch(o.op){case">=":case">":s=gB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ii}US({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];US({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var jn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function nM(n,e,t,r,i,o,s,a){return new jn(n,e,t,r,i,o,s,a)}function _a(n){return new jn(n)}function GS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kw(n){return n.collectionGroup!==null}function Xs(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ke(tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new bo(o,r))}),t.has(tt.keyField().canonicalString())||e.ce.push(new bo(tt.keyField(),r))}return e.ce}function Ht(n){let e=H(n);return e.le||(e.le=yB(e,Xs(n))),e.le}function yB(n,e){if(n.limitType==="F")return f_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bo(i.field,o)});let t=n.endAt?new cr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cr(n.startAt.position,n.startAt.inclusive):null;return f_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function p_(n,e){let t=n.filters.concat([e]);return new jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zh(n,e,t){return new jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pc(n,e){return Nc(Ht(n),Ht(e))&&n.limitType===e.limitType}function rM(n){return`${To(Ht(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eM(i)).join(", ")}]`),Rc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`}(Ht(n))}; limitType=${n.limitType})`}function kc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Xs(r),i))}(n,e)}function iM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oM(n){return(e,t)=>{let r=!1;for(let i of Xs(n)){let o=vB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function vB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ai(u,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return GA(this.inner)}size(){return this.innerSize}};var _B=new Be(q.comparator);function Jt(){return _B}var sM=new Be(q.comparator);function rc(...n){let e=sM;for(let t of n)e=e.insert(t.key,t);return e}function aM(n){let e=sM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ir(){return sc()}function uM(){return sc()}function sc(){return new lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var wB=new Be(q.comparator),EB=new ke(q.comparator);function ce(...n){let e=EB;for(let t of n)e=e.add(t);return e}var IB=new ke(ue);function Qw(){return IB}function Yw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function cM(n){return{integerValue:""+n}}function lM(n,e){return UA(e)?cM(e):Yw(n,e)}var oa=class{constructor(){this._=void 0}};function DB(n,e,t){return n instanceof Mi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lf(o)&&(o=Gw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Vr?hM(n,e):n instanceof Lr?fM(n,e):function(i,o){let s=dM(i,o),a=WS(s)+WS(i.Pe);return r_(s)&&r_(i.Pe)?cM(a):Yw(i.serializer,a)}(n,e)}function CB(n,e,t){return n instanceof Vr?hM(n,e):n instanceof Lr?fM(n,e):t}function dM(n,e){return n instanceof xi?function(r){return r_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mi=class extends oa{},Vr=class extends oa{constructor(e){super(),this.elements=e}};function hM(n,e){let t=pM(e);for(let r of n.elements)t.some(i=>ur(i,r))||t.push(r);return{arrayValue:{values:t}}}var Lr=class extends oa{constructor(e){super(),this.elements=e}};function fM(n,e){let t=pM(e);for(let r of n.elements)t=t.filter(i=>!ur(i,r));return{arrayValue:{values:t}}}var xi=class extends oa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function WS(n){return $e(n.integerValue||n.doubleValue)}function pM(n){return gc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var So=class{constructor(e,t){this.field=e,this.transform=t}};function bB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vr&&i instanceof Vr||r instanceof Lr&&i instanceof Lr?ta(r.elements,i.elements,ur):r instanceof xi&&i instanceof xi?ur(r.Pe,i.Pe):r instanceof Mi&&i instanceof Mi}(n.transform,e.transform)}var g_=class{constructor(e,t){this.version=e,this.transformResults=t}},Ze=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var sa=class{};function gM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ni(n.key,Ze.none()):new Ri(n.key,n.data,Ze.none());{let t=n.data,r=Pt.empty(),i=new ke(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Bn(n.key,r,new hn(i.toArray()),Ze.none())}}function TB(n,e,t){n instanceof Ri?function(i,o,s){let a=i.value.clone(),u=QS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Bn?function(i,o,s){if(!Lh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=QS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(mM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof Ri?function(o,s,a,u){if(!Lh(o.precondition,s))return a;let l=o.value.clone(),h=YS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bn?function(o,s,a,u){if(!Lh(o.precondition,s))return a;let l=YS(o.fieldTransforms,u,s),h=s.data;return h.setAll(mM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Lh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function SB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=dM(r.transform,i||null);o!=null&&(t===null&&(t=Pt.empty()),t.set(r.field,o))}return t||null}function KS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ta(r,i,(o,s)=>bB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ri=class extends sa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bn=class extends sa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function mM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function QS(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,CB(s,a,t[i]))}return r}function YS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,DB(o,s,e))}return r}var Ni=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mc=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&TB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=uM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=gM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,r)=>KS(t,r))&&ta(this.baseMutations,e.baseMutations,(t,r)=>KS(t,r))}},m_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return wB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var vc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var y_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,Ee;function yM(n){switch(n){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function vM(n){if(n===void 0)return et("GRPC error has no .code"),R.UNKNOWN;switch(n){case ot.OK:return R.OK;case ot.CANCELLED:return R.CANCELLED;case ot.UNKNOWN:return R.UNKNOWN;case ot.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ot.INTERNAL:return R.INTERNAL;case ot.UNAVAILABLE:return R.UNAVAILABLE;case ot.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ot.NOT_FOUND:return R.NOT_FOUND;case ot.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ot.ABORTED:return R.ABORTED;case ot.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ot.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var ZS=null;function _M(){return new TextEncoder}var AB=new yi([4294967295,4294967295],0);function JS(n){let e=_M().encode(n),t=new Nv;return t.update(e),new Uint8Array(t.digest())}function XS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([t,r],0),new yi([i,o],0)]}var v_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eo(`Invalid padding: ${t}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(yi.fromNumber(r)));return i.compare(AB)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _c=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new Be(ue),Jt(),ce())}},wc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var ea=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Jh=class{constructor(e,t){this.targetId=e,this.me=t}},Xh=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ef=class{constructor(){this.fe=0,this.ge=tA(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new wc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=tA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},__=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jt(),this.qe=eA(),this.Qe=new Be(ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Qh(o))if(r===0){let s=new q(o.path);this.Ue(t,s,ut.newNoDocument(s,re.min()))}else Z(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}ZS?.et(function(h,p,g,y,b){var A,M,B,G,j,J;let oe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ee=p.unchangedNames;return ee&&(oe.bloomFilter={applied:b===0,hashCount:(A=ee?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(G=(B=(M=ee?.bits)===null||M===void 0?void 0:M.bitmap)===null||B===void 0?void 0:B.length)!==null&&G!==void 0?G:0,padding:(J=(j=ee?.bits)===null||j===void 0?void 0:j.padding)!==null&&J!==void 0?J:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),oe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ti(r).toUint8Array()}catch(u){if(u instanceof Gh)return Ln("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new v_(s,i,o)}catch(u){return Ln(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Qh(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ut.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new _c(e,t,this.Qe,this.ke,r);return this.ke=Jt(),this.qe=eA(),this.Qe=new Be(ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ef,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ke(ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ef),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function eA(){return new Be(q.comparator)}function tA(){return new Be(q.comparator)}var MB={asc:"ASCENDING",desc:"DESCENDING"},xB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RB={and:"AND",or:"OR"},w_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function E_(n,e){return n.useProto3Json||Rc(e)?e:{value:e}}function aa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NB(n,e){return aa(n,e.toTimestamp())}function nt(n){return Z(!!n),re.fromTimestamp(function(t){let r=Fr(t);return new ze(r.seconds,r.nanos)}(n))}function Zw(n,e){return I_(n,e).canonicalString()}function I_(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function EM(n){let e=Ie.fromString(n);return Z(RM(e)),e}function Ec(n,e){return Zw(n.databaseId,e.path)}function sr(n,e){let t=EM(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(CM(t))}function IM(n,e){return Zw(n.databaseId,e)}function DM(n){let e=EM(n);return e.length===4?Ie.emptyPath():CM(e)}function D_(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CM(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nA(n,e,t){return{name:Ec(n,e),fields:t.value.mapValue.fields}}function bM(n,e,t){let r=sr(n,e.name),i=nt(e.updateTime),o=e.createTime?nt(e.createTime):re.min(),s=new Pt({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function PB(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let o=sr(r,i.found.name),s=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):re.min(),u=new Pt({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let o=sr(r,i.missing),s=nt(i.readTime);return ut.newNoDocument(o,s)}(n,e):Q()}function kB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Z(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:vM(l.code);return new k(h,l.message||"")}(s);t=new Xh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sr(n,r.document.name),o=nt(r.document.updateTime),s=r.document.createTime?nt(r.document.createTime):re.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sr(n,r.document),o=r.readTime?nt(r.readTime):re.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sr(n,r.document),o=r.removedTargetIds||[];t=new ea([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new y_(i,o),a=r.targetId;t=new Jh(a,s)}}return t}function Ic(n,e){let t;if(e instanceof Ri)t={update:nA(n,e.key,e.value)};else if(e instanceof Ni)t={delete:Ec(n,e.key)};else if(e instanceof Bn)t={update:nA(n,e.key,e.data),updateMask:BB(e.fieldMask)};else{if(!(e instanceof mc))return Q();t={verify:Ec(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Mi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function C_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ze.updateTime(nt(o.updateTime)):o.exists!==void 0?Ze.exists(o.exists):Ze.none()}(e.currentDocument):Ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),u=new Mi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new Vr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Lr(h)}else"increment"in a?u=new xi(s,a.increment):Q();let l=tt.fromServerFormat(a.fieldPath);return new So(l,u)}(n,i)):[];if(e.update){e.update.name;let i=sr(n,e.update.name),o=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new hn(l.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new Bn(i,o,s,t,r)}return new Ri(i,o,t,r)}if(e.delete){let i=sr(n,e.delete);return new Ni(i,t)}if(e.verify){let i=sr(n,e.verify);return new mc(i,t)}return Q()}function OB(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?nt(i.updateTime):nt(o);return s.isEqual(re.min())&&(s=nt(o)),new g_(s,i.transformResults||[])}(t,e))):[]}function TM(n,e){return{documents:[IM(n,e.path)]}}function SM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IM(n,i);let o=function(l){if(l.length!==0)return xM(Re.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ks(g.field),direction:VB(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=E_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function AM(n){let e=DM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=MM(p);return g instanceof Re&&Ww(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(b){return new bo(Qs(b.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Rc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new cr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new cr(y,g)}(t.endAt)),nM(e,i,s,o,a,"F",u,l)}function FB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qs(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(t.unaryFilter.field);return ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(t.unaryFilter.field);return ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(Qs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Re.create(t.compositeFilter.filters.map(r=>MM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function VB(n){return MB[n]}function LB(n){return xB[n]}function jB(n){return RB[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Qs(n){return tt.fromServerFormat(n.fieldPath)}function xM(n){return n instanceof ve?function(t){if(t.op==="=="){if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NAN"}};if(LS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NAN"}};if(LS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(t.field),op:LB(t.op),value:t.value}}}(n):n instanceof Re?function(t){let r=t.getFilters().map(i=>xM(i));return r.length===1?r[0]:{compositeFilter:{op:jB(t.op),filters:r}}}(n):Q()}function BB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ua=class n{constructor(e,t,r,i,o=re.min(),s=re.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tf=class{constructor(e){this.ct=e}};function UB(n,e){let t;if(e.document)t=bM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=Mo(e.noDocument.readTime);t=ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{let r=q.fromSegments(e.unknownDocument.path),i=Mo(e.unknownDocument.version);t=ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ze(i[0],i[1]);return re.fromTimestamp(o)}(e.readTime)),t}function rA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Ec(o,s.key),fields:s.data.value.mapValue.fields,updateTime:aa(o,s.version.toTimestamp()),createTime:aa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ao(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:t.path.toArray(),version:Ao(e.version)}}return r}function nf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ao(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(n){let e=new ze(n.seconds,n.nanoseconds);return re.fromTimestamp(e)}function vo(n,e){let t=(e.baseMutations||[]).map(o=>C_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>C_(n.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new yc(e.batchId,i,t,r)}function ic(n){let e=Mo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Mo(n.lastLimboFreeSnapshotVersion):re.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Z(o.documents.length===1),Ht(_a(DM(o.documents[0])))}(n.query):function(o){return Ht(AM(o))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function NM(n,e){let t=Ao(e.snapshotVersion),r=Ao(e.lastLimboFreeSnapshotVersion),i;i=Qh(e.target)?TM(n.ct,e.target):SM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:To(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jw(n){let e=AM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zh(e,e.limit,"L"):e}function Lv(n,e){return new vc(e.largestBatchId,C_(n.ct,e.overlayMutation))}function iA(n,e){let t=e.path.lastSegment();return[n,$t(e.path.popLast()),t]}function oA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ao(r.readTime),documentKey:$t(r.documentKey.path),largestBatchId:r.largestBatchId}}var b_=class{getBundleMetadata(e,t){return sA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Mo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return sA(e).put(function(i){return{bundleId:i.id,createTime:Ao(nt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return aA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Jw(o.bundledQuery),readTime:Mo(o.readTime)}}(r)})}saveNamedQuery(e,t){return aA(e).put(function(i){return{name:i.name,readTime:Ao(nt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function sA(n){return ft(n,"bundles")}function aA(n){return ft(n,"namedQueries")}var rf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Xu(e).get(iA(this.userId,t)).next(r=>r?Lv(this.serializer,r):null)}getOverlays(e,t){let r=ir();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new vc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add($t(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Xu(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ir(),o=$t(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Lv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ir(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Lv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Xu(e).put(function(i,o,s){let[a,u,l]=iA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ic(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Xu(n){return ft(n,"documentOverlays")}var T_=class{Pt(e){return ft(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var kr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At($e(e.integerValue));else if("doubleValue"in e){let r=$e(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),dc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Fr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ti(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?KA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):jf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At($e(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};kr.vt=new kr;function $B(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=$B(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var S_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=uA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=uA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},A_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},M_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},_o=class{constructor(){this.jt=new S_,this.Ht=new A_(this.jt),this.Jt=new M_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var wo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function vi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=cA(n.arrayValue,e.arrayValue),t!==0?t:(t=cA(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function cA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var of=class{constructor(e){this.Xt=new ke((t,r)=>tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Yv(e);if(t!==void 0&&!this.sn(t))return!1;let r=mo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ke(tt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Js(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Js(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Js(r.field,r.dir==="asc"?0:1)));return new na(na.UNKNOWN_ID,this.collectionId,t,lc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function PM(n){var e,t;if(Z(n instanceof ve||n instanceof Re),n instanceof ve){if(n instanceof Kh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ve.create(n.field,"==",o)))||[];return Re.create(i,"or")}return n}let r=n.filters.map(i=>PM(i));return Re.create(r,n.op)}function HB(n){if(n.getFilters().length===0)return[];let e=N_(PM(n));return Z(kM(e)),x_(e)||R_(e)?[e]:e.getFilters()}function x_(n){return n instanceof ve}function R_(n){return n instanceof Re&&Ww(n)}function kM(n){return x_(n)||R_(n)||function(t){if(t instanceof Re&&i_(t)){for(let r of t.getFilters())if(!x_(r)&&!R_(r))return!1;return!0}return!1}(n)}function N_(n){if(Z(n instanceof ve||n instanceof Re),n instanceof ve)return n;if(n.filters.length===1)return N_(n.filters[0]);let e=n.filters.map(r=>N_(r)),t=Re.create(e,n.op);return t=sf(t),kM(t)?t:(Z(t instanceof Re),Z(ia(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>Xw(r,i)))}function Xw(n,e){let t;return Z(n instanceof ve||n instanceof Re),Z(e instanceof ve||e instanceof Re),t=n instanceof ve?e instanceof ve?function(i,o){return Re.create([i,o],"and")}(n,e):lA(n,e):e instanceof ve?lA(e,n):function(i,o){if(Z(i.filters.length>0&&o.filters.length>0),ia(i)&&ia(o))return XA(i,o.getFilters());let s=i_(i)?i:o,a=i_(i)?o:i,u=s.filters.map(l=>Xw(l,a));return Re.create(u,"or")}(n,e),sf(t)}function lA(n,e){if(ia(e))return XA(e,n.getFilters());{let t=e.filters.map(r=>Xw(n,r));return Re.create(t,"or")}}function sf(n){if(Z(n instanceof ve||n instanceof Re),n instanceof ve)return n;let e=n.getFilters();if(e.length===1)return sf(e[0]);if(ZA(n))return n;let t=e.map(i=>sf(i)),r=[];return t.forEach(i=>{i instanceof ve?r.push(i):i instanceof Re&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,n.op)}var P_=class{constructor(){this.un=new Dc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Dc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ke(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(Ie.comparator)).toArray()}};var Rh=new Uint8Array(0),k_=class{constructor(e,t){this.databaseId=t,this.cn=new Dc,this.ln=new lr(r=>To(r),(r,i)=>Nc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:$t(i)};return dA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[FA(t),""],!1,!0);return dA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(rr(s.parent))}return r})}addFieldIndex(e,t){let r=ec(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=qs(e);return o.next(a=>{s.put(oA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=ec(e),i=qs(e),o=Hs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ec(e),r=Hs(e),i=qs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new of(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Hs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(u,l)=>{V("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${To(t)}`);let h=function(j,J){let oe=Yv(J);if(oe===void 0)return null;for(let ee of Yh(j,oe.fieldPath))switch(ee.op){case"array-contains-any":return ee.value.arrayValue.values||[];case"array-contains":return[ee.value]}return null}(l,u),p=function(j,J){let oe=new Map;for(let ee of mo(J))for(let E of Yh(j,ee.fieldPath))switch(E.op){case"==":case"in":oe.set(ee.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return oe.set(ee.fieldPath.canonicalString(),E.value),Array.from(oe.values())}return null}(l,u),g=function(j,J){let oe=[],ee=!0;for(let E of mo(J)){let v=E.kind===0?qS(j,E.fieldPath,j.startAt):zS(j,E.fieldPath,j.startAt);oe.push(v.value),ee&&(ee=v.inclusive)}return new cr(oe,ee)}(l,u),y=function(j,J){let oe=[],ee=!0;for(let E of mo(J)){let v=E.kind===0?zS(j,E.fieldPath,j.endAt):qS(j,E.fieldPath,j.endAt);oe.push(v.value),ee&&(ee=v.inclusive)}return new cr(oe,ee)}(l,u),b=this.In(u,l,g),A=this.In(u,l,y),M=this.Tn(u,l,p),B=this.En(u.indexId,h,b,g.inclusive,A,y.inclusive,M);return S.forEach(B,G=>r.G(G,t.limit).next(j=>{j.forEach(J=>{let oe=q.fromSegments(J.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=HB(Re.create(e.filters,"and")).map(r=>f_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let g=t?this.dn(t[p/l]):Rh,y=this.An(e,g,r[p%l],i),b=this.Rn(e,g,o[p%l],s),A=a.map(M=>this.An(e,g,M,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new wo(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new wo(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new of(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new ke(tt.comparator),h=!1;for(let p of u.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new _o;for(let i of mo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);kr.vt.It(o,s)}return r.zt()}dn(e){let t=new _o;return kr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new _o;return kr.vt.It(Co(this.databaseId,t),r.Yt(function(o){let s=mo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new _o);let o=0;for(let s of mo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&gc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);kr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new _o;u.seed(a.zt()),kr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=ec(e),i=qs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let g=p?new lc(p.sequenceNumber,new Cn(Mo(p.readTime),new q(rr(p.documentKey)),p.largestBatchId)):lc.empty(),y=h.fields.map(([b,A])=>new Js(tt.fromServerFormat(b),A));return new na(h.indexId,h.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=ec(e),o=qs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(oA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Hs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Hs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Hs(e),o=new ke(vi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new wo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new ke(vi),i=this.Vn(t,e);if(i==null)return r;let o=Yv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(gc(s))for(let a of s.arrayValue.values||[])r=r.add(new wo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new wo(t.indexId,e.key,Rh,i));return r}bn(e,t,r,i,o){V("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,g){let y=u.getIterator(),b=l.getIterator(),A=$s(y),M=$s(b);for(;A||M;){let B=!1,G=!1;if(A&&M){let j=h(A,M);j<0?G=!0:j>0&&(B=!0)}else A!=null?G=!0:B=!0;B?(p(M),M=$s(b)):G?(g(A),A=$s(y)):(A=$s(y),M=$s(b))}}(i,o,vi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>vi(s,a)).filter((s,a,u)=>!a||vi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vi(s,e),u=vi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Rh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Rh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Q())).next(hA)}};function dA(n){return ft(n,"collectionParents")}function Hs(n){return ft(n,"indexEntries")}function ec(n){return ft(n,"indexConfiguration")}function qs(n){return ft(n,"indexState")}function hA(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Hw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}var fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function OM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,g)=>(a++,g.delete()));o.push(u.next(()=>{Z(a===1)}));let l=[];for(let h of t.mutations){let p=$A(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function af(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q();e=n.noDocument}return JSON.stringify(e).length}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var uf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ys(e),s=_i(e);return s.add({}).next(a=>{Z(typeof a=="number");let u=new yc(a,t,r,i),l=function(y,b,A){let M=A.baseMutations.map(G=>Ic(y.ct,G)),B=A.mutations.map(G=>Ic(y.ct,G));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:B}}(this.serializer,this.userId,u),h=[],p=new ke((g,y)=>ue(g.canonicalString(),y.canonicalString()));for(let g of i){let y=$A(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Qj))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return _i(e).get(t).next(r=>r?(Z(r.userId===this.userId),vo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _i(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Z(a.batchId>=r),o=vo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _i(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).U("userMutationsIndex",t).next(r=>r.map(i=>vo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Oh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ys(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,g=rr(h);if(l===this.userId&&t.path.isEqual(g))return _i(e).get(p).next(y=>{if(!y)throw Q();Z(y.userId===this.userId),o.push(vo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ke(ue),i=[];return t.forEach(o=>{let s=Oh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ys(e).J({range:a},(l,h,p)=>{let[g,y,b]=l,A=rr(y);g===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Oh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ke(ue);return Ys(e).J({range:s},(u,l,h)=>{let[p,g,y]=u,b=rr(g);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(_i(e).get(o).next(s=>{if(s===null)throw Q();Z(s.userId===this.userId),r.push(vo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ys(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=rr(o[1]);i.push(u)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return FM(e,this.userId,t)}Nn(e){return VM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function FM(n,e,t){let r=Oh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ys(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,g]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function _i(n){return ft(n,"mutations")}function Ys(n){return ft(n,"documentMutations")}function VM(n){return ft(n,"mutationQueues")}var ca=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var O_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>re.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return zs(e).J((s,a)=>{let u=ic(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return zs(e).J((r,i)=>{let o=ic(i);t(o)})}qn(e){return pA(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return pA(e).put("targetGlobalKey",t)}Kn(e,t){return zs(e).put(NM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=To(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=ic(a);Nc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=wi(e);return t.forEach(s=>{let a=$t(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=wi(e);return S.forEach(t,o=>{let s=$t(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=wi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wi(e),o=ce();return i.J({range:r,H:!0},(s,a,u)=>{let l=rr(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=$t(t.path),i=IDBKeyRange.bound([r],[FA(r)],!1,!0),o=0;return wi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return zs(e).get(t).next(r=>r?ic(r):null)}};function zs(n){return ft(n,"targets")}function pA(n){return ft(n,"targetGlobal")}function wi(n){return ft(n,"targetDocuments")}function gA([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var F_=class{constructor(e){this.Un=e,this.buffer=new ke(gA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();gA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},V_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oi(t)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ki(t)}yield this.Hn(3e5)}))}},L_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(dn.oe);let r=new F_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(fA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=Hn.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function qB(n,e){return new L_(n,e)}var j_=class{constructor(e,t){this.db=e,this.garbageCollector=qB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Nh(e,r)}removeReference(e,t,r){return Nh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nh(e,t)}nr(e,t){return function(i,o){let s=!1;return VM(i).Y(a=>FM(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,re.min()),wi(e).delete(function(p){return[0,$t(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nh(e,t)}tr(e,t){let r=wi(e),i,o=dn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==dn.oe&&t(new q(rr(i)),o),o=l,i=u):o=dn.oe}).next(()=>{o!==dn.oe&&t(new q(rr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nh(n,e){return wi(n).put(function(r,i){return{targetId:0,path:$t(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var cf=class{constructor(){this.changes=new lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var B_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return go(e).put(r)}removeEntry(e,t,r){return go(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ut.newInvalidDocument(t);return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tc(t))},(i,o)=>{r={document:this.ir(t,o),size:af(o)}}).next(()=>r)}getEntries(e,t){let r=Jt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Jt(),i=new Be(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,af(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new ke(vA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(tc(i.first()),tc(i.last())),s=i.getIterator(),a=s.getNext();return go(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&vA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(tc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return go(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Jt();for(let p of l){let g=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(kc(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Jt(),s=yA(t,r),a=yA(t,Cn.max());return go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new U_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mA(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return mA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=UB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return ut.newInvalidDocument(e)}};function LM(n){return new B_(n)}var U_=class extends cf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new lr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new ke((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=rA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=af(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=rA(this.cr.serializer,s.convertToNoDocument(re.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function mA(n){return ft(n,"remoteDocumentGlobal")}function go(n){return ft(n,"remoteDocumentsV14")}function tc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yA(n,e){let t=e.documentKey.path.toArray();return[n,nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ue(t[o],r[o]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var $_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,hn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=ir();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=rc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Jt(),s=sc(),a=function(){return sc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Bn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ac(h.mutation,l,h.mutation.getFieldMask(),ze.now())):s.set(l.key,hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new $_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new Be((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||hn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=uM();h.forEach(g=>{if(!o.has(g)){let y=gM(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(ir()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:aM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=rc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,g){return new jn(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ut.newInvalidDocument(h)))});let a=rc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ac(h.mutation,l,hn.empty(),ze.now()),kc(t,l)&&(a=a.insert(u,l))}),a})}};var H_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Jw(i.bundledQuery),readTime:nt(i.readTime)}}(t)),S.resolve()}};var q_=class{constructor(){this.overlays=new Be(q.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ir();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=ir(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ir(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ir(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var z_=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Cc=class{constructor(){this.Tr=new ke(st.Er),this.dr=new ke(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new st(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new st(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Ie([])),r=new st(t,e),i=new st(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Ie([])),r=new st(t,e),i=new st(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new st(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||ue(e.wr,t.wr)}static Ar(e,t){return ue(e.wr,t.wr)||q.comparator(e.key,t.key)}};var G_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ke(st.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ke(ue);return t.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new st(new q(o),0),a=new ke(ue);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new st(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new st(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var W_=class{constructor(e){this.Mr=e,this.docs=function(){return new Be(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Jt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Jt(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Hw(LA(h),r)<=0||(i.has(h.key)||kc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new K_(this)}getSize(e){return S.resolve(this.size)}},K_=class extends cf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Q_=class{constructor(e){this.persistence=e,this.Nr=new lr(t=>To(t),Nc),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cc,this.targetCount=0,this.kr=ca.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var df=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dn(0),this.Kr=!1,this.Kr=!0,this.$r=new z_,this.referenceDelegate=e(this),this.Ur=new Q_(this),this.indexManager=new P_,this.remoteDocumentCache=function(i){return new W_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tf(t),this.Gr=new H_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new G_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new Y_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Y_=class extends Hh{constructor(e){super(),this.currentSequenceNumber=e}},hf=class n{constructor(e){this.persistence=e,this.Jr=new Cc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Z_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new qh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0}),u.createObjectStore("documentMutations")}(e),_A(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),_A(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0});let p=l.store("mutations"),g=h.map(y=>p.put(y));return S.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:aB});l.createIndex("collectionPathOverlayIndex",uB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",cB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Yj});l.createIndex("documentKeyIndex",Zj),l.createIndex("collectionGroupIndex",Jj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:rB}).createIndex("sequenceNumberIndex",iB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:oB}).createIndex("documentKeyIndex",sB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=af(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Z(u.userId===o.userId);let l=vo(this.serializer,u);return OM(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ie(s),l=function(p){return[0,$t(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:$t(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:nB});let r=t.store("collectionParents"),i=new Dc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:$t(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ie(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=rr(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=ic(i),s=NM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new q(Ie.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):Q()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=LM(this.serializer),o=new df(hf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ce();vo(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new at(l),p=rf.lt(this.serializer,h),g=o.getIndexManager(h),y=uf.lt(h,this.serializer,g,o.referenceDelegate);return new lf(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new hc(t,dn.oe),u).next()})})}};function _A(n){n.createObjectStore("targetDocuments",{keyPath:eB}).createIndex("documentTargetsIndex",tB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xj,{unique:!0}),n.createObjectStore("targetGlobal")}var jv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",J_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new j_(this,i),this.Ai=t+"main",this.serializer=new tf(u),this.Ri=new bi(this.Ai,this.hi,new Z_(this.serializer)),this.$r=new T_,this.Ur=new O_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LM(this.serializer),this.Gr=new b_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,jv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ph(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Oi(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Ph(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ft(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,jv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ph(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new hc(e,dn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ph(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return uf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new k_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return rf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?hB:u===16?dB:u===15?zw:u===14?zA:u===13?qA:u===12?lB:u===11?HA:void Q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new hc(a,this.Qr?this.Qr.next():dn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,jA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return nc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,jv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nc(e).put("owner",t)}static D(){return bi.D()}bi(e){let t=nc(e);return t.get("owner").next(r=>this.vi(r)?(V("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Up()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function nc(n){return ft(n,"owner")}function Ph(n){return ft(n,"clientMetadata")}function eE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var X_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ew=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ff=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Up()?8:BA(Za())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ew;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Gs()<=Hn.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Gs()<=Hn.DEBUG&&V("QueryEngine","Query:",Ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=Hn.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(t))):S.resolve())}Yi(e,t){if(GS(t))return S.resolve(null);let r=Ht(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zh(t,null,"F"),r=Ht(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Zh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return GS(t)||i.isEqual(re.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Gs()<=Hn.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(t)),this.rs(e,s,t,VA(i,-1)).next(a=>a))})}ts(e,t){let r=new ke(oM(e));return t.forEach((i,o)=>{kc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Gs()<=Hn.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Be(ue),this._s=new lr(o=>To(o),Nc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function jM(n,e,t,r){return new tw(n,e,t,r)}function BM(n,e){return N(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function zB(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=S.resolve();return g.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let M=l.docVersions.get(b);Z(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function UM(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function GB(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,B){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Jt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($M(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function $M(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Jt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function WB(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function la(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function da(n,e,t){return N(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Oi(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function pf(n,e,t){let r=H(n),i=re.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=H(u),g=p._s.get(h);return g!==void 0?S.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,s,Ht(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:re.min(),t?o:ce())).next(a=>(zM(r,iM(e),a),{documents:a,Ts:o})))}function HM(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function qM(n,e){let t=H(n),r=t.us.get(e)||re.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,VA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zM(t,e,i),i))}function zM(n,e,t){let r=n.us.get(e)||re.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function KB(n,e,t,r){return N(this,null,function*(){let i=H(n),o=ce(),s=Jt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield la(i,function(h){return Ht(_a(Ie.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>$M(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function QB(r,i){return N(this,arguments,function*(n,e,t=ce()){let o=yield la(n,Ht(Jw(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=nt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(rt.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function wA(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bv(n,e){return`firestore_targets_${n}_${e}`}var gf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(et("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},uc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mf=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Qw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=UA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},nw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}},bc=class{constructor(){this.activeTargetIds=Qw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},cc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Be(ue),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=wA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new bc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(wA(this.persistenceKey,r));if(i){let o=mf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Bv(this.persistenceKey,e));if(i){let o=uc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return V("SharedClientState","READ",e,t),t}setItem(e,t){V("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(V("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=dn.oe;if(o!=null)try{let a=JSON.parse(o);Z(typeof a=="number"),s=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==dn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new gf(this.currentUser,e,t,r),o=EA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Bv(this.persistenceKey,e),o=new uc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return mf.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return gf.Rs(new at(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return uc.Rs(i,t)}Ls(e){return nw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Qw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},yf=class{constructor(){this.so=new bc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rw=class{_o(e){}shutdown(){}};var vf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kh=null;function Uv(){return kh===null?kh=function(){return 268435456+Math.round(2147483648*Math.random())}():kh++,"0x"+kh.toString(16)}var YB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var iw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Nt="WebChannelConnection",ow=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Uv(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(V("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ln("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=YB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Uv();return new Promise((s,a)=>{let u=new Pv;u.setWithCredentials(!0),u.listenOnce(kv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ju.NO_ERROR:let h=u.getResponseJson();V(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ju.TIMEOUT:V(Nt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:let p=u.getStatus();if(V(Nt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let b=function(M){let B=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(B)>=0?B:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{V(Nt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);V(Nt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Uv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Vv(),a=Fv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),g=!1,y=!1,b=new iw({Io:M=>{y?V(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||(V(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(Nt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,B,G)=>{M.listen(B,j=>{try{G(j)}catch(J){setTimeout(()=>{throw J},0)}})};return A(p,Us.EventType.OPEN,()=>{y||(V(Nt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,Us.EventType.CLOSE,()=>{y||(y=!0,V(Nt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,Us.EventType.ERROR,M=>{y||(y=!0,Ln(Nt,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Us.EventType.MESSAGE,M=>{var B;if(!y){let G=M.data[0];Z(!!G);let j=G,J=j.error||((B=j[0])===null||B===void 0?void 0:B.error);if(J){V(Nt,`RPC '${e}' stream ${i} received error:`,J);let oe=J.status,ee=function(w){let I=ot[w];if(I!==void 0)return vM(I)}(oe),E=J.message;ee===void 0&&(ee=R.INTERNAL,E="Unknown error status: "+oe+" with message "+J.message),y=!0,b.So(new k(ee,E)),p.close()}else V(Nt,`RPC '${e}' stream ${i} received:`,G),b.bo(G)}}),A(a,Ov.STAT_EVENT,M=>{M.stat===xh.PROXY?V(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===xh.NOPROXY&&V(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function GM(){return typeof window<"u"?window:null}function jh(){return typeof document<"u"?document:null}function Oc(n){return new w_(n,!0)}var Tc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var _f=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(et(t.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sw=class extends _f{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=kB(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?nt(s.readTime):re.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=D_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Qh(u)?{documents:TM(o,u)}:{query:SM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wM(o,s.resumeToken);let l=E_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=aa(o,s.snapshotVersion.toTimestamp());let l=E_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=FB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=D_(this.serializer),t.removeTarget=e,this.a_(t)}},aw=class extends _f{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=OB(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=D_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ic(this.serializer,r))};this.a_(t)}};var uw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,I_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,I_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},cw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(et(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var lw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Fi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=H(u);l.L_.add(4),yield wa(l),l.q_.set("Unknown"),l.L_.delete(4),yield Fc(l)})}(this))}))}),this.q_=new cw(r,i)}};function Fc(n){return N(this,null,function*(){if(Fi(n))for(let e of n.B_)yield e(!0)})}function wa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Bf(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),rE(t)?nE(t):Ia(t).r_()&&tE(t,e))}function ha(n,e){let t=H(n),r=Ia(t);t.N_.delete(e),r.r_()&&WM(t,e),t.N_.size===0&&(r.r_()?r.o_():Fi(t)&&t.q_.set("Unknown"))}function tE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).A_(e)}function WM(n,e){n.Q_.xe(e),Ia(n).R_(e)}function nE(n){n.Q_=new __({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.q_.v_()}function rE(n){return Fi(n)&&!Ia(n).n_()&&n.N_.size>0}function Fi(n){return H(n).L_.size===0}function KM(n){n.Q_=void 0}function ZB(n){return N(this,null,function*(){n.q_.set("Online")})}function JB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{tE(n,e)})})}function XB(n,e){return N(this,null,function*(){KM(n),rE(n)?(n.q_.M_(e),nE(n)):n.q_.set("Unknown")})}function eU(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Xh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wf(n,r)}else if(e instanceof ea?n.Q_.Ke(e):e instanceof Jh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(re.min()))try{let r=yield UM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),WM(o,u);let p=new ua(h.target,u,l,h.sequenceNumber);tE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield wf(n,r)}})}function wf(n,e,t){return N(this,null,function*(){if(!Oi(e))throw e;n.L_.add(1),yield wa(n),n.q_.set("Offline"),t||(t=()=>UM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Fc(n)}))})}function QM(n,e){return e().catch(t=>wf(n,t,e))}function Ea(n){return N(this,null,function*(){let e=H(n),t=Pi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tU(e);)try{let i=yield WB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,nU(e,i)}catch(i){yield wf(e,i)}YM(e)&&ZM(e)})}function tU(n){return Fi(n)&&n.O_.length<10}function nU(n,e){n.O_.push(e);let t=Pi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function YM(n){return Fi(n)&&!Pi(n).n_()&&n.O_.length>0}function ZM(n){Pi(n).start()}function rU(n){return N(this,null,function*(){Pi(n).p_()})}function iU(n){return N(this,null,function*(){let e=Pi(n);for(let t of n.O_)e.m_(t.mutations)})}function oU(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=m_.from(r,e,t);yield QM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ea(n)})}function sU(n,e){return N(this,null,function*(){e&&Pi(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return yM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Pi(r).s_(),yield QM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ea(r)}})}(n,e)),YM(n)&&ZM(n)})}function IA(n,e){return N(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Fi(t);t.L_.add(3),yield wa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Fc(t)})}function dw(n,e){return N(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield Fc(t)):e||(t.L_.add(2),yield wa(t),t.q_.set("Unknown"))})}function Ia(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new sw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:ZB.bind(null,n),Ro:JB.bind(null,n),mo:XB.bind(null,n),d_:eU.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),rE(n)?nE(n):n.q_.set("Unknown")):(yield n.K_.stop(),KM(n))}))),n.K_}function Pi(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new aw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rU.bind(null,n),mo:sU.bind(null,n),f_:iU.bind(null,n),g_:oU.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ea(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var hw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Da(n,e){if(et("AsyncQueue",`${e}: ${n}`),Oi(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Ef=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=rc(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var If=class{constructor(){this.W_=new Be(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ef.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var fw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},pw=class{constructor(){this.queries=DA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=DA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function DA(){return new lr(n=>rM(n),Pc)}function iE(n,e){return N(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new fw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Da(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&sE(t)})}function oE(n,e){return N(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function aU(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&sE(t)}function uU(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function sE(n){n.Y_.forEach(e=>{e.next()})}var gw,CA;(CA=gw||(gw={})).ea="default",CA.Cache="cache";var Sc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gw.Cache}};var mw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Df=class{constructor(e){this.serializer=e}Es(e){return sr(this.serializer,e)}ds(e){return e.metadata.exists?bM(this.serializer,e.document,!1):ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nt(e)}},yw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ie.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Df(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield KB(this.localStore,new Df(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield QB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function JM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Cf=class{constructor(e){this.key=e}},bf=class{constructor(e){this.key=e}},Tf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=oM(e),this.Ra=new Ef(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new If,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=kc(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(g,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new fa(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new If,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new bf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Cf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},vw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},_w=class{constructor(e){this.key=e,this.va=!1}},ww=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new lr(a=>rM(a),Pc),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(q.comparator),this.Na=new Map,this.La=new Cc,this.Ba={},this.ka=new Map,this.qa=ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function cU(n,e,t=!0){return N(this,null,function*(){let r=Uf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield XM(r,e,t,!0),i})}function lU(n,e){return N(this,null,function*(){let t=Uf(n);yield XM(t,e,!0,!1)})}function XM(n,e,t,r){return N(this,null,function*(){let i=yield la(n.localStore,Ht(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield aE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Bf(n.remoteStore,i),a})}function aE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,g,y)=>function(A,M,B,G){return N(this,null,function*(){let j=M.view.ma(B);j.ns&&(j=yield pf(A.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,j)));let J=G&&G.targetChanges.get(M.targetId),oe=G&&G.targetMismatches.get(M.targetId)!=null,ee=M.view.applyChanges(j,A.isPrimaryClient,J,oe);return Ew(A,M.targetId,ee.wa),ee.snapshot})}(n,p,g,y);let o=yield pf(n.localStore,e,!0),s=new Tf(e,o.Ts),a=s.ma(o.documents),u=wc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Ew(n,t,l.wa);let h=new vw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function dU(n,e,t){return N(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Pc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield da(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ha(r.remoteStore,i.targetId),pa(r,i.targetId)}).catch(ki))):(pa(r,i.targetId),yield da(r.localStore,i.targetId,!0))})}function hU(n,e){return N(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ha(t.remoteStore,r.targetId))})}function fU(n,e,t){return N(this,null,function*(){let r=dE(n);try{let i=yield function(s,a){let u=H(s),l=ze.now(),h=a.reduce((y,b)=>y.add(b.key),ce()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Jt(),A=ce();return u.cs.getEntries(y,h).next(M=>{b=M,b.forEach((B,G)=>{G.isValidDocument()||(A=A.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(M=>{p=M;let B=[];for(let G of a){let j=SB(G,p.get(G.key).overlayedDocument);j!=null&&B.push(new Bn(G.key,j,YA(j.value.mapValue),Ze.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,B,a)}).next(M=>{g=M;let B=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,B)})}).then(()=>({batchId:g.batchId,changes:aM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Be(ue)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ur(r,i.changes),yield Ea(r.remoteStore)}catch(i){let o=Da(i,"Failed to persist write");t.reject(o)}})}function ex(n,e){return N(this,null,function*(){let t=H(n);try{let r=yield GB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Z(s.va):i.removedDocuments.size>0&&(Z(s.va),s.va=!1))}),yield Ur(t,r,e)}catch(r){yield ki(r)}})}function bA(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=H(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&sE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pU(n,e,t){return N(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Be(q.comparator);s=s.insert(o,ut.newNoDocument(o,re.min()));let a=ce().add(o),u=new _c(re.min(),new Map,new Be(ue),s,a);yield ex(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),lE(r)}else yield da(r.localStore,e,!1).then(()=>pa(r,e,t)).catch(ki)})}function gU(n,e){return N(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield zB(t.localStore,e);cE(t,r,null),uE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ur(t,i)}catch(i){yield ki(i)}})}function mU(n,e,t){return N(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let u=H(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Z(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);cE(r,e,t),uE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ur(r,i)}catch(i){yield ki(i)}})}function yU(n,e){return N(this,null,function*(){let t=H(n);Fi(t.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Da(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function uE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function cE(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||tx(n,r)})}function tx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ha(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),lE(n))}function Ew(n,e,t){for(let r of t)r instanceof Cf?(n.La.addReference(r.key,e),vU(n,r)):r instanceof bf?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||tx(n,r.key)):Q()}function vU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),lE(n))}function lE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Ie.fromString(e)),r=n.qa.next();n.Na.set(r,new _w(t)),n.Oa=n.Oa.insert(t,r),Bf(n.remoteStore,new ua(Ht(_a(t.path)),r,"TargetPurposeLimboResolution",dn.oe))}}function Ur(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=X_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=H(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,g=>S.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>S.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Oi(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(g,A)}}})}(r.localStore,o))})}function _U(n,e){return N(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield BM(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ur(t,r.hs)}})}function wU(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function EU(n,e){return N(this,null,function*(){let t=H(n),r=yield pf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Ew(t,e.targetId,i.wa),i})}function IU(n,e){return N(this,null,function*(){let t=H(n);return qM(t.localStore,e).then(r=>Ur(t,r))})}function DU(n,e,t,r){return N(this,null,function*(){let i=H(n),o=yield function(a,u){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(g=>g?l.localDocuments.getDocuments(p,g):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(cE(i,e,r||null),uE(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):Q(),yield Ur(i,o)):V("SyncEngine","Cannot apply mutation batch with id: "+e)})}function CU(n,e){return N(this,null,function*(){let t=H(n);if(Uf(t),dE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield TA(t,r.toArray());t.Qa=!0,yield dw(t.remoteStore,!0);for(let o of i)Bf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(pa(t,s),da(t.localStore,s,!0))),ha(t.remoteStore,s)}),yield i,yield TA(t,r),function(s){let a=H(s);a.Na.forEach((u,l)=>{ha(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Be(q.comparator)}(t),t.Qa=!1,yield dw(t.remoteStore,!1)}})}function TA(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield la(r.localStore,Ht(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield EU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield HM(r.localStore,s);a=yield la(r.localStore,l),yield aE(r,nx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function nx(n){return nM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bU(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function TU(n,e,t,r){return N(this,null,function*(){let i=H(n);if(i.Qa)return void V("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield qM(i.localStore,iM(o[0])),a=_c.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);yield Ur(i,s,a);break}case"rejected":yield da(i.localStore,e,!0),pa(i,e,r);break;default:Q()}})}function SU(n,e,t){return N(this,null,function*(){let r=Uf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){V("SyncEngine","Adding an already active target "+i);continue}let o=yield HM(r.localStore,i),s=yield la(r.localStore,o);yield aE(r,nx(o),s.targetId,!1,s.resumeToken),Bf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield da(r.localStore,i,!1).then(()=>{ha(r.remoteStore,i),pa(r,i)}).catch(ki))}})}function Uf(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pU.bind(null,e),e.Ca.d_=aU.bind(null,e.eventManager),e.Ca.$a=uU.bind(null,e.eventManager),e}function dE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mU.bind(null,e),e}function AU(n,e,t){let r=H(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=H(y),M=nt(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",B=>A.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(JM(u));let l=new yw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield s.Ua()}let p=yield l.complete();return yield Ur(o,p.Ia,void 0),yield function(y,b){let A=H(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Ln("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Iw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Oc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return jM(this.persistence,new ff,t.initialUser,this.serializer)}Ga(t){return new df(hf.Zr,this.serializer)}Wa(t){return new yf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Sf=class n extends Iw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield jp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield dE(this.Ja.syncEngine),yield Ea(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return jM(this.persistence,new ff,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new V_(r,e.asyncQueue,t)}Ha(e,t){let r=new e_(t,this.persistence);return new Xv(e.asyncQueue,r)}Ga(e){let t=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new J_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GM(),jh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new yf}},Dw=class n extends Sf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield jp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof cc&&(this.sharedClientState.syncEngine={no:DU.bind(null,t),ro:TU.bind(null,t),io:SU.bind(null,t),Qi:bU.bind(null,t),eo:IU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield CU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=GM();if(!cc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},hE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_U.bind(null,this.syncEngine),yield dw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new pw}()}createDatastore(t){let r=Oc(t.databaseInfo.databaseId),i=function(s){return new ow(s)}(t.databaseInfo);return function(s,a,u,l){return new uw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new lw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>bA(this.syncEngine,r,0),function(){return vf.D()?new vf:new rw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new ww(o,s,a,u,l,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=H(o);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function SA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Cw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ht,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new mw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var bw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=H(i),a={documents:o.map(p=>Ec(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ie.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=PB(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());Z(!!g),h.push(g)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ni(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new mc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=H(r),s={writes:i.map(a=>Ic(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q();t=re.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(re.min())?Ze.exists(!1):Ze.updateTime(t):Ze.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(re.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ze.updateTime(t)}return Ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Tw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Tc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new bw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!yM(t)}return!1}};var Sw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=Uh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Da(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $v(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield BM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function AA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fE(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>IA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>IA(e.remoteStore,i)),n._onlineComponents=e})}function fE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $v(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ln("Error using user provided cache. Falling back to memory cache: "+t),yield $v(n,new Iw)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield $v(n,new Iw);return n._offlineComponents})}function $f(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield AA(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield AA(n,new hE))),n._onlineComponents})}function rx(n){return fE(n).then(e=>e.persistence)}function pE(n){return fE(n).then(e=>e.localStore)}function ix(n){return $f(n).then(e=>e.remoteStore)}function gE(n){return $f(n).then(e=>e.syncEngine)}function MU(n){return $f(n).then(e=>e.datastore)}function ma(n){return N(this,null,function*(){let e=yield $f(n),t=e.eventManager;return t.onListen=cU.bind(null,e.syncEngine),t.onUnlisten=dU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hU.bind(null,e.syncEngine),t})}function xU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),Fc(o)}(t)}))}function RU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=H(i);o.L_.add(0),yield wa(o),o.q_.set("Offline")})}(t)}))}function NU(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Da(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield pE(n),e,t)})),t.promise}function ox(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:g=>{h.Za(),s.enqueueAndForget(()=>oE(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Sc(_a(a.path),h,{includeMetadataChanges:!0,_a:!0});return iE(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function PU(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield pf(i,o,!0),u=new Tf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Da(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield pE(n),e,t)})),t.promise}function sx(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:g=>{h.Za(),s.enqueueAndForget(()=>oE(o,p)),g.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Sc(a,h,{includeMetadataChanges:!0,_a:!0});return iE(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function kU(n,e){let t=new ga(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield ma(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield ma(n),t)}))}}function OU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?_M().encode(s):s,function(h,p){return new Cw(h,p)}(function(h,p){if(h instanceof Uint8Array)return SA(h,p);if(h instanceof ArrayBuffer)return SA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Oc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){AU(yield gE(n),i,r)}))}function FU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield pE(n),e)}))}function ax(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MA=new Map;function mE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xA(n){if(!q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RA(n){if(q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Hf(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ux(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Af=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Af({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Af(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hv;switch(r.type){case"firstParty":return new Wv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MA.get(t);r&&(V("ComponentProvider","Removing Datastore"),MA.delete(t),r.terminate())}(this),Promise.resolve()}};function cx(n,e,t,r={}){var i;let o=(n=Te(n,xo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=at.MOCK_USER;else{a=QI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(l)}n._authCredentials=new qv(new Bh(a,u))}}var It=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Fe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ar=class n extends It{constructor(e,t,r){super(e,t,_a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vE(n,e,...t){if(n=He(n),mE("collection","path",e),n instanceof xo){let r=Ie.fromString(e,...t);return RA(r),new ar(n,null,r)}{if(!(n instanceof Fe||n instanceof ar))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return RA(r),new ar(n.firestore,null,r)}}function lx(n,e){if(n=Te(n,xo),mE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new It(n,null,function(r){return new jn(Ie.emptyPath(),r)}(e))}function Vc(n,e,...t){if(n=He(n),arguments.length===1&&(e=Uh.newId()),mE("doc","path",e),n instanceof xo){let r=Ie.fromString(e,...t);return xA(r),new Fe(n,null,new q(r))}{if(!(n instanceof Fe||n instanceof ar))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return xA(r),new Fe(n.firestore,n instanceof ar?n.converter:null,new q(r))}}function _E(n,e){return n=He(n),e=He(e),(n instanceof Fe||n instanceof ar)&&(e instanceof Fe||e instanceof ar)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wE(n,e){return n=He(n),e=He(e),n instanceof It&&e instanceof It&&n.firestore===e.firestore&&Pc(n._query,e._query)&&n.converter===e.converter}var Mf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tc(this,"async_queue_retry"),this.Vu=()=>{let r=jh();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=jh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=jh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ht;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oi(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=hw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Aw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Mw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var dx=-1,Ge=class extends xo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mf(e),this._firestoreClient=void 0,yield e}})}};function Dt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hx(n),n._firestoreClient}function hx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new t_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ax(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Sw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function fx(n,e){Ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return gx(n,hE.provider,{build:r=>new Sf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function px(n){return N(this,null,function*(){Ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();gx(n,hE.provider,{build:t=>new Dw(t,e.cacheSizeBytes)})})}function gx(n,e,t){if((n=Te(n,Ge))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},hx(n)}function mx(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ht;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!bi.D())return Promise.resolve();let i=r+"main";yield bi.delete(i)})}(eE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function yx(n){return function(t){let r=new ht;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return yU(yield gE(t),r)})),r.promise}(Dt(n=Te(n,Ge)))}function vx(n){return xU(Dt(n=Te(n,Ge)))}function _x(n){return RU(Dt(n=Te(n,Ge)))}function wx(n,e){let t=Dt(n=Te(n,Ge)),r=new Mw;return OU(t,n._databaseId,e,r),r}function Ex(n,e){return FU(Dt(n=Te(n,Ge)),e).then(t=>t?new It(n,null,t.query):null)}var dr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Un=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var jr=class{constructor(e){this._methodName=e}};var Ro=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Ac=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var VU=/^__.*__$/,xw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ri(e,this.data,t,this.fieldTransforms)}},xf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ix(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Rf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ix(this.Cu)&&VU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Rw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Oc(e)}Qu(e,t,r,i=!1){return new Rf({Cu:e,methodName:t,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oo(n){let e=n._freezeSettings(),t=Oc(n._databaseId);return new Rw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);DE("Data must be an object, but it was:",s,r);let a=bx(r,s),u,l;if(o.merge)u=new hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Fw(e,p,t);if(!s.contains(g))throw new k(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Sx(h,g)||h.push(g)}u=new hn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new xw(new Pt(a),u,l)}var Mc=class n extends jr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Dx(n,e,t){return new Rf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Nw=class n extends jr{_toFieldTransform(e){return new So(e.path,new Mi)}isEqual(e){return e instanceof n}},Pw=class n extends jr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Dx(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new Vr(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&$p(this.Ku,e.Ku)}},kw=class n extends jr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Dx(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new Lr(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&$p(this.Ku,e.Ku)}},Ow=class n extends jr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new xi(e.serializer,lM(e.serializer,this.$u));return new So(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function EE(n,e,t,r){let i=n.Qu(1,e,t);DE("Data must be an object, but it was:",i,r);let o=[],s=Pt.empty();ko(r,(u,l)=>{let h=CE(e,u,t);l=He(l);let p=i.Nu(h);if(l instanceof Mc)o.push(h);else{let g=Fo(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new hn(o);return new xf(s,a,i.fieldTransforms)}function IE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Fw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Fw(e,o[g])),u.push(o[g+1]);let l=[],h=Pt.empty();for(let g=a.length-1;g>=0;--g)if(!Sx(l,a[g])){let y=a[g],b=u[g];b=He(b);let A=s.Nu(y);if(b instanceof Mc)l.push(y);else{let M=Fo(b,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new hn(l);return new xf(h,p,s.fieldTransforms)}function Cx(n,e,t,r=!1){return Fo(t,n.Qu(r?4:3,e))}function Fo(n,e){if(Tx(n=He(n)))return DE("Unsupported field value:",e,n),bx(n,e);if(n instanceof jr)return function(r,i){if(!Ix(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Fo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:aa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aa(i.serializer,o)}}if(r instanceof Ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:wM(i.serializer,r._byteString)};if(r instanceof Fe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Zw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ac)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Yw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hf(r)}`)}(n,e)}function bx(n,e){let t={};return GA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{let o=Fo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Tx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof Ro||n instanceof dr||n instanceof Fe||n instanceof jr||n instanceof Ac)}function DE(n,e,t){if(!Tx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Hf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Fw(n,e,t){if((e=He(e))instanceof Un)return e._internalPath;if(typeof e=="string")return CE(n,e);throw Nf("Field path arguments must be of type string or ",n,!1,void 0,t)}var LU=new RegExp("[~\\*/\\[\\]]");function CE(n,e,t){if(e.search(LU)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Un(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function Sx(n,e){return n.some(t=>t.isEqual(e))}var No=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Vw=class extends No{data(){return super.data()}};function zf(n,e){return typeof e=="string"?CE(n,e):e instanceof Un?e._internalPath:e._delegate._internalPath}function Ax(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xc=class{},Po=class extends xc{};function $r(n,e,...t){let r=[];e instanceof xc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Lw).length,a=o.filter(u=>u instanceof Pf).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Pf=class n extends Po{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Lx(e._query,t),new It(e.firestore,e.converter,p_(e._query,t))}_parse(e){let t=Oo(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PA(p,h);let y=[];for(let b of p)y.push(NA(u,o,b));g={arrayValue:{values:y}}}else g=NA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PA(p,h),g=Cx(a,s,p,h==="in"||h==="not-in");return ve.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Mx(n,e,t){let r=e,i=zf("where",n);return Pf._create(i,r,t)}var Lw=class n extends xc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Re.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Lx(s,u),s=p_(s,u)}(e._query,t),new It(e.firestore,e.converter,p_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var jw=class n extends Po{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(o,s)}(e._query,this._field,this._direction);return new It(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new jn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function xx(n,e="asc"){let t=e,r=zf("orderBy",n);return jw._create(r,t)}var kf=class n extends Po{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new It(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}};function Rx(n){return ux("limit",n),kf._create("limit",n,"F")}function Nx(n){return ux("limitToLast",n),kf._create("limitToLast",n,"L")}var Of=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Vx(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Px(...n){return Of._create("startAt",n,!0)}function kx(...n){return Of._create("startAfter",n,!1)}var Ff=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Vx(e,this.type,this._docOrFields,this._inclusive);return new It(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Ox(...n){return Ff._create("endBefore",n,!1)}function Fx(...n){return Ff._create("endAt",n,!0)}function Vx(n,e,t,r){if(t[0]=He(t[0]),t[0]instanceof No)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Xs(o))if(p.field.isKeyField())h.push(Co(s,u.key));else{let g=u.data.field(p.field);if(Lf(g))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new cr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Oo(n.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(g[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Kw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(Ie.fromString(A));if(!q.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let B=new q(M);y.push(Co(a,B))}else{let M=Cx(u,l,A);y.push(M)}}return new cr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NA(n,e,t){if(typeof(t=He(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ie.fromString(t));if(!q.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Co(n,new q(r))}if(t instanceof Fe)return Co(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function PA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ya=class{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>$e(s.doubleValue));return new Ac(o)}convertGeoPoint(e){return new Ro($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Gw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){let t=Fr(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);Z(RM(r));let i=new Si(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||et(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Gf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Bw=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,t)}};var Or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bn=class extends No{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Di=class extends bn{data(e={}){return super.data(e)}},$n=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Di(this._firestore,this._userDataWriter,r.key,r,new Or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:jU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function jU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function bE(n,e){return n instanceof bn&&e instanceof bn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $n&&e instanceof $n&&n._firestore===e._firestore&&wE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function jx(n){n=Te(n,Fe);let e=Te(n.firestore,Ge);return ox(Dt(e),n._key).then(t=>ME(e,n,t))}var Br=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,t)}};function Bx(n){n=Te(n,Fe);let e=Te(n.firestore,Ge),t=Dt(e),r=new Br(e);return NU(t,n._key).then(i=>new bn(e,r,n._key,i,new Or(i!==null&&i.hasLocalMutations,!0),n.converter))}function Ux(n){n=Te(n,Fe);let e=Te(n.firestore,Ge);return ox(Dt(e),n._key,{source:"server"}).then(t=>ME(e,n,t))}function $x(n){n=Te(n,It);let e=Te(n.firestore,Ge),t=Dt(e),r=new Br(e);return Ax(n._query),sx(t,n._query).then(i=>new $n(e,r,n,i))}function Hx(n){n=Te(n,It);let e=Te(n.firestore,Ge),t=Dt(e),r=new Br(e);return PU(t,n._query).then(i=>new $n(e,r,n,i))}function qx(n){n=Te(n,It);let e=Te(n.firestore,Ge),t=Dt(e),r=new Br(e);return sx(t,n._query,{source:"server"}).then(i=>new $n(e,r,n,i))}function TE(n,e,t){n=Te(n,Fe);let r=Te(n.firestore,Ge),i=Gf(n.converter,e,t);return Ca(r,[qf(Oo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ze.none())])}function SE(n,e,t,...r){n=Te(n,Fe);let i=Te(n.firestore,Ge),o=Oo(i),s;return s=typeof(e=He(e))=="string"||e instanceof Un?IE(o,"updateDoc",n._key,e,t,r):EE(o,"updateDoc",n._key,e),Ca(i,[s.toMutation(n._key,Ze.exists(!0))])}function zx(n){return Ca(Te(n.firestore,Ge),[new Ni(n._key,Ze.none())])}function Gx(n,e){let t=Te(n.firestore,Ge),r=Vc(n),i=Gf(n.converter,e);return Ca(t,[qf(Oo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function AE(n,...e){var t,r,i;n=He(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Aw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Fe)l=Te(n.firestore,Ge),h=_a(n._key.path),u={next:p=>{e[s]&&e[s](ME(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Te(n,It);l=Te(p.firestore,Ge),h=p._query;let g=new Br(l);u={next:y=>{e[s]&&e[s](new $n(l,g,p,y))},error:e[s+1],complete:e[s+2]},Ax(n._query)}return function(g,y,b,A){let M=new ga(A),B=new Sc(y,M,b);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return iE(yield ma(g),B)})),()=>{M.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return oE(yield ma(g),B)}))}}(Dt(l),h,a,u)}function Wx(n,e){return kU(Dt(n=Te(n,Ge)),Aw(e)?e:{next:e})}function Ca(n,e){return function(r,i){let o=new ht;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return fU(yield gE(r),i,o)})),o.promise}(Dt(n),e)}function ME(n,e,t){let r=t.docs.get(e._key),i=new Br(n);return new bn(n,i,e._key,r,new Or(t.hasPendingWrites,t.fromCache),e.converter)}var BU={maxAttempts:5};var Vf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,t,r){this._verifyNotCommitted();let i=Ei(e,this._firestore),o=Gf(i.converter,t,r),s=qf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ze.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ei(e,this._firestore),s;return s=typeof(t=He(t))=="string"||t instanceof Un?IE(this._dataReader,"WriteBatch.update",o._key,t,r,i):EE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ei(e,this._firestore);return this._mutations=this._mutations.concat(new Ni(t._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ei(n,e){if((n=He(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Uw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Oo(t)}get(t){let r=Ei(t,this._firestore),i=new Bw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Q();let s=o[0];if(s.isFoundDocument())return new No(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new No(this._firestore,i,r._key,null,r.converter);throw Q()})}set(t,r,i){let o=Ei(t,this._firestore),s=Gf(o.converter,r,i),a=qf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Ei(t,this._firestore),a;return a=typeof(r=He(r))=="string"||r instanceof Un?IE(this._dataReader,"Transaction.update",s._key,r,i,o):EE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Ei(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ei(e,this._firestore),r=new Br(this._firestore);return super.get(e).then(i=>new bn(this._firestore,r,t._key,i._document,new Or(!1,!1),t.converter))}};function Kx(n,e,t){n=Te(n,Ge);let r=Object.assign(Object.assign({},BU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new ht;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield MU(o);new Tw(o.asyncQueue,l,a,s,u).au()})),u.promise}(Dt(n),i=>e(new Uw(n,i)),r)}function Qx(){return new Mc("deleteField")}function Yx(){return new Nw("serverTimestamp")}function Zx(...n){return new Pw("arrayUnion",n)}function Jx(...n){return new kw("arrayRemove",n)}function Xx(n){return new Ow("increment",n)}(function(e,t=!0){(function(i){va=i})(JI),Ja(new Ui("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ge(new zv(r.getProvider("auth-internal")),new Qv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Wr(RS,"4.7.3",e),Wr(RS,"4.7.3","esm2017")})();var UU="@firebase/firestore-compat",$U="0.3.38";function OE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eR(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!WA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Wf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new n(dr.fromBase64String(e))}static fromUint8Array(e){return eR(),new n(dr.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function xE(n){return HU(n,["next","error","complete"])}function HU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var RE=class{enableIndexedDbPersistence(e,t){return fx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return px(e._delegate)}clearIndexedDbPersistence(e){return mx(e._delegate)}},Kf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Si||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){cx(this._delegate,e,t,r)}enableNetwork(){return vx(this._delegate)}disableNetwork(){return _x(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return yx(this._delegate)}onSnapshotsInSync(e){return Wx(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sa(this,vE(this._delegate,e))}catch(t){throw qt(t,"collection()","Firestore.collection()")}}doc(e){try{return new hr(this,Vc(this._delegate,e))}catch(t){throw qt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bo(this,lx(this._delegate,e))}catch(t){throw qt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Kx(this._delegate,t=>e(new Qf(this,t)))}batch(){return Dt(this._delegate),new Yf(new Vf(this._delegate,e=>Ca(this._delegate,e)))}loadBundle(e){return wx(this._delegate,e)}namedQuery(e){return Ex(this._delegate,e).then(t=>t?new Bo(this,t):null)}},ba=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wf(new dr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return hr.forKey(t,this.firestore,null)}};function qU(n){kA(n)}var Qf=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}get(e){let t=Vo(e);return this._delegate.get(t).then(r=>new Lo(this._firestore,new bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Vo(e);return r?(OE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}},Yf=class{constructor(e){this._delegate=e}set(e,t,r){let i=Vo(e);return r?(OE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ta=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Di(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ba(e),t),i.set(t,o)),o}};Ta.INSTANCES=new WeakMap;var hr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Fe(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Fe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sa(this.firestore,vE(this._delegate,e))}catch(t){throw qt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=He(e),e instanceof Fe?_E(this._delegate,e):!1}set(e,t){t=OE("DocumentReference.set",t);try{return t?TE(this._delegate,e,t):TE(this._delegate,e)}catch(r){throw qt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?SE(this._delegate,e):SE(this._delegate,e,t,...r)}catch(i){throw qt(i,"updateDoc()","DocumentReference.update()")}}delete(){return zx(this._delegate)}onSnapshot(...e){let t=nR(e),r=rR(e,i=>new Lo(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return AE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Bx(this._delegate):e?.source==="server"?t=Ux(this._delegate):t=jx(this._delegate),t.then(r=>new Lo(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qt(n,e,t){return n.message=n.message.replace(e,t),n}function nR(n){for(let e of n)if(typeof e=="object"&&!xE(e))return e;return{}}function rR(n,e){var t,r;let i;return xE(n[0])?i=n[0]:xE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Lo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bE(this._delegate,e._delegate)}},jo=class extends Lo{data(e){let t=this._delegate.data(e);return this._delegate._converter||OA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Bo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}where(e,t,r){try{return new n(this.firestore,$r(this._delegate,Mx(e,t,r)))}catch(i){throw qt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,$r(this._delegate,xx(e,t)))}catch(r){throw qt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,$r(this._delegate,Rx(e)))}catch(t){throw qt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,$r(this._delegate,Nx(e)))}catch(t){throw qt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,$r(this._delegate,Px(...e)))}catch(t){throw qt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,$r(this._delegate,kx(...e)))}catch(t){throw qt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,$r(this._delegate,Ox(...e)))}catch(t){throw qt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,$r(this._delegate,Fx(...e)))}catch(t){throw qt(t,"endAt()","Query.endAt()")}}isEqual(e){return wE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Hx(this._delegate):e?.source==="server"?t=qx(this._delegate):t=$x(this._delegate),t.then(r=>new Lc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=nR(e),r=rR(e,i=>new Lc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return AE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},NE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Lc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jo(this._firestore,r))})}isEqual(e){return bE(this._delegate,e._delegate)}},Sa=class n extends Bo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new hr(this.firestore,e):null}doc(e){try{return e===void 0?new hr(this.firestore,Vc(this._delegate)):new hr(this.firestore,Vc(this._delegate,e))}catch(t){throw qt(t,"doc()","CollectionReference.doc()")}}add(e){return Gx(this._delegate,e).then(t=>new hr(this.firestore,t))}isEqual(e){return _E(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vo(n){return Te(n,Fe)}var PE=class n{constructor(...e){this._delegate=new Un(...e)}static documentId(){return new n(tt.keyField().canonicalString())}isEqual(e){return e=He(e),e instanceof Un?this._delegate._internalPath.isEqual(e._internalPath):!1}};var kE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Yx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Qx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Zx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Jx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Xx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var zU={Firestore:Kf,GeoPoint:Ro,Timestamp:ze,Blob:Wf,Transaction:Qf,WriteBatch:Yf,DocumentReference:hr,DocumentSnapshot:Lo,Query:Bo,QueryDocumentSnapshot:jo,QuerySnapshot:Lc,CollectionReference:Sa,FieldPath:PE,FieldValue:kE,setLogLevel:qU,CACHE_SIZE_UNLIMITED:dx};function GU(n,e){n.INTERNAL.registerComponent(new Ui("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zU)))}function WU(n){GU(n,(e,t)=>new Kf(e,t,new RE)),n.registerVersion(UU,$U)}WU(on);function KU(n,e=iu){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function iR(n,e){return KU(n,e)}function QU(n,e){return iR(n,e).pipe(Wi(void 0),au(),Y(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function LE(n,e){return iR(n,e).pipe(Y(t=>({payload:t,type:"query"})))}var Zf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=aR(r,t);return new Xf(i,o,this.afs)}snapshotChanges(){return QU(this.ref,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return this.snapshotChanges().pipe(Y(({payload:t})=>e.idField?ge(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return _e(this.ref.get(e)).pipe(Zt)}};function Jf(n,e){return LE(n,e).pipe(Wi(void 0),au(),Y(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function oR(n,e,t){return Jf(n,t).pipe(Gi((r,i)=>YU(r,i.map(o=>o.payload),e),[]),dg(),Y(r=>r.map(i=>({type:i.type,payload:i}))))}function YU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=ZU(n,r))}),n}function FE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function ZU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return FE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return FE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FE(n,e.oldIndex,1);break}return n}function sR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Xf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Jf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Y(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wi(void 0),au(),wt(([r,i])=>i.length>0||!r),Y(([,r])=>r),Zt)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=sR(e);return oR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return LE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.payload.docs.map(r=>e.idField?ge(P({},r.data()),{[e.idField]:r.id}):r.data())),Zt)}get(e){return _e(this.query.get(e)).pipe(Zt)}add(e){return this.ref.add(e)}doc(e){return new Zf(this.ref.doc(e),this.afs)}},VE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Jf(this.query,this.afs.schedulers.outsideAngular).pipe(Zt):Jf(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.filter(r=>e.indexOf(r.type)>-1)),wt(t=>t.length>0),Zt)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=sR(e);return oR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return LE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),Zt)}get(e){return _e(this.query.get(e)).pipe(Zt)}},JU=new K("angularfire2.enableFirestorePersistence"),XU=new K("angularfire2.firestore.persistenceSettings"),e$=new K("angularfire2.firestore.settings"),t$=new K("angularfire2.firestore.use-emulator");function aR(n,e=t=>t){return{query:e(n),ref:n}}var Xt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,g,y,b,A,M,B,G){this.schedulers=u;let j=Zu(t,a,r),J=h;p&&Rv(j,a,g,b,A,M,y,B),[this.firestore,this.persistenceEnabled$]=Ah(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),J&&oe.useEmulator(...J),i&&!uo(s)){let ee=()=>{try{return _e(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ne(!1)}};return[oe,a.runOutsideAngular(ee)]}else return[oe,ne(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=aR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Xf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new VE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Zf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(js),L(Bs,8),L(JU,8),L(e$,8),L(Kt),L(we),L(bh),L(XU,8),L(t$,8),L(AS,8),L(bv,8),L(Tv,8),L(Sv,8),L(Av,8),L(Mv,8),L(xv,8),L(po,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var uR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(P({},t))}deleteHeader(t){return this.headerRef.doc(t).delete()}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ie(ui),ie(_n))}}static{this.\u0275dir=Mt({type:n})}}return n})(),r$=(()=>{class n extends mR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wu(n)))(i||n)}})()}static{this.\u0275dir=Mt({type:n,features:[li]})}}return n})(),yR=new K("");var i$={provide:yR,useExisting:Is(()=>kt),multi:!0};function o$(){let n=tr()?tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var s$=new K(""),kt=(()=>{class n extends mR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!o$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(ui),ie(_n),ie(s$,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Oe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Gd([i$]),li]})}}return n})();var vR=new K(""),_R=new K("");function wR(n){return n!=null}function ER(n){return so(n)?_e(n):n}function IR(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function DR(n,e){return e.map(t=>t(n))}function a$(n){return!n.validate}function CR(n){return n.map(e=>a$(e)?e:t=>e.validate(t))}function u$(n){if(!n)return null;let e=n.filter(wR);return e.length==0?null:function(t){return IR(DR(t,e))}}function BE(n){return n!=null?u$(CR(n)):null}function c$(n){if(!n)return null;let e=n.filter(wR);return e.length==0?null:function(t){let r=DR(t,e).map(ER);return ug(r).pipe(Y(IR))}}function UE(n){return n!=null?c$(CR(n)):null}function cR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function l$(n){return n._rawValidators}function d$(n){return n._rawAsyncValidators}function jE(n){return n?Array.isArray(n)?n:[n]:[]}function tp(n,e){return Array.isArray(n)?n.includes(e):n===e}function lR(n,e){let t=jE(e);return jE(n).forEach(i=>{tp(t,i)||t.push(i)}),t}function dR(n,e){return jE(e).filter(t=>!tp(n,t))}var np=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xa=class extends np{get formDirective(){return null}get path(){return null}},qc=class extends np{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},h$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Z6=ge(P({},h$),{"[class.ng-submitted]":"isSubmitted"}),en=(()=>{class n extends rp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(qc,2))}}static{this.\u0275dir=Mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[li]})}}return n})(),tn=(()=>{class n extends rp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(xa,10))}}static{this.\u0275dir=Mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[li]})}}return n})();var jc="VALID",ep="INVALID",Aa="PENDING",Bc="DISABLED",Ra=class{},ip=class extends Ra{constructor(e,t){super(),this.value=e,this.source=t}},$c=class extends Ra{constructor(e,t){super(),this.pristine=e,this.source=t}},Hc=class extends Ra{constructor(e,t){super(),this.touched=e,this.source=t}},Ma=class extends Ra{constructor(e,t){super(),this.status=e,this.source=t}};function bR(n){return(ap(n)?n.validators:n)||null}function f$(n){return Array.isArray(n)?BE(n):n||null}function TR(n,e){return(ap(e)?e.asyncValidators:n)||null}function p$(n){return Array.isArray(n)?UE(n):n||null}function ap(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function g$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function m$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var op=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=bu(()=>this.statusReactive()),this.statusReactive=Du(void 0),this._pristine=bu(()=>this.pristineReactive()),this.pristineReactive=Du(!0),this._touched=bu(()=>this.touchedReactive()),this.touchedReactive=Du(!1),this._events=new Ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Sr(this.statusReactive)}set status(e){Sr(()=>this.statusReactive.set(e))}get valid(){return this.status===jc}get invalid(){return this.status===ep}get pending(){return this.status==Aa}get disabled(){return this.status===Bc}get enabled(){return this.status!==Bc}get pristine(){return Sr(this.pristineReactive)}set pristine(e){Sr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Sr(this.touchedReactive)}set touched(e){Sr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dR(e,this._rawAsyncValidators))}hasValidator(e){return tp(this._rawValidators,e)}hasAsyncValidator(e){return tp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $c(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new $c(!0,r))}markAsPending(e={}){this.status=Aa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ma(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bc,this.errors=null,this._forEachChild(i=>{i.disable(ge(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ip(this.value,r)),this._events.next(new Ma(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jc,this._forEachChild(r=>{r.enable(ge(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jc||this.status===Aa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ip(this.value,t)),this._events.next(new Ma(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bc:jc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Aa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=ER(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ma(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ye,this.statusChanges=new Ye}_calculateStatus(){return this._allControlsDisabled()?Bc:this.errors?ep:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Aa)?Aa:this._anyControlsHaveStatus(ep)?ep:jc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new $c(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Hc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ap(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=f$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=p$(this._rawAsyncValidators)}},sp=class extends op{constructor(e,t,r){super(bR(t),TR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){m$(this,!0,e),Object.keys(e).forEach(r=>{g$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var $E=new K("CallSetDisabledState",{providedIn:"root",factory:()=>HE}),HE="always";function y$(n,e){return[...e.path,n]}function SR(n,e,t=HE){AR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),_$(n,e),E$(n,e),w$(n,e),v$(n,e)}function hR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function v$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function AR(n,e){let t=l$(n);e.validator!==null?n.setValidators(cR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=d$(n);e.asyncValidator!==null?n.setAsyncValidators(cR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();hR(e._rawValidators,i),hR(e._rawAsyncValidators,i)}function _$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MR(n,e)})}function w$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function E$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function I$(n,e){n==null,AR(n,e)}function D$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function C$(n){return Object.getPrototypeOf(n.constructor)===r$}function b$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function T$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===kt?t=o:C$(o)?r=o:i=o}),i||r||t||null}var S$={provide:xa,useExisting:Is(()=>zt)},Uc=Promise.resolve(),zt=(()=>{class n extends xa{get submitted(){return Sr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=bu(()=>this.submittedReactive()),this.submittedReactive=Du(!1),this._directives=new Set,this.ngSubmit=new Ye,this.form=new sp({},BE(t),UE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Uc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),SR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Uc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Uc.then(()=>{let r=this._findContainer(t.path),i=new sp({});I$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Uc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Uc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),b$(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ie(vR,10),ie(_R,10),ie($E,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Oe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gd([S$]),li]})}}return n})();function fR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var A$=class extends op{constructor(e=null,t,r){super(bR(t),TR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ap(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var M$={provide:qc,useExisting:Is(()=>Gt)},gR=Promise.resolve(),Gt=(()=>{class n extends qc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new A$,this._registered=!1,this.name="",this.update=new Ye,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=T$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),D$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){SR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){gR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ao(r);gR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?y$(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ie(xa,9),ie(vR,10),ie(_R,10),ie(yR,10),ie(hi,8),ie($E,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gd([M$]),li,oi]})}}return n})(),nn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var x$=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();var xR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$E,useValue:t.callSetDisabledState??HE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[x$]})}}return n})();function R$(n,e){if(n&1&&(F(0,"div",14),kn(1,"img",15),O()),n&2){let t=qe(2);te(),Et("src",t.header.photoUrl,Km)}}function N$(n,e){if(n&1){let t=Qt();F(0,"div",3),Rt(1,R$,2,1,"div",4),F(2,"form",5),Oe("ngSubmit",function(){Je(t);let i=qe();return Xe(i.actualizarHeader())}),F(3,"label"),W(4,"Nombre"),O(),F(5,"input",6),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.name,i)||(o.header.name=i),Xe(i)}),O(),F(6,"label"),W(7,"Meta de vida"),O(),F(8,"input",7),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.goalLife,i)||(o.header.goalLife=i),Xe(i)}),O(),F(9,"label"),W(10,"URL de Foto"),O(),F(11,"input",8),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.photoUrl,i)||(o.header.photoUrl=i),Xe(i)}),O(),F(12,"label"),W(13,"Correo Electr\xF3nico"),O(),F(14,"input",9),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.email,i)||(o.header.email=i),Xe(i)}),O(),F(15,"label"),W(16,"Tel\xE9fono"),O(),F(17,"input",10),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.phoneNumber,i)||(o.header.phoneNumber=i),Xe(i)}),O(),F(18,"label"),W(19,"Ubicaci\xF3n"),O(),F(20,"input",11),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.location,i)||(o.header.location=i),Xe(i)}),O(),F(21,"label"),W(22,"Red Social"),O(),F(23,"input",12),be("ngModelChange",function(i){Je(t);let o=qe();return Ae(o.header.socialNetwork,i)||(o.header.socialNetwork=i),Xe(i)}),O(),F(24,"button",13),W(25,"Actualizar Header"),O()()()}if(n&2){let t=qe();te(),Et("ngIf",t.header.photoUrl),te(4),Ce("ngModel",t.header.name),te(3),Ce("ngModel",t.header.goalLife),te(3),Ce("ngModel",t.header.photoUrl),te(3),Ce("ngModel",t.header.email),te(3),Ce("ngModel",t.header.phoneNumber),te(3),Ce("ngModel",t.header.location),te(3),Ce("ngModel",t.header.socialNetwork)}}var RR=(()=>{class n{constructor(t){this.headerService=t,this.header=new Dh,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}actualizarHeader(){this.header.id&&this.headerService.updateHeader(this.header.id,this.header).then(()=>{console.log("Header actualizado exitosamente")})}static{this.\u0275fac=function(r){return new(r||n)(ie(uR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-header"]],decls:5,vars:1,consts:[[1,"header-section"],[1,"header-title","card"],["class","header-form card",4,"ngIf"],[1,"header-form","card"],["class","image-preview",4,"ngIf"],[3,"ngSubmit"],["type","text","name","name","placeholder","Nombre",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","Meta de vida",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photoUrl","placeholder","URL de foto",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","email","placeholder","Correo electr\xF3nico",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","Tel\xE9fono",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Ubicaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","Red social",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"image-preview"],["alt","Vista previa",3,"src"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Editar Header"),O()(),Rt(4,N$,26,8,"div",2),O()),r&2&&(te(4),Et("ngIf",i.header))},dependencies:[aT,nn,kt,en,tn,Gt,zt],styles:[".header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;font-weight:700;text-align:center}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}@media (max-width: 600px){.header-section[_ngcontent-%COMP%]{padding:1rem}}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:10px;border:2px solid #fff;object-fit:cover;box-shadow:0 0 10px #0006}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.3rem;margin-top:1rem;color:#fff}"]})}}return n})();var up=class{constructor(){this.starDate="",this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var NR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k$(n,e){if(n&1){let t=Qt();F(0,"div",17)(1,"div",18)(2,"strong"),W(3),O(),W(4),kn(5,"br"),F(6,"small"),W(7),O(),F(8,"p"),W(9),O()(),F(10,"button",19),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteJob(i.id))}),W(11,"Eliminar"),O()()}if(n&2){let t=e.$implicit;te(3),wn(t.company),te(),er(" \u2014 ",t.position," "),te(3),cy("",t.starDate," - ",t.endDate," | ",t.location,""),te(2),wn(t.accomplishments)}}var PR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new up,console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}AgregarJob(){console.log(this.myWorkExperience),this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully")})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("delete item successfully")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(NR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-workexperience"]],decls:30,vars:8,consts:[[1,"experience-section"],[1,"card"],[3,"ngSubmit"],["for","startDate"],["type","text","id","startDate","placeholder","mm/yyyy","name","startDate",1,"txt",3,"ngModelChange","ngModel"],["for","endDate"],["type","text","id","endDate","placeholder","mm/yyyy","name","endDate",1,"txt",3,"ngModelChange","ngModel"],["for","location"],["type","text","id","location","placeholder","Ciudad, Pa\xEDs","name","location",1,"txt",3,"ngModelChange","ngModel"],["for","position"],["type","text","id","position","placeholder","Puesto desempe\xF1ado","name","position",1,"txt",3,"ngModelChange","ngModel"],["for","company"],["type","text","id","company","placeholder","Nombre de la empresa","name","company",1,"txt",3,"ngModelChange","ngModel"],["for","accomplishments"],["type","text","id","accomplishments","placeholder","Principales logros","name","accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","experience-item",4,"ngFor","ngForOf"],[1,"experience-item"],[1,"job-details"],[1,"btn","danger",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Experiencia Laboral"),O()(),F(4,"div",1)(5,"form",2),Oe("ngSubmit",function(){return i.AgregarJob()}),F(6,"label",3),W(7,"Inicio"),O(),F(8,"input",4),be("ngModelChange",function(s){return Ae(i.myWorkExperience.starDate,s)||(i.myWorkExperience.starDate=s),s}),O(),F(9,"label",5),W(10,"Fin"),O(),F(11,"input",6),be("ngModelChange",function(s){return Ae(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),O(),F(12,"label",7),W(13,"Ubicaci\xF3n"),O(),F(14,"input",8),be("ngModelChange",function(s){return Ae(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),O(),F(15,"label",9),W(16,"Puesto"),O(),F(17,"input",10),be("ngModelChange",function(s){return Ae(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),O(),F(18,"label",11),W(19,"Empresa"),O(),F(20,"input",12),be("ngModelChange",function(s){return Ae(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),O(),F(21,"label",13),W(22,"Logros"),O(),F(23,"input",14),be("ngModelChange",function(s){return Ae(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),O(),F(24,"button",15),W(25),O()()(),F(26,"div",1)(27,"h3"),W(28,"Lista de Experiencia"),O(),Rt(29,k$,12,6,"div",16),O()()),r&2&&(te(8),Ce("ngModel",i.myWorkExperience.starDate),te(3),Ce("ngModel",i.myWorkExperience.endDate),te(3),Ce("ngModel",i.myWorkExperience.location),te(3),Ce("ngModel",i.myWorkExperience.position),te(3),Ce("ngModel",i.myWorkExperience.company),te(3),Ce("ngModel",i.myWorkExperience.accomplishments),te(2),wn(i.btntxt),te(4),Et("ngForOf",i.workExperience))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff14;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000004d;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;margin-bottom:1.5rem}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-top:1rem;display:block}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-top:.5rem;margin-bottom:1rem;background-color:#ffffff26;border:none;border-radius:6px;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:6px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;margin-top:1rem;transition:background .3s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-top:.5rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.experience-item[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding-top:1rem;margin-top:1rem}.job-details[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})}}return n})();var cp=class{constructor(){this.startDate="",this.endDate="",this.Degree="",this.Collage=""}};var kR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F$(n,e){if(n&1){let t=Qt();F(0,"div",10)(1,"span"),W(2),O(),F(3,"button",11),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteEducation(i.id))}),W(4,"Eliminar"),O()()}if(n&2){let t=e.$implicit;te(2),oo("",t.Collage," - ",t.Degree,"")}}var OR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myEducation=new cp,console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}AgregarEducation(){console.log(this.myEducation),this.educationService.createEducation(this.myEducation).then(()=>{console.log("create new item succesfully")})}deleteEducation(t){this.educationService.deleteEducation(t).then(()=>{console.log("delete item succesfully")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(kR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-education"]],decls:15,vars:7,consts:[[1,"education-section"],[1,"edu-list","card"],["class","edu-item",4,"ngFor","ngForOf"],[1,"edu-form","card"],[3,"ngSubmit"],["type","text","name","startDate","placeholder","Fecha inicio (mmm-yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Fecha fin (mmm-yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","Degree","placeholder","T\xEDtulo o grado",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","Collage","placeholder","Instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"edu-item"],[1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Estudios Guardados"),O(),Rt(4,F$,5,2,"div",2),O(),F(5,"div",3)(6,"h2"),W(7),O(),F(8,"form",4),Oe("ngSubmit",function(){return i.AgregarEducation()}),F(9,"input",5),be("ngModelChange",function(s){return Ae(i.myEducation.startDate,s)||(i.myEducation.startDate=s),s}),O(),F(10,"input",6),be("ngModelChange",function(s){return Ae(i.myEducation.endDate,s)||(i.myEducation.endDate=s),s}),O(),F(11,"input",7),be("ngModelChange",function(s){return Ae(i.myEducation.Degree,s)||(i.myEducation.Degree=s),s}),O(),F(12,"input",8),be("ngModelChange",function(s){return Ae(i.myEducation.Collage,s)||(i.myEducation.Collage=s),s}),O(),F(13,"button",9),W(14),O()()()()),r&2&&(te(4),Et("ngForOf",i.education),te(3),er("",i.btntxt," Educaci\xF3n"),te(2),Ce("ngModel",i.myEducation.startDate),te(),Ce("ngModel",i.myEducation.endDate),te(),Ce("ngModel",i.myEducation.Degree),te(),Ce("ngModel",i.myEducation.Collage),te(2),wn(i.btntxt))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".education-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.edu-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .edu-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;font-weight:700}.edu-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}button.delete[_ngcontent-%COMP%]{background-color:#c0392b}button.delete[_ngcontent-%COMP%]:hover{background-color:#e74c3c}@media (max-width: 600px){.education-section[_ngcontent-%COMP%]{padding:1rem}.edu-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})}}return n})();var lp=class{constructor(){this.certificate="",this.context="",this.year=""}};var FR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificateRef=t.collection(this.dbPath)}getCertificate(){return this.certificateRef}createCertificate(t){return this.certificateRef.add(P({},t))}deleteCertificate(t){return this.certificateRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L$(n,e){if(n&1){let t=Qt();F(0,"div",9)(1,"span"),W(2),O(),F(3,"button",10),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteCertificate(i.id))}),W(4,"Eliminar"),O()()}if(n&2){let t=e.$implicit;te(2),oo("",t.certificate," - ",t.year,"")}}var VR=(()=>{class n{constructor(t){this.certificatesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates=new lp,console.log(this.certificatesService),this.certificatesService.getCertificate().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}AgregarCertificates(){console.log(this.myCertificates),this.certificatesService.createCertificate(this.myCertificates).then(()=>{console.log("Create new item succesfully!")})}deleteCertificate(t){this.certificatesService.deleteCertificate(t).then(()=>{console.log("delete item succesfully")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(FR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-certificates"]],decls:14,vars:6,consts:[[1,"certificate-section"],[1,"cert-list","card"],["class","cert-item",4,"ngFor","ngForOf"],[1,"cert-form","card"],[3,"ngSubmit"],["type","text","name","certificate","placeholder","Nombre del certificado",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","context","placeholder","Contexto o instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","year","placeholder","A\xF1o (YYYY)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"cert-item"],[1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Certificados Guardados"),O(),Rt(4,L$,5,2,"div",2),O(),F(5,"div",3)(6,"h2"),W(7),O(),F(8,"form",4),Oe("ngSubmit",function(){return i.AgregarCertificates()}),F(9,"input",5),be("ngModelChange",function(s){return Ae(i.myCertificates.certificate,s)||(i.myCertificates.certificate=s),s}),O(),F(10,"input",6),be("ngModelChange",function(s){return Ae(i.myCertificates.context,s)||(i.myCertificates.context=s),s}),O(),F(11,"input",7),be("ngModelChange",function(s){return Ae(i.myCertificates.year,s)||(i.myCertificates.year=s),s}),O(),F(12,"button",8),W(13),O()()()()),r&2&&(te(4),Et("ngForOf",i.certificates),te(3),er("",i.btntxt," Certificado"),te(2),Ce("ngModel",i.myCertificates.certificate),te(),Ce("ngModel",i.myCertificates.context),te(),Ce("ngModel",i.myCertificates.year),te(2),wn(i.btntxt))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".certificate-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.cert-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cert-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;font-weight:700}.cert-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}button.delete[_ngcontent-%COMP%]{background-color:#c0392b}button.delete[_ngcontent-%COMP%]:hover{background-color:#e74c3c}@media (max-width: 600px){.certificate-section[_ngcontent-%COMP%]{padding:1rem}.cert-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})}}return n})();var dp=class{constructor(){this.skill="",this.percentage=""}};var LR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skill",this.skillRef=t.collection(this.dbPath)}getSkill(){return this.skillRef}createSkill(t){return this.skillRef.add(P({},t))}deleteSkill(t){return this.skillRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B$(n,e){if(n&1){let t=Qt();F(0,"div",9)(1,"div",10)(2,"strong"),W(3),O(),F(4,"span"),W(5),O(),F(6,"button",11),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteSkill(i.id))}),W(7,"Eliminar"),O()(),F(8,"div",12),kn(9,"div",13),O()()}if(n&2){let t=e.$implicit;te(3),wn(t.skill),te(2),wn(t.percentage),te(4),qd("width",t.percentage)}}var jR=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],this.mySkill=new dp,console.log(this.skillsService),this.skillsService.getSkill().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}AgregarSkill(){console.log(this.mySkill),this.skillsService.createSkill(this.mySkill).then(()=>{console.log("created new item succesfully")})}deleteSkill(t){this.skillsService.deleteSkill(t).then(()=>{console.log("delete item succesfully")})}static{this.\u0275fac=function(r){return new(r||n)(ie(LR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-skills"]],decls:18,vars:3,consts:[[1,"skills-section"],[1,"card"],[3,"ngSubmit"],["for","skill"],["type","text","id","skill","name","skill","placeholder","Ej: Java, Photoshop...",1,"txt",3,"ngModelChange","ngModel"],["for","percentage"],["type","text","id","percentage","name","percentage","placeholder","Ej: 85%",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","skill-item",4,"ngFor","ngForOf"],[1,"skill-item"],[1,"skill-header"],[1,"btn","danger",3,"click"],[1,"progress-bar"],[1,"progress-fill"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Habilidades"),O()(),F(4,"div",1)(5,"form",2),Oe("ngSubmit",function(){return i.AgregarSkill()}),F(6,"label",3),W(7,"Habilidad"),O(),F(8,"input",4),be("ngModelChange",function(s){return Ae(i.mySkill.skill,s)||(i.mySkill.skill=s),s}),O(),F(9,"label",5),W(10,"Porcentaje de dominio"),O(),F(11,"input",6),be("ngModelChange",function(s){return Ae(i.mySkill.percentage,s)||(i.mySkill.percentage=s),s}),O(),F(12,"button",7),W(13,"Agregar"),O()()(),F(14,"div",1)(15,"h3"),W(16,"Tus habilidades"),O(),Rt(17,B$,10,4,"div",8),O()()),r&2&&(te(8),Ce("ngModel",i.mySkill.skill),te(3),Ce("ngModel",i.mySkill.percentage),te(6),Et("ngForOf",i.skills))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".skills-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;margin-top:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-left:auto}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.skill-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.skill-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.progress-bar[_ngcontent-%COMP%]{height:10px;background-color:#fff3;border-radius:5px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#2ecc71;transition:width .4s ease}"]})}}return n})();var hp=class{constructor(){this.language="",this.percentage=""}};var BR=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="Languagues Service is Running...",this.dbPath="/languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}createLanguage(t){return this.languageRef.add(P({},t))}deleteLanguage(t){return this.languageRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $$(n,e){if(n&1){let t=Qt();F(0,"div",9)(1,"button",10),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteLanguage(i.id))}),W(2,"Eliminar"),O(),W(3),O()}if(n&2){let t=e.$implicit;te(3),oo(" ",t.language," - ",t.percentage," ")}}var UR=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],this.myLanguage=new hp,console.log(this.languagesService),this.languagesService.getLanguage().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarLanguage(){console.log(this.myLanguage),this.languagesService.createLanguage(this.myLanguage).then(()=>{console.log("created a new item successfully")})}deleteLanguage(t){this.languagesService.deleteLanguage(t).then(()=>{console.log("delete item successfully")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(BR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-languages"]],decls:18,vars:3,consts:[[1,"language-section"],[1,"card"],[3,"ngSubmit"],["for","language"],["type","text","id","language","name","language","placeholder","Ej: Ingl\xE9s",1,"txt",3,"ngModelChange","ngModel"],["for","percentage"],["type","text","id","percentage","name","percentage","placeholder","Ej: 90%",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button",1,"btn","danger",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Idiomas"),O()(),F(4,"div",1)(5,"form",2),Oe("ngSubmit",function(){return i.AgregarLanguage()}),F(6,"label",3),W(7,"Idioma"),O(),F(8,"input",4),be("ngModelChange",function(s){return Ae(i.myLanguage.language,s)||(i.myLanguage.language=s),s}),O(),F(9,"label",5),W(10,"Porcentaje de dominio"),O(),F(11,"input",6),be("ngModelChange",function(s){return Ae(i.myLanguage.percentage,s)||(i.myLanguage.percentage=s),s}),O(),F(12,"button",7),W(13,"Agregar"),O()()(),F(14,"div",1)(15,"h3"),W(16,"Tus idiomas"),O(),Rt(17,$$,4,2,"div",8),O()()),r&2&&(te(8),Ce("ngModel",i.myLanguage.language),te(3),Ce("ngModel",i.myLanguage.percentage),te(6),Et("ngForOf",i.languages))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".language-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;margin-top:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.life-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}"]})}}return n})();var fp=class{constructor(){this.interest=""}};var $R=(()=>{class n{constructor(t){this.db=t,this.accessoInterests="Interests Service is Running",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterests(t){return this.interestsRef.add(P({},t))}deleteInterests(t){return this.interestsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q$(n,e){if(n&1){let t=Qt();F(0,"div",7)(1,"button",8),Oe("click",function(){let i=Je(t).$implicit,o=qe();return Xe(o.deleteInterest(i.id))}),W(2,"Eliminar"),O(),W(3),O()}if(n&2){let t=e.$implicit;te(3),er(" ",t.interest," ")}}var HR=(()=>{class n{constructor(t){this.interestsService=t,this.myInterests=new fp,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}AregarInterest(){console.log(this.myInterests),this.interestsService.createInterests(this.myInterests).then(()=>{console.log("created new item successfully")})}deleteInterest(t){this.interestsService.deleteInterests(t).then(()=>{console.log("delete item successfully")})}static{this.\u0275fac=function(r){return new(r||n)(ie($R))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-interests"]],decls:15,vars:2,consts:[[1,"interest-section"],[1,"card"],[3,"ngSubmit"],["for","interest"],["type","text","id","interest","name","interest","placeholder","\xBFQu\xE9 te interesa?",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button",1,"btn","danger",3,"click"]],template:function(r,i){r&1&&(F(0,"div",0)(1,"div",1)(2,"h2"),W(3,"Intereses"),O()(),F(4,"div",1)(5,"form",2),Oe("ngSubmit",function(){return i.AregarInterest()}),F(6,"label",3),W(7,"Inter\xE9s"),O(),F(8,"input",4),be("ngModelChange",function(s){return Ae(i.myInterests.interest,s)||(i.myInterests.interest=s),s}),O(),F(9,"button",5),W(10,"Guardar"),O()()(),F(11,"div",1)(12,"h3"),W(13,"Tus intereses"),O(),Rt(14,q$,4,1,"div",6),O()()),r&2&&(te(8),Ce("ngModel",i.myInterests.interest),te(6),Et("ngForOf",i.interests))},dependencies:[En,nn,kt,en,tn,Gt,zt],styles:[".interest-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1.5rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.life-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}"]})}}return n})();var z$=[{path:"header",component:RR},{path:"workexperience",component:PR},{path:"education",component:OR},{path:"certificates",component:VR},{path:"skills",component:jR},{path:"languages",component:UR},{path:"interests",component:HR}],qR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[mv.forRoot(z$),mv]})}}return n})();var zR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=gt({type:n,selectors:[["app-root"]],decls:28,vars:0,consts:[["routerLink","/header","routerLinkActive","active"],["routerLink","/workexperience","routerLinkActive","active"],["routerLink","/education","routerLinkActive","active"],["routerLink","/certificates","routerLinkActive","active"],["routerLink","/skills","routerLinkActive","active"],["routerLink","/languages","routerLinkActive","active"],["routerLink","/interests","routerLinkActive","active"]],template:function(r,i){r&1&&(F(0,"header")(1,"h1"),W(2,"Admin-CV App"),O()(),F(3,"nav")(4,"ul")(5,"li")(6,"a",0),W(7,"Header"),O()(),F(8,"li")(9,"a",1),W(10,"Work Experience"),O()(),F(11,"li")(12,"a",2),W(13,"Education"),O()(),F(14,"li")(15,"a",3),W(16,"Certificates"),O()(),F(17,"li")(18,"a",4),W(19,"Skills"),O()(),F(20,"li")(21,"a",5),W(22,"Languages"),O()(),F(23,"li")(24,"a",6),W(25,"Interests"),O()()()(),F(26,"main"),kn(27,"router-outlet"),O())},dependencies:[lv,_h,uS]})}}return n})();var GR={production:!1,firebaseConfig:{apiKey:"AIzaSyAhXFZnSoplTKnWAToyz17iADYtot7uKzc",authDomain:"josealan2119-mycv-19640.firebaseapp.com",projectId:"josealan2119-mycv-19640",storageBucket:"josealan2119-mycv-19640.firebasestorage.app",messagingSenderId:"320363882070",appId:"1:320363882070:web:aab1e255f9aab19289bdf7"}};var WR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n,bootstrap:[zR]})}static{this.\u0275inj=pt({imports:[vT,qR,xR,SS.initializeApp(GR.firebaseConfig)]})}}return n})();yT().bootstrapModule(WR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
