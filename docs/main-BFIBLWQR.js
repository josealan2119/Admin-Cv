import{a as P,b as ge,c as Up,d as N,e as QI,f as ml,g as YI,h as ZI,i as JI,j as $p,k as XI,l as Za,m as Hp,n as yl,o as e0,p as t0,q as qp,r as Ge,s as $i,t as zn,u as vl,v as Ja,w as n0,x as r0,y as Yr,z as sn}from"./chunk-4ZHOUZTK.js";function i0(n,e){return Object.is(n,e)}var ct=null,_l=!1,wl=1,mr=Symbol("SIGNAL");function Ce(n){let e=ct;return ct=n,e}function o0(){return ct}var eu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wp(n){if(_l)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.nextProducerIndex++;if(Dl(ct),e<ct.producerNode.length&&ct.producerNode[e]!==n&&Xa(ct)){let t=ct.producerNode[e];Cl(t,ct.producerIndexOfThis[e])}ct.producerNode[e]!==n&&(ct.producerNode[e]=n,ct.producerIndexOfThis[e]=Xa(ct)?c0(n,ct,e):0),ct.producerLastReadVersion[e]=n.version}function xN(){wl++}function s0(n){if(!(Xa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wl)){if(!n.producerMustRecompute(n)&&!Qp(n)){n.dirty=!1,n.lastCleanEpoch=wl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=wl}}function a0(n){if(n.liveConsumerNode===void 0)return;let e=_l;_l=!0;try{for(let t of n.liveConsumerNode)t.dirty||MN(t)}finally{_l=e}}function u0(){return ct?.consumerAllowSignalWrites!==!1}function MN(n){n.dirty=!0,a0(n),n.consumerMarkedDirty?.(n)}function Il(n){return n&&(n.nextProducerIndex=0),Ce(n)}function Kp(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Xa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Cl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qp(n){Dl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(s0(t),r!==t.version))return!0}return!1}function Yp(n){if(Dl(n),Xa(n))for(let e=0;e<n.producerNode.length;e++)Cl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function c0(n,e,t){if(l0(n),n.liveConsumerNode.length===0&&d0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=c0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Cl(n,e){if(l0(n),n.liveConsumerNode.length===1&&d0(n))for(let r=0;r<n.producerNode.length;r++)Cl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Dl(i),i.producerIndexOfThis[r]=e}}function Xa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Dl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function l0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function d0(n){return n.producerNode!==void 0}function h0(n){let e=Object.create(RN);e.computation=n;let t=()=>{if(s0(e),Wp(e),e.value===El)throw e.error;return e.value};return t[mr]=e,t}var zp=Symbol("UNSET"),Gp=Symbol("COMPUTING"),El=Symbol("ERRORED"),RN=ge(P({},eu),{value:zp,dirty:!0,error:null,equal:i0,producerMustRecompute(n){return n.value===zp||n.value===Gp},producerRecomputeValue(n){if(n.value===Gp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Gp;let t=Il(n),r;try{r=n.computation()}catch(i){r=El,n.error=i}finally{Kp(n,t)}if(e!==zp&&e!==El&&r!==El&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function NN(){throw new Error}var f0=NN;function p0(){f0()}function g0(n){f0=n}var PN=null;function m0(n){let e=Object.create(v0);e.value=n;let t=()=>(Wp(e),e.value);return t[mr]=e,t}function Zp(n,e){u0()||p0(),n.equal(n.value,e)||(n.value=e,kN(n))}function y0(n,e){u0()||p0(),Zp(n,e(n.value))}var v0=ge(P({},eu),{equal:i0,value:void 0});function kN(n){n.version++,xN(),a0(n),PN?.()}function ae(n){return typeof n=="function"}function Wo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bl=Wo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ye=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof bl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_0(o)}catch(s){e=e??[],s instanceof bl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hi(t,e)}remove(e){let{_finalizers:t}=this;t&&Hi(t,e),e instanceof n&&e._removeParent(this)}};Ye.EMPTY=(()=>{let n=new Ye;return n.closed=!0,n})();var Jp=Ye.EMPTY;function Tl(n){return n instanceof Ye||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function _0(n){ae(n)?n():n.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ko={setTimeout(n,e,...t){let{delegate:r}=Ko;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ko;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sl(n){Ko.setTimeout(()=>{let{onUnhandledError:e}=Mn;if(e)e(n);else throw n})}function tu(){}var w0=Xp("C",void 0,void 0);function E0(n){return Xp("E",void 0,n)}function I0(n){return Xp("N",n,void 0)}function Xp(n,e,t){return{kind:n,value:e,error:t}}var qi=null;function Qo(n){if(Mn.useDeprecatedSynchronousErrorHandling){let e=!qi;if(e&&(qi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qi;if(qi=null,t)throw r}}else n()}function C0(n){Mn.useDeprecatedSynchronousErrorHandling&&qi&&(qi.errorThrown=!0,qi.error=n)}var zi=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tl(e)&&e.add(this)):this.destination=VN}static create(e,t,r){return new yr(e,t,r)}next(e){this.isStopped?tg(I0(e),this):this._next(e)}error(e){this.isStopped?tg(E0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tg(w0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ON=Function.prototype.bind;function eg(n,e){return ON.call(n,e)}var ng=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Al(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Al(r)}else Al(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Al(t)}}},yr=class extends zi{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Mn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eg(e.next,o),error:e.error&&eg(e.error,o),complete:e.complete&&eg(e.complete,o)}):i=e}this.destination=new ng(i)}};function Al(n){Mn.useDeprecatedSynchronousErrorHandling?C0(n):Sl(n)}function FN(n){throw n}function tg(n,e){let{onStoppedNotification:t}=Mn;t&&Ko.setTimeout(()=>t(n,e))}var VN={closed:!0,next:tu,error:FN,complete:tu};var Yo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(n){return n}function rg(...n){return ig(n)}function ig(n){return n.length===0?Lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=jN(t)?t:new yr(t,r,i);return Qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=D0(r),new r((i,o)=>{let s=new yr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Yo](){return this}pipe(...t){return ig(t)(this)}toPromise(t){return t=D0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function D0(n){var e;return(e=n??Mn.Promise)!==null&&e!==void 0?e:Promise}function LN(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function jN(n){return n&&n instanceof zi||LN(n)&&Tl(n)}function og(n){return ae(n?.lift)}function de(n){return e=>{if(og(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new sg(n,e,t,r,i)}var sg=class extends zi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zo(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jo=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,og(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return Zo()(this)}};var b0=Wo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new xl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new b0}next(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jp:(this.currentObservers=null,o.push(t),new Ye(()=>{this.currentObservers=null,Hi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new xl(e,t),n})(),xl=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jp}};var wt=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nu={now(){return(nu.delegate||Date).now()},delegate:void 0};var Ml=class extends qe{constructor(e=1/0,t=1/0,r=nu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Rl=class extends Ye{constructor(e,t){super()}schedule(e,t=0){return this}};var ru={setInterval(n,e,...t){let{delegate:r}=ru;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ru;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xo=class extends Rl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ru.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ru.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var es=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};es.now=nu.now;var ts=class extends es{constructor(e,t=es.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var iu=new ts(Xo);var Nl=class extends Xo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Pl=class extends ts{};var ag=new Pl(Nl);var jt=new ye(n=>n.complete());function T0(n){return n&&ae(n.schedule)}function ug(n){return n[n.length-1]}function kl(n){return ae(ug(n))?n.pop():void 0}function Gn(n){return T0(ug(n))?n.pop():void 0}function S0(n,e){return typeof ug(n)=="number"?n.pop():e}var Ol=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fl(n){return ae(n?.then)}function Vl(n){return ae(n[Yo])}function Ll(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function jl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bl=BN();function Ul(n){return ae(n?.[Bl])}function $l(n){return YI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ml(t.read());if(i)return yield ml(void 0);yield yield ml(r)}}finally{t.releaseLock()}})}function Hl(n){return ae(n?.getReader)}function Ue(n){if(n instanceof ye)return n;if(n!=null){if(Vl(n))return UN(n);if(Ol(n))return $N(n);if(Fl(n))return HN(n);if(Ll(n))return A0(n);if(Ul(n))return qN(n);if(Hl(n))return zN(n)}throw jl(n)}function UN(n){return new ye(e=>{let t=n[Yo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $N(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function HN(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sl)})}function qN(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function A0(n){return new ye(e=>{GN(n,e).catch(t=>e.error(t))})}function zN(n){return A0($l(n))}function GN(n,e){var t,r,i,o;return QI(this,void 0,void 0,function*(){try{for(t=ZI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gn(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Kt(r,n,()=>r.next(i),e),()=>Kt(r,n,()=>r.complete(),e),i=>Kt(r,n,()=>r.error(i),e)))})}function Rn(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function x0(n,e){return Ue(n).pipe(Rn(e),gn(e))}function M0(n,e){return Ue(n).pipe(Rn(e),gn(e))}function R0(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function N0(n,e){return new ye(t=>{let r;return Kt(t,e,()=>{r=n[Bl](),Kt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function ql(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Kt(t,e,()=>{let r=n[Symbol.asyncIterator]();Kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function P0(n,e){return ql($l(n),e)}function k0(n,e){if(n!=null){if(Vl(n))return x0(n,e);if(Ol(n))return R0(n,e);if(Fl(n))return M0(n,e);if(Ll(n))return ql(n,e);if(Ul(n))return N0(n,e);if(Hl(n))return P0(n,e)}throw jl(n)}function _e(n,e){return e?k0(n,e):Ue(n)}function ne(...n){let e=Gn(n);return _e(n,e)}function ns(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function cg(n){return!!n&&(n instanceof ye||ae(n.lift)&&ae(n.subscribe))}var vr=Wo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:WN}=Array;function KN(n,e){return WN(e)?n(...e):n(e)}function zl(n){return Y(e=>KN(n,e))}var{isArray:QN}=Array,{getPrototypeOf:YN,prototype:ZN,keys:JN}=Object;function Gl(n){if(n.length===1){let e=n[0];if(QN(e))return{args:e,keys:null};if(XN(e)){let t=JN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function XN(n){return n&&typeof n=="object"&&YN(n)===ZN}function Wl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ou(...n){let e=Gn(n),t=kl(n),{args:r,keys:i}=Gl(n);if(r.length===0)return _e([],e);let o=new ye(eP(r,e,i?s=>Wl(i,s):Lt));return t?o.pipe(zl(t)):o}function eP(n,e,t=Lt){return r=>{O0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)O0(e,()=>{let l=_e(n[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function O0(n,e,t){n?Kt(t,n,e):e()}function F0(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let x=!1;Ue(t(A,h++)).subscribe(he(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let B=u.shift();s?Kt(e,s,()=>b(B)):b(B)}g()}catch(B){e.error(B)}}))};return n.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function it(n,e,t=1/0){return ae(e)?it((r,i)=>Y((o,s)=>e(r,o,i,s))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>F0(r,i,n,t)))}function Wn(n=1/0){return it(Lt,n)}function V0(){return Wn(1)}function rs(...n){return V0()(_e(n,Gn(n)))}function Kl(n){return new ye(e=>{Ue(n()).subscribe(e)})}function lg(...n){let e=kl(n),{args:t,keys:r}=Gl(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(t[h]).subscribe(he(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Wl(r,a):a),o.complete())}))}});return e?i.pipe(zl(e)):i}function dg(...n){let e=Gn(n),t=S0(n,1/0),r=n;return r.length?r.length===1?Ue(r[0]):Wn(t)(_e(r,e)):jt}function Et(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Zr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Ue(n(s,Zr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function L0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Gi(n,e){return ae(e)?it(n,e,1):it(n,1)}function Jr(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _r(n){return n<=0?()=>jt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hg(n){return Y(()=>n)}function fg(n,e=Lt){return n=n??tP,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function tP(n,e){return n===e}function Ql(n=nP){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nP(){return new vr}function su(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Lt,_r(1),t?Jr(e):Ql(()=>new vr))}function is(n){return n<=0?()=>jt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,o)=>n(i,o,r)):Lt,is(1),t?Jr(e):Ql(()=>new vr))}function au(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Wi(n,e){return de(L0(n,e,arguments.length>=2,!0))}function j0(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return de((A,x)=>{l++,!p&&!h&&g();let B=u=u??e();x.add(()=>{l--,l===0&&!p&&!h&&(a=gg(b,i))}),B.subscribe(x),!s&&l>0&&(s=new yr({next:W=>B.next(W),error:W=>{p=!0,g(),a=gg(y,t,W),B.error(W)},complete:()=>{h=!0,g(),a=gg(y,r),B.complete()}}),Ue(A).subscribe(s))})(o)}}function gg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new yr({next:()=>{r.unsubscribe(),n()}});return Ue(e(...t)).subscribe(r)}function Yl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,j0({connector:()=>new Ml(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ki(...n){let e=Gn(n);return de((t,r)=>{(e?rs(n,t,e):rs(n,t)).subscribe(r)})}function Ze(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(n(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zl(n,e){return ae(e)?Ze(()=>n,e):Ze(()=>n)}function mg(n){return de((e,t)=>{Ue(n).subscribe(he(t,()=>t.complete(),tu)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var TC="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(Dm(e,t)),this.code=e}};function Dm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function yu(n){return{toString:n}.toString()}var Jl="__parameters__";function rP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function SC(n,e,t){return yu(()=>{let r=rP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Jl)?u[Jl]:Object.defineProperty(u,Jl,{value:[]})[Jl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var kn=globalThis;function Oe(n){for(let e in n)if(n[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function iP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function B0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var oP=Oe({__forward_ref__:Oe});function so(n){return n.__forward_ref__=so,n.toString=function(){return Ut(this())},n}function Bt(n){return AC(n)?n():n}function AC(n){return typeof n=="function"&&n.hasOwnProperty(oP)&&n.__forward_ref__===so}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vd(n){return U0(n,MC)||U0(n,RC)}function xC(n){return Vd(n)!==null}function U0(n,e){return n.hasOwnProperty(e)?n[e]:null}function sP(n){let e=n&&(n[MC]||n[RC]);return e||null}function $0(n){return n&&(n.hasOwnProperty(H0)||n.hasOwnProperty(aP))?n[H0]:null}var MC=Oe({\u0275prov:Oe}),H0=Oe({\u0275inj:Oe}),RC=Oe({ngInjectableDef:Oe}),aP=Oe({ngInjectorDef:Oe}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NC(n){return n&&!!n.\u0275providers}var uP=Oe({\u0275cmp:Oe}),cP=Oe({\u0275dir:Oe}),lP=Oe({\u0275pipe:Oe}),dP=Oe({\u0275mod:Oe}),cd=Oe({\u0275fac:Oe}),cu=Oe({__NG_ELEMENT_ID__:Oe}),q0=Oe({__NG_ENV_ID__:Oe});function an(n){return typeof n=="string"?n:n==null?"":String(n)}function hP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():an(n)}function fP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function bm(n,e){throw new X(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),Mg;function PC(){return Mg}function yn(n){let e=Mg;return Mg=n,e}function kC(n,e,t){let r=Vd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;bm(n,"Injector")}var pP={},du=pP,Rg="__NG_DI_FLAG__",ld="ngTempTokenPath",gP="ngTokenPath",mP=/\n/gm,yP="\u0275",z0="__source",cs;function vP(){return cs}function Xr(n){let e=cs;return cs=n,e}function _P(n,e=pe.Default){if(cs===void 0)throw new X(-203,!1);return cs===null?kC(n,void 0,e):cs.get(n,e&pe.Optional?null:void 0,e)}function L(n,e=pe.Default){return(PC()||_P)(Bt(n),e)}function $(n,e=pe.Default){return L(n,Ld(e))}function Ld(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ng(n){let e=[];for(let t=0;t<n.length;t++){let r=Bt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=wP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function OC(n,e){return n[Rg]=e,n.prototype[Rg]=e,n}function wP(n){return n[Rg]}function EP(n,e,t,r){let i=n[ld];throw e[z0]&&i.unshift(e[z0]),n.message=IP(`
`+n.message,i,t,r),n[gP]=i,n[ld]=null,n}function IP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yP?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mP,`
  `)}`}var Is=OC(SC("Optional"),8);var Tm=OC(SC("SkipSelf"),4);function ds(n,e){let t=n.hasOwnProperty(cd);return t?n[cd]:null}function CP(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function DP(n){return n.flat(Number.POSITIVE_INFINITY)}function Sm(n,e){n.forEach(t=>Array.isArray(t)?Sm(t,e):e(t))}function FC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function dd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function TP(n,e,t){let r=vu(n,e);return r>=0?n[r|1]=t:(r=~r,bP(n,r,e,t)),r}function yg(n,e){let t=vu(n,e);if(t>=0)return n[t|1]}function vu(n,e){return SP(n,e,1)}function SP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var hs={},vn=[],fs=new K(""),VC=new K("",-1),LC=new K(""),hd=class{get(e,t=du){if(t===du){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return t}},jC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(jC||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{}),ni=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ni||{});function AP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Pg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];xP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function BC(n){return n===3||n===4||n===6}function xP(n){return n.charCodeAt(0)===64}function hu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?G0(n,t,i,null,e[++r]):G0(n,t,i,null,null))}}return n}function G0(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var UC="ng-template";function MP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Am(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Am(n){return n.type===4&&n.value!==UC}function RP(n,e,t){let r=n.type===4&&!t?UC:n.value;return e===r}function NP(n,e,t){let r=4,i=n.attrs,o=i!==null?OP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Nn(r)&&!Nn(u))return!1;if(s&&Nn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!RP(n,u,t)||u===""&&e.length===1){if(Nn(r))return!1;s=!0}}else if(r&8){if(i===null||!MP(n,i,u,t)){if(Nn(r))return!1;s=!0}}else{let l=e[++a],h=PP(u,i,Am(n),t);if(h===-1){if(Nn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nn(r))return!1;s=!0}}}}return Nn(r)||s}function Nn(n){return(n&1)===0}function PP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return FP(e,n)}function kP(n,e,t=!1){for(let r=0;r<e.length;r++)if(NP(n,e[r],t))return!0;return!1}function OP(n){for(let e=0;e<n.length;e++){let t=n[e];if(BC(t))return e}return n.length}function FP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function W0(n,e){return n?":not("+e.trim()+")":e}function VP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nn(s)&&(e+=W0(o,i),i=""),r=s,o=o||!Nn(r);t++}return i!==""&&(e+=W0(o,i)),e}function LP(n){return n.map(VP).join(",")}function jP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nn(i))break;i=o}r++}return{attrs:e,classes:t}}function gt(n){return yu(()=>{let e=GC(n),t=ge(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===jC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});WC(t);let r=n.dependencies;return t.directiveDefs=Q0(r,!1),t.pipeDefs=Q0(r,!0),t.id=$P(t),t})}function BP(n){return ri(n)||$C(n)}function UP(n){return n!==null}function mt(n){return yu(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function K0(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ni.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==ni.None?[r,a]:r,e[o]=s):t[o]=r}return t}function yt(n){return yu(()=>{let e=GC(n);return WC(e),e})}function ri(n){return n[uP]||null}function $C(n){return n[cP]||null}function HC(n){return n[lP]||null}function qC(n){let e=ri(n)||$C(n)||HC(n);return e!==null?e.standalone:!1}function zC(n,e){let t=n[dP]||null;if(!t&&e===!0)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return t}function GC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:K0(n.inputs,e),outputs:K0(n.outputs),debugInfo:null}}function WC(n){n.features?.forEach(e=>e(n))}function Q0(n,e){if(!n)return null;let t=e?HC:BP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(UP)}function $P(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function HP(...n){return{\u0275providers:KC(!0,n),\u0275fromNgModule:!0}}function KC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Sm(e,s=>{let a=s;kg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QC(i,o),t}function QC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xm(i,o=>{e(o,r)})}}function kg(n,e,t,r){if(n=Bt(n),!n)return!1;let i=null,o=$0(n),s=!o&&ri(n);if(!o&&!s){let u=n.ngModule;if(o=$0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)kg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Sm(o.imports,h=>{kg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&QC(l,e)}if(!a){let l=ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:LC,useValue:i,multi:!0},i),e({provide:fs,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;xm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function xm(n,e){for(let t of n)NC(t)&&(t=t.\u0275providers),Array.isArray(t)?xm(t,e):e(t)}var qP=Oe({provide:String,useValue:Oe});function YC(n){return n!==null&&typeof n=="object"&&qP in n}function zP(n){return!!(n&&n.useExisting)}function GP(n){return!!(n&&n.useFactory)}function ps(n){return typeof n=="function"}function WP(n){return!!n.useClass}var jd=new K(""),id={},KP={},vg;function Mm(){return vg===void 0&&(vg=new hd),vg}var cn=class{},fu=class extends cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fg(e,s=>this.processProvider(s)),this.records.set(VC,os(void 0,this)),i.has("environment")&&this.records.set(cn,os(void 0,this));let o=this.records.get(jd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(LC,vn,pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xr(this),r=yn(void 0),i;try{return e()}finally{Xr(t),yn(r)}}get(e,t=du,r=pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(q0))return e[q0](this);r=Ld(r);let i,o=Xr(this),s=yn(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=XP(e)&&Vd(e);l&&this.injectableDefInScope(l)?u=os(Og(e),id):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?Mm():this.parent;return t=r&pe.Optional&&t===du?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ld]=a[ld]||[]).unshift(Ut(e)),o)throw a;return EP(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),Xr(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Xr(this),r=yn(void 0),i;try{let o=this.get(fs,vn,pe.Self);for(let s of o)s()}finally{Xr(t),yn(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Bt(e);let t=ps(e)?e:Bt(e&&e.provide),r=YP(e);if(!ps(e)&&e.multi===!0){let i=this.records.get(t);i||(i=os(void 0,id,!0),i.factory=()=>Ng(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===id&&(t.value=KP,t.value=t.factory()),typeof t.value=="object"&&t.value&&JP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Bt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Og(n){let e=Vd(n),t=e!==null?e.factory:ds(n);if(t!==null)return t;if(n instanceof K)throw new X(204,!1);if(n instanceof Function)return QP(n);throw new X(204,!1)}function QP(n){if(n.length>0)throw new X(204,!1);let t=sP(n);return t!==null?()=>t.factory(n):()=>new n}function YP(n){if(YC(n))return os(void 0,n.useValue);{let e=ZC(n);return os(e,id)}}function ZC(n,e,t){let r;if(ps(n)){let i=Bt(n);return ds(i)||Og(i)}else if(YC(n))r=()=>Bt(n.useValue);else if(GP(n))r=()=>n.useFactory(...Ng(n.deps||[]));else if(zP(n))r=()=>L(Bt(n.useExisting));else{let i=Bt(n&&(n.useClass||n.provide));if(ZP(n))r=()=>new i(...Ng(n.deps));else return ds(i)||Og(i)}return r}function os(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZP(n){return!!n.deps}function JP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function XP(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Fg(n,e){for(let t of n)Array.isArray(t)?Fg(t,e):t&&NC(t)?Fg(t.\u0275providers,e):e(t)}function er(n,e){n instanceof fu&&n.assertNotDestroyed();let t,r=Xr(n),i=yn(void 0);try{return e()}finally{Xr(r),yn(i)}}function JC(){return PC()!==void 0||vP()!=null}function e1(n){if(!JC())throw new X(-203,!1)}function t1(n){let e=kn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function n1(n){return typeof n=="function"}var Dr=0,fe=1,se=2,xt=3,Pn=4,Fn=5,fd=6,pd=7,On=8,gs=9,Zn=10,dt=11,pu=12,Y0=13,Cs=14,Jn=15,Yi=16,ss=17,wr=18,Bd=19,XC=20,ei=21,_g=22,_n=23,ii=25,eD=1;var Zi=7,gd=8,ms=9,un=10,md=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(md||{});function ti(n){return Array.isArray(n)&&typeof n[eD]=="object"}function br(n){return Array.isArray(n)&&n[eD]===!0}function tD(n){return(n.flags&4)!==0}function Ud(n){return n.componentOffset>-1}function Rm(n){return(n.flags&1)===1}function oi(n){return!!n.template}function Vg(n){return(n[se]&512)!==0}var Lg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function nD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Tr(){return rD}function rD(n){return n.type.prototype.ngOnChanges&&(n.setInput=i1),r1}Tr.ngInherit=!0;function r1(){let n=oD(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function i1(n,e,t,r,i){let o=this.declaredInputs[r],s=oD(n)||o1(n,{previous:hs,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Lg(l&&l.currentValue,t,u===hs),nD(n,e,i,t)}var iD="__ngSimpleChanges__";function oD(n){return n[iD]||null}function o1(n,e){return n[iD]=e}var Z0=null;var Kn=function(n,e,t){Z0?.(n,e,t)},s1="svg",a1="math";function Xn(n){for(;Array.isArray(n);)n=n[Dr];return n}function sD(n,e){return Xn(e[n])}function wn(n,e){return Xn(e[n.index])}function aD(n,e){return n.data[e]}function ui(n,e){let t=e[n];return ti(t)?t:t[Dr]}function u1(n){return(n[se]&4)===4}function Nm(n){return(n[se]&128)===128}function c1(n){return br(n[xt])}function yd(n,e){return e==null?null:n[e]}function uD(n){n[ss]=0}function cD(n){n[se]&1024||(n[se]|=1024,Nm(n)&&Hd(n))}function l1(n,e){for(;n>0;)e=e[Cs],n--;return e}function $d(n){return!!(n[se]&9216||n[_n]?.dirty)}function jg(n){n[Zn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),$d(n)&&Hd(n)}function Hd(n){n[Zn].changeDetectionScheduler?.notify(0);let e=Ji(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Nm(e)));)e=Ji(e)}function lD(n,e){if((n[se]&256)===256)throw new X(911,!1);n[ei]===null&&(n[ei]=[]),n[ei].push(e)}function d1(n,e){if(n[ei]===null)return;let t=n[ei].indexOf(e);t!==-1&&n[ei].splice(t,1)}function Ji(n){let e=n[xt];return br(e)?e[xt]:e}var me={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dD=!1;function h1(){return me.lFrame.elementDepthCount}function f1(){me.lFrame.elementDepthCount++}function p1(){me.lFrame.elementDepthCount--}function hD(){return me.bindingsEnabled}function g1(){return me.skipHydrationRootTNode!==null}function m1(n){return me.skipHydrationRootTNode===n}function y1(){me.skipHydrationRootTNode=null}function Me(){return me.lFrame.lView}function $t(){return me.lFrame.tView}function Fe(n){return me.lFrame.contextLView=n,n[On]}function Ve(n){return me.lFrame.contextLView=null,n}function Mt(){let n=fD();for(;n!==null&&n.type===64;)n=n.parent;return n}function fD(){return me.lFrame.currentTNode}function v1(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _u(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function pD(){return me.lFrame.isParent}function _1(){me.lFrame.isParent=!1}function gD(){return dD}function J0(n){dD=n}function Pm(){return me.lFrame.bindingIndex}function w1(n){return me.lFrame.bindingIndex=n}function qd(){return me.lFrame.bindingIndex++}function zd(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function E1(){return me.lFrame.inI18n}function I1(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bg(e)}function C1(){return me.lFrame.currentDirectiveIndex}function Bg(n){me.lFrame.currentDirectiveIndex=n}function D1(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mD(){return me.lFrame.currentQueryIndex}function km(n){me.lFrame.currentQueryIndex=n}function b1(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[Fn]:null}function yD(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=b1(o),i===null||(o=o[Cs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=vD();return r.currentTNode=e,r.lView=n,!0}function Om(n){let e=vD(),t=n[fe];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?_D(n):e}function _D(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wD(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ED=wD;function Fm(){let n=wD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function T1(n){return(me.lFrame.contextLView=l1(n,me.lFrame.contextLView))[On]}function Sr(){return me.lFrame.selectedIndex}function Xi(n){me.lFrame.selectedIndex=n}function Vm(){let n=me.lFrame;return aD(n.tView,n.selectedIndex)}function S1(){return me.lFrame.currentNamespace}var ID=!0;function Lm(){return ID}function jm(n){ID=n}function A1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=rD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Bm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function od(n,e,t){CD(n,e,3,t)}function sd(n,e,t,r){(n[se]&3)===t&&CD(n,e,t,r)}function wg(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function CD(n,e,t,r){let i=r!==void 0?n[ss]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ss]+=65536),(a<o||o==-1)&&(x1(n,t,e,u),n[ss]=(n[ss]&4294901760)+u+2),u++}function X0(n,e){Kn(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Kn(5,n,e)}}function x1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[ss]>>16&&(n[se]&3)===e&&(n[se]+=16384,X0(a,o)):X0(a,o)}var ls=-1,eo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function M1(n){return n instanceof eo}function R1(n){return(n.flags&8)!==0}function N1(n){return(n.flags&16)!==0}var Eg={},Ug=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ld(r);let i=this.injector.get(e,Eg,r);return i!==Eg||t===Eg?i:this.parentInjector.get(e,t,r)}};function DD(n){return n!==ls}function vd(n){return n&32767}function P1(n){return n>>16}function _d(n,e){let t=P1(n),r=e;for(;t>0;)r=r[Cs],t--;return r}var $g=!0;function eC(n){let e=$g;return $g=n,e}var k1=256,bD=k1-1,TD=5,O1=0,Qn={};function F1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(cu)&&(r=t[cu]),r==null&&(r=t[cu]=O1++);let i=r&bD,o=1<<i;e.data[n+(i>>TD)]|=o}function wd(n,e){let t=SD(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,Ig(r.data,n),Ig(e,null),Ig(r.blueprint,null));let i=Um(n,e),o=n.injectorIndex;if(DD(i)){let s=vd(i),a=_d(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ig(n,e){n.push(0,0,0,0,0,0,0,0,e)}function SD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Um(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ND(i),r===null)return ls;if(t++,i=i[Cs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ls}function Hg(n,e,t){F1(n,e,t)}function V1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(BC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function AD(n,e,t){if(t&pe.Optional||n!==void 0)return n;bm(e,"NodeInjector")}function xD(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),!(t&(pe.Self|pe.Host))){let i=n[gs],o=yn(void 0);try{return i?i.get(e,r,t&pe.Optional):kC(e,r,t&pe.Optional)}finally{yn(o)}}return AD(r,e,t)}function MD(n,e,t,r=pe.Default,i){if(n!==null){if(e[se]&2048&&!(r&pe.Self)){let s=U1(n,e,t,r,Qn);if(s!==Qn)return s}let o=RD(n,e,t,r,Qn);if(o!==Qn)return o}return xD(e,t,r,i)}function RD(n,e,t,r,i){let o=j1(t);if(typeof o=="function"){if(!yD(e,n,r))return r&pe.Host?AD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))bm(t);else return s}finally{ED()}}else if(typeof o=="number"){let s=null,a=SD(n,e),u=ls,l=r&pe.Host?e[Jn][Fn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?Um(n,e):e[a+8],u===ls||!nC(r,!1)?a=-1:(s=e[fe],a=vd(u),e=_d(u,e)));a!==-1;){let h=e[fe];if(tC(o,a,h.data)){let p=L1(a,e,t,s,r,l);if(p!==Qn)return p}u=e[a+8],u!==ls&&nC(r,e[fe].data[a+8]===l)&&tC(o,a,e)?(s=h,a=vd(u),e=_d(u,e)):a=-1}}return i}function L1(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],u=r==null?Ud(a)&&$g:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,h=ad(a,s,t,u,l);return h!==null?to(e,s,h,a):Qn}function ad(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&oi(y)&&y.type===t)return u}return null}function to(n,e,t,r){let i=n[t],o=e.data;if(M1(i)){let s=i;s.resolving&&fP(hP(o[t]));let a=eC(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?yn(s.injectImpl):null,h=yD(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&A1(t,o[t],e)}finally{l!==null&&yn(l),eC(a),s.resolving=!1,ED()}}return i}function j1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(cu)?n[cu]:void 0;return typeof e=="number"?e>=0?e&bD:B1:e}function tC(n,e,t){let r=1<<n;return!!(t[e+(n>>TD)]&r)}function nC(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var Qi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MD(this._tNode,this._lView,e,Ld(r),t)}};function B1(){return new Qi(Mt(),Me())}function Ds(n){return yu(()=>{let e=n.prototype.constructor,t=e[cd]||qg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[cd]||qg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qg(n){return AC(n)?()=>{let e=qg(Bt(n));return e&&e()}:ds(n)}function U1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=RD(o,s,t,r|pe.Self,Qn);if(a!==Qn)return a;let u=o.parent;if(!u){let l=s[XC];if(l){let h=l.get(t,Qn,r);if(h!==Qn)return h}u=ND(s),s=s[Cs]}o=u}return i}function ND(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[Fn]:null}function $m(n){return V1(Mt(),n)}function rC(n,e=null,t=null,r){let i=PD(n,e,t,r);return i.resolveInjectorInitializers(),i}function PD(n,e=null,t=null,r,i=new Set){let o=[t||vn,HP(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new fu(o,e||Mm(),r||null,i)}var ln=class n{static{this.THROW_IF_NOT_FOUND=du}static{this.NULL=new hd}static create(e,t){if(Array.isArray(e))return rC({name:""},t,e,"");{let r=e.name??"";return rC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>L(VC)})}static{this.__NG_ELEMENT_ID__=-1}};var $1=new K("");$1.__NG_ELEMENT_ID__=n=>{let e=Mt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new X(204,!1)};var H1="ngOriginalError";function Cg(n){return n[H1]}var kD=!0,Hm=(()=>{class n{static{this.__NG_ELEMENT_ID__=q1}static{this.__NG_ENV_ID__=t=>t}}return n})(),zg=class extends Hm{constructor(e){super(),this._lView=e}onDestroy(e){return lD(this._lView,e),()=>d1(this._lView,e)}};function q1(){return new zg(Me())}var bs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Gg=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,JC()&&(this.destroyRef=$(Hm,{optional:!0})??void 0,this.pendingTasks=$(bs,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ye&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Je=Gg;function Ed(...n){}function OD(n){let e,t;function r(){n=Ed;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function iC(n){return queueMicrotask(()=>n()),()=>{n=Ed}}var qm="isAngularZone",Id=qm+"_ID",z1=0,we=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kD}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,K1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,G1,Ed,Ed);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},G1={};function zm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function W1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){OD(()=>{n.callbackScheduled=!1,Wg(n),n.isCheckStableRunning=!0,zm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Wg(n)}function K1(n){let e=()=>{W1(n)},t=z1++;n._inner=n._inner.fork({name:"angular",properties:{[qm]:!0,[Id]:t,[Id+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Q1(u))return r.invokeTask(o,s,a,u);try{return oC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return oC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Y1(u)&&e(),sC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Wg(n),zm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Wg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function oC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sC(n){n._nesting--,zm(n)}var Cd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Q1(n){return FD(n,"__ignore_ng_zone__")}function Y1(n){return FD(n,"__scheduler_tick__")}function FD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function Z1(n="zone.js",e){return n==="noop"?new Cd:n==="zone.js"?new we(e):n}var Er=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Cg(e);for(;t&&Cg(t);)t=Cg(t);return t||null}},J1=new K("",{providedIn:"root",factory:()=>{let n=$(we),e=$(Er);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function X1(){return Ts(Mt(),Me())}function Ts(n,e){return new En(wn(n,e))}var En=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=X1}}return n})();function ek(n){return n instanceof En?n.nativeElement:n}function tk(){return this._results[Symbol.iterator]()}var Kg=class n{get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=tk)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DP(e);(this._changesDetected=!CP(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function VD(n){return(n.flags&128)===128}var LD=new Map,nk=0;function rk(){return nk++}function ik(n){LD.set(n[Bd],n)}function Qg(n){LD.delete(n[Bd])}var aC="__ngContext__";function no(n,e){ti(e)?(n[aC]=e[Bd],ik(e)):n[aC]=e}function jD(n){return UD(n[pu])}function BD(n){return UD(n[Pn])}function UD(n){for(;n!==null&&!br(n);)n=n[Pn];return n}var Yg;function $D(n){Yg=n}function ok(){if(Yg!==void 0)return Yg;if(typeof document<"u")return document;throw new X(210,!1)}var Gd=new K("",{providedIn:"root",factory:()=>sk}),sk="ng",Gm=new K(""),Qt=new K("",{providedIn:"platform",factory:()=>"unknown"});var Wm=new K("",{providedIn:"root",factory:()=>ok().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ak="h",uk="b";var ck=()=>null;function Km(n,e,t=!1){return ck(n,e,t)}var HD=!1,lk=new K("",{providedIn:"root",factory:()=>HD});var Xl;function dk(){if(Xl===void 0&&(Xl=null,kn.trustedTypes))try{Xl=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xl}function uC(n){return dk()?.createScriptURL(n)||n}var Dd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TC})`}};function wu(n){return n instanceof Dd?n.changingThisBreaksApplicationSecurity:n}function Qm(n,e){let t=hk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${TC})`)}return t===e}function hk(n){return n instanceof Dd&&n.getTypeName()||null}var fk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qD(n){return n=String(n),n.match(fk)?n:"unsafe:"+n}var Wd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wd||{});function Ym(n){let e=GD();return e?e.sanitize(Wd.URL,n)||"":Qm(n,"URL")?wu(n):qD(an(n))}function pk(n){let e=GD();if(e)return uC(e.sanitize(Wd.RESOURCE_URL,n)||"");if(Qm(n,"ResourceURL"))return uC(wu(n));throw new X(904,!1)}function gk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?pk:Ym}function zD(n,e,t){return gk(e,t)(n)}function GD(){let n=Me();return n&&n[Zn].sanitizer}function WD(n){return n instanceof Function?n():n}function mk(n){return(n??$(ln)).get(Qt)==="browser"}var Ir=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ir||{}),yk;function Zm(n,e){return yk(n,e)}function as(n,e,t,r,i){if(r!=null){let o,s=!1;br(r)?o=r:ti(r)&&(s=!0,r=r[Dr]);let a=Xn(r);n===0&&t!==null?i==null?JD(e,t,a):bd(e,t,a,i||null,!0):n===1&&t!==null?bd(e,t,a,i||null,!0):n===2?Nk(e,a,s):n===3&&e.destroyNode(a),o!=null&&kk(e,n,o,t,i)}}function vk(n,e){return n.createText(e)}function _k(n,e,t){n.setValue(e,t)}function KD(n,e,t){return n.createElement(e,t)}function wk(n,e){QD(n,e),e[Dr]=null,e[Fn]=null}function Ek(n,e,t,r,i,o){r[Dr]=i,r[Fn]=e,Kd(n,r,t,1,i,o)}function QD(n,e){e[Zn].changeDetectionScheduler?.notify(9),Kd(n,e,e[dt],2,null,null)}function Ik(n){let e=n[pu];if(!e)return Dg(n[fe],n);for(;e;){let t=null;if(ti(e))t=e[pu];else{let r=e[un];r&&(t=r)}if(!t){for(;e&&!e[Pn]&&e!==n;)ti(e)&&Dg(e[fe],e),e=e[xt];e===null&&(e=n),ti(e)&&Dg(e[fe],e),t=e&&e[Pn]}e=t}}function Ck(n,e,t,r){let i=un+r,o=t.length;r>0&&(t[i-1][Pn]=e),r<o-un?(e[Pn]=t[i],FC(t,un+r,e)):(t.push(e),e[Pn]=null),e[xt]=t;let s=e[Yi];s!==null&&t!==s&&YD(s,e);let a=e[wr];a!==null&&a.insertView(n),jg(e),e[se]|=128}function YD(n,e){let t=n[ms],r=e[xt];if(ti(r))n[se]|=md.HasTransplantedViews;else{let i=r[xt][Jn];e[Jn]!==i&&(n[se]|=md.HasTransplantedViews)}t===null?n[ms]=[e]:t.push(e)}function Jm(n,e){let t=n[ms],r=t.indexOf(e);t.splice(r,1)}function Zg(n,e){if(n.length<=un)return;let t=un+e,r=n[t];if(r){let i=r[Yi];i!==null&&i!==n&&Jm(i,r),e>0&&(n[t-1][Pn]=r[Pn]);let o=dd(n,un+e);wk(r[fe],r);let s=o[wr];s!==null&&s.detachView(o[fe]),r[xt]=null,r[Pn]=null,r[se]&=-129}return r}function ZD(n,e){if(!(e[se]&256)){let t=e[dt];t.destroyNode&&Kd(n,e,t,3,null,null),Ik(e)}}function Dg(n,e){if(e[se]&256)return;let t=Ce(null);try{e[se]&=-129,e[se]|=256,e[_n]&&Yp(e[_n]),bk(n,e),Dk(n,e),e[fe].type===1&&e[dt].destroy();let r=e[Yi];if(r!==null&&br(e[xt])){r!==e[xt]&&Jm(r,e);let i=e[wr];i!==null&&i.detachView(n)}Qg(e)}finally{Ce(t)}}function Dk(n,e){let t=n.cleanup,r=e[pd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[pd]=null);let i=e[ei];if(i!==null){e[ei]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function bk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof eo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Kn(4,a,u);try{u.call(a)}finally{Kn(5,a,u)}}else{Kn(4,i,o);try{o.call(i)}finally{Kn(5,i,o)}}}}}function Tk(n,e,t){return Sk(n,e.parent,t)}function Sk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Dr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Yn.None||o===Yn.Emulated)return null}return wn(r,t)}}function bd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function cC(n,e,t,r,i){r!==null?bd(n,e,t,r,i):JD(n,e,t)}function XD(n,e){return n.parentNode(e)}function Ak(n,e){return n.nextSibling(e)}function xk(n,e,t){return Rk(n,e,t)}function Mk(n,e,t){return n.type&40?wn(n,t):null}var Rk=Mk,lC;function Xm(n,e,t,r){let i=Tk(n,r,e),o=e[dt],s=r.parent||e[Fn],a=xk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)cC(o,i,t[u],a,!1);else cC(o,i,t,a,!1);lC!==void 0&&lC(o,r,e,t,i)}function uu(n,e){if(e!==null){let t=e.type;if(t&3)return wn(e,n);if(t&4)return Jg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uu(n,r);{let i=n[e.index];return br(i)?Jg(-1,i):Xn(i)}}else{if(t&128)return uu(n,e.next);if(t&32)return Zm(e,n)()||Xn(n[e.index]);{let r=eb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ji(n[Jn]);return uu(i,r)}else return uu(n,e.next)}}}return null}function eb(n,e){if(e!==null){let r=n[Jn][Fn],i=e.projection;return r.projection[i]}return null}function Jg(n,e){let t=un+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return uu(r,i)}return e[Zi]}function Nk(n,e,t){n.removeChild(null,e,t)}function ey(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&no(Xn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)ey(n,e,t.child,r,i,o,!1),as(e,n,i,a,o);else if(u&32){let l=Zm(t,r),h;for(;h=l();)as(e,n,i,h,o);as(e,n,i,a,o)}else u&16?Pk(n,e,r,t,i,o):as(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Kd(n,e,t,r,i,o){ey(t,r,n.firstChild,e,i,o,!1)}function Pk(n,e,t,r,i,o){let s=t[Jn],u=s[Fn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];as(e,n,i,h,o)}else{let l=u,h=s[xt];VD(r)&&(l.flags|=128),ey(n,e,l,h,i,o,!0)}}function kk(n,e,t,r,i){let o=t[Zi],s=Xn(t);o!==s&&as(e,n,r,o,i);for(let a=un;a<t.length;a++){let u=t[a];Kd(u[fe],u,n,e,r,o)}}function Ok(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ir.Important),n.setStyle(t,r,i,o))}}function Fk(n,e,t){n.setAttribute(e,"style",t)}function tb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Pg(n,e,r),i!==null&&tb(n,e,i),o!==null&&Fk(n,e,o)}var In={};function ee(n=1){rb($t(),Me(),Sr()+n,!1)}function rb(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&od(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sd(e,o,0,t)}Xi(t)}function ie(n,e=pe.Default){let t=Me();if(t===null)return L(n,e);let r=Mt();return MD(r,t,Bt(n),e)}function ib(){let n="invalid";throw new Error(n)}function ob(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&ni.SignalBased&&(a=e[r][mr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ni.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):nD(e,a,r,o)}finally{Ce(s)}}function Vk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xi(~i);else{let o=i,s=t[++r],a=t[++r];I1(s,o);let u=e[o];a(2,u)}}}finally{Xi(-1)}}function Qd(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Dr]=i,p[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),uD(p),p[xt]=p[Cs]=n,p[On]=t,p[Zn]=s||n&&n[Zn],p[dt]=a||n&&n[dt],p[gs]=u||n&&n[gs]||null,p[Fn]=o,p[Bd]=rk(),p[fd]=h,p[XC]=l,p[Jn]=e.type==2?n[Jn]:p,p}function Yd(n,e,t,r,i){let o=n.data[e];if(o===null)o=Lk(n,e,t,r,i),E1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=v1();o.injectorIndex=s===null?-1:s.injectorIndex}return _u(o,!0),o}function Lk(n,e,t,r,i){let o=fD(),s=pD(),a=s?o:o&&o.parent,u=n.data[e]=qk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function sb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ab(n,e,t,r,i){let o=Sr(),s=r&2;try{Xi(-1),s&&e.length>ii&&rb(n,e,ii,!1),Kn(s?2:0,i),t(r,i)}finally{Xi(o),Kn(s?3:1,i)}}function ub(n,e,t){if(tD(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function cb(n,e,t){hD()&&(Yk(n,e,t,wn(t,e)),(t.flags&64)===64&&gb(n,e,t))}function lb(n,e,t=wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function db(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ty(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ty(n,e,t,r,i,o,s,a,u,l,h){let p=ii+r,g=p+i,y=jk(p,g),b=typeof l=="function"?l():l;return y[fe]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function jk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:In);return t}function Bk(n,e,t,r){let o=r.get(lk,HD)||t===Yn.ShadowDom,s=n.selectRootElement(e,o);return Uk(s),s}function Uk(n){$k(n)}var $k=()=>null;function Hk(n,e,t,r){let i=vb(e);i.push(t),n.firstCreatePass&&_b(n).push(r,i.length-1)}function qk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return g1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=ni.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?hC(r,t,l,a,u):hC(r,t,l,a)}return r}function hC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function zk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],g=t?t.get(p):null,y=g?g.inputs:null,b=g?g.outputs:null;u=dC(0,p.inputs,h,u,y),l=dC(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!Am(e)?aO(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Gk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hb(n,e,t,r,i,o,s,a){let u=wn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ny(n,t,h,r,i),Ud(e)&&Wk(t,e.index)):e.type&3?(r=Gk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Wk(n,e){let t=ui(e,n);t[se]&16||(t[se]|=64)}function fb(n,e,t,r){if(hD()){let i=r===null?null:{"":-1},o=Jk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&pb(n,e,t,s,i,a),i&&Xk(t,r,i)}t.mergedAttrs=hu(t.mergedAttrs,t.attrs)}function pb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Hg(wd(t,e),n,r[l].type);tO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=sb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=hu(t.mergedAttrs,h.hostAttrs),nO(n,t,e,u,h),eO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}zk(n,t,o)}function Kk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Qk(s)!=a&&s.push(a),s.push(t,r,o)}}function Qk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Yk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Ud(t)&&rO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||wd(t,e),no(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=to(e,n,a,t);if(no(l,e),s!==null&&sO(e,a-i,l,u,t,s),oi(u)){let h=ui(t.index,e);h[On]=to(e,n,a,t)}}}function gb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=C1();try{Xi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Bg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Zk(u,l)}}finally{Xi(-1),Bg(s)}}function Zk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Jk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(kP(e,s.selectors,!1))if(r||(r=[]),oi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Xg(n,e,u)}else r.unshift(s),Xg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Xk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function eO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;oi(e)&&(t[""]=n)}}function tO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function nO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ds(i.type,!0)),s=new eo(o,oi(i),ie);n.blueprint[r]=s,t[r]=s,Kk(n,e,r,sb(n,t,i.hostVars,In),i)}function rO(n,e,t){let r=wn(e,n),i=db(t),o=n[Zn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Zd(n,Qd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function iO(n,e,t,r,i,o){let s=wn(n,e);oO(e[dt],s,o,n.value,t,r,i)}function oO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?an(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function sO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];ob(r,t,u,l,h,p)}}function aO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function mb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yb(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];km(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function Zd(n,e){return n[pu]?n[Y0][Pn]=e:n[pu]=e,n[Y0]=e,e}function em(n,e,t){km(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function vb(n){return n[pd]??=[]}function _b(n){return n.cleanup??=[]}function wb(n,e){let t=n[gs],r=t?t.get(Er,null):null;r&&r.handleError(e)}function ny(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];ob(h,l,r,a,u,i)}}function Jd(n,e,t){let r=sD(e,n);_k(n[dt],r,t)}function uO(n,e){let t=ui(e,n),r=t[fe];cO(r,t);let i=t[Dr];i!==null&&t[fd]===null&&(t[fd]=Km(i,t[gs])),ry(r,t,t[On])}function cO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ry(n,e,t){Om(e);try{let r=n.viewQuery;r!==null&&em(1,r,t);let i=n.template;i!==null&&ab(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wr]?.finishViewCreation(n),n.staticContentQueries&&yb(n,e),n.staticViewQueries&&em(2,n.viewQuery,t);let o=n.components;o!==null&&lO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Fm()}}function lO(n,e){for(let t=0;t<e.length;t++)uO(n,e[t])}function dO(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=Qd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Yi]=l;let h=n[wr];return h!==null&&(u[wr]=h.createEmbeddedView(o)),ry(o,u,t),u}finally{Ce(i)}}function fC(n,e){return!e||e.firstChild===null||VD(n)}function hO(n,e,t,r=!0){let i=e[fe];if(Ck(i,e,n,t),r){let s=Jg(t,n),a=e[dt],u=XD(a,n[Zi]);u!==null&&Ek(i,n[Fn],a,e,u,s)}let o=e[fd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Td(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Xn(o)),br(o)&&fO(o,r);let s=t.type;if(s&8)Td(n,e,t.child,r);else if(s&32){let a=Zm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=eb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ji(e[Jn]);Td(u[fe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fO(n,e){for(let t=un;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Td(r[fe],r,i,e)}n[Zi]!==n[Dr]&&e.push(n[Zi])}var Eb=[];function pO(n){return n[_n]??gO(n)}function gO(n){let e=Eb.pop()??Object.create(yO);return e.lView=n,e}function mO(n){n.lView[_n]!==n&&(n.lView=null,Eb.push(n))}var yO=ge(P({},eu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Hd(n.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function vO(n){let e=n[_n]??Object.create(_O);return e.lView=n,e}var _O=ge(P({},eu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ji(n.lView);for(;e&&!Ib(e[fe]);)e=Ji(e);e&&cD(e)},consumerOnSignalRead(){this.lView[_n]=this}});function Ib(n){return n.type!==2}var wO=100;function Cb(n,e=!0,t=0){let r=n[Zn],i=r.rendererFactory,o=!1;o||i.begin?.();try{EO(n,t)}catch(s){throw e&&wb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function EO(n,e){let t=gD();try{J0(!0),tm(n,e);let r=0;for(;$d(n);){if(r===wO)throw new X(103,!1);r++,tm(n,1)}}finally{J0(t)}}function IO(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Zn].inlineEffectRunner?.flush(),Om(e);let a=!0,u=null,l=null;o||(Ib(n)?(l=pO(e),u=Il(l)):o0()===null?(a=!1,l=vO(e),u=Il(l)):e[_n]&&(Yp(e[_n]),e[_n]=null));try{uD(e),w1(n.bindingStartIndex),t!==null&&ab(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&od(e,y,null)}else{let y=n.preOrderHooks;y!==null&&sd(e,y,0,null),wg(e,0)}if(s||CO(e),Db(e,0),n.contentQueries!==null&&yb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&od(e,y)}else{let y=n.contentHooks;y!==null&&sd(e,y,1),wg(e,1)}Vk(n,e);let p=n.components;p!==null&&Tb(e,p,0);let g=n.viewQuery;if(g!==null&&em(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&od(e,y)}else{let y=n.viewHooks;y!==null&&sd(e,y,2),wg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[_g]){for(let y of e[_g])y();e[_g]=null}o||(e[se]&=-73)}catch(h){throw o||Hd(e),h}finally{l!==null&&(Kp(l,u),a&&mO(l)),Fm()}}function Db(n,e){for(let t=jD(n);t!==null;t=BD(t))for(let r=un;r<t.length;r++){let i=t[r];bb(i,e)}}function CO(n){for(let e=jD(n);e!==null;e=BD(e)){if(!(e[se]&md.HasTransplantedViews))continue;let t=e[ms];for(let r=0;r<t.length;r++){let i=t[r];cD(i)}}}function DO(n,e,t){let r=ui(e,n);bb(r,t)}function bb(n,e){Nm(n)&&tm(n,e)}function tm(n,e){let r=n[fe],i=n[se],o=n[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Qp(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)IO(r,n,r.template,n[On]);else if(i&8192){Db(n,1);let a=r.components;a!==null&&Tb(n,a,1)}}function Tb(n,e,t){for(let r=0;r<e.length;r++)DO(n,e[r],t)}function iy(n,e){let t=gD()?64:1088;for(n[Zn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=Ji(n);if(Vg(n)&&!r)return n;n=r}return null}var ro=class{get rootNodes(){let e=this._lView,t=e[fe];return Td(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(br(e)){let t=e[gd],r=t?t.indexOf(this):-1;r>-1&&(Zg(e,r),dd(t,r))}this._attachedToViewContainer=!1}ZD(this._lView[fe],this._lView)}onDestroy(e){lD(this._lView,e)}markForCheck(){iy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){jg(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,Cb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vg(this._lView),t=this._lView[Yi];t!==null&&!e&&Jm(t,this._lView),QD(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Vg(this._lView),r=this._lView[Yi];r!==null&&!t&&YD(r,this._lView),jg(this._lView)}},io=(()=>{class n{static{this.__NG_ELEMENT_ID__=SO}}return n})(),bO=io,TO=class extends bO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=dO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ro(i)}};function SO(){return oy(Mt(),Me())}function oy(n,e){return n.type&4?new TO(e,n,Ts(n,e)):null}var KG=new RegExp(`^(\\d+)*(${uk}|${ak})*(.*)`);var AO=()=>null;function pC(n,e){return AO(n,e)}var ys=class{},sy=new K("",{providedIn:"root",factory:()=>!1});var Sb=new K(""),Ab=new K(""),nm=class{},Sd=class{};function xO(n){let e=Error(`No component factory found for ${Ut(n)}.`);return e[MO]=n,e}var MO="ngComponent";var rm=class{resolveComponentFactory(e){throw xO(e)}},vs=class{static{this.NULL=new rm}},_s=class{},ci=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>RO()}}return n})();function RO(){let n=Me(),e=Mt(),t=ui(e.index,n);return(ti(t)?t:n)[dt]}var NO=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function im(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=B0(i,a);else if(o==2){let u=a,l=e[++s];r=B0(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ad=class extends vs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ri(e);return new ws(t,this.ngModule)}};function gC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ni.None;e?t.push({propName:s,templateName:r,isSignal:(a&ni.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function PO(n){let e=n.toLowerCase();return e==="svg"?s1:e==="math"?a1:null}var ws=class extends Sd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=gC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return gC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=LP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ug(e,s):e,u=a.get(_s,null);if(u===null)throw new X(407,!1);let l=a.get(NO,null),h=a.get(ys,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?Bk(g,r,this.componentDef.encapsulation,a):KD(g,y,PO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let x=null;b!==null&&(x=Km(b,a,!0));let B=ty(0,null,null,1,0,null,null,null,null,null,null),W=Qd(null,B,null,A,null,null,p,g,a,null,x);Om(W);let j,J,oe=null;try{let te=this.componentDef,E,v=null;te.findHostDirectiveDefs?(E=[],v=new Map,te.findHostDirectiveDefs(te,E,v),E.push(te)):E=[te];let w=kO(W,b);oe=OO(w,b,te,E,W,p,g),J=aD(B,ii),b&&LO(g,te,b,r),t!==void 0&&jO(J,this.ngContentSelectors,t),j=VO(oe,te,E,v,W,[BO]),ry(B,W,null)}catch(te){throw oe!==null&&Qg(oe),Qg(W),te}finally{Fm()}return new om(this.componentType,j,Ts(J,W),W,J)}finally{Ce(o)}}},om=class extends nm{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ro(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ny(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=ui(this._tNode.index,o);iy(s,1)}}get injector(){return new Qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kO(n,e){let t=n[fe],r=ii;return n[r]=e,Yd(t,r,2,"#host",null)}function OO(n,e,t,r,i,o,s){let a=i[fe];FO(r,n,e,s);let u=null;e!==null&&(u=Km(e,i[gs]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Qd(i,db(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Xg(a,n,r.length-1),Zd(i,p),i[n.index]=p}function FO(n,e,t,r){for(let i of n)e.mergedAttrs=hu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(im(e,e.mergedAttrs,!0),t!==null&&nb(r,t,e))}function VO(n,e,t,r,i,o){let s=Mt(),a=i[fe],u=wn(s,i);pb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,g=to(i,a,p,s);no(g,i)}gb(a,i,s),u&&no(u,i);let l=to(i,a,s.directiveStart+s.componentOffset,s);if(n[On]=i[On]=l,o!==null)for(let h of o)h(l,e);return ub(a,s,i),l}function LO(n,e,t,r){if(r)Pg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=jP(e.selectors[0]);i&&Pg(n,t,i),o&&o.length>0&&tb(n,t,o.join(" "))}}function jO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function BO(){let n=Mt();Bm(Me()[fe],n)}var li=(()=>{class n{static{this.__NG_ELEMENT_ID__=UO}}return n})();function UO(){let n=Mt();return Mb(n,Me())}var $O=li,xb=class extends $O{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new Qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Um(this._hostTNode,this._hostLView);if(DD(e)){let t=_d(e,this._hostLView),r=vd(e),i=t[fe].data[r+8];return new Qi(i,t)}else return new Qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=mC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=pC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!n1(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new ws(ri(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(cn,null);A&&(o=A)}let h=ri(u.componentType??{}),p=pC(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,fC(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(c1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[xt],l=new xb(u,u[Fn],u[xt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return hO(s,i,o,r),e.attachToViewContainerRef(),FC(bg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=mC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Zg(this._lContainer,t);r&&(dd(bg(this._lContainer),t),ZD(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Zg(this._lContainer,t);return r&&dd(bg(this._lContainer),t)!=null?new ro(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function mC(n){return n[gd]}function bg(n){return n[gd]||(n[gd]=[])}function Mb(n,e){let t,r=e[n.index];return br(r)?t=r:(t=mb(r,e,null,n),e[n.index]=t,Zd(e,t)),qO(t,e,n,r),new xb(t,n,e)}function HO(n,e){let t=n[dt],r=t.createComment(""),i=wn(e,n),o=XD(t,i);return bd(t,o,r,Ak(t,i),!1),r}var qO=WO,zO=()=>!1;function GO(n,e,t){return zO(n,e,t)}function WO(n,e,t,r){if(n[Zi])return;let i;t.type&8?i=Xn(r):i=HO(e,t),n[Zi]=i}var sm=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},am=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ay(e,t).matches!==null&&this.queries[t].setDirty()}},um=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=tF(e):this.predicate=e}},cm=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lm=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,KO(t,o)),this.matchTNodeWithReadOption(e,t,ad(t,e,o,!1,!1))}else r===io?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ad(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===En||i===li||i===io&&t.type&4)this.addMatch(t.index,-2);else{let o=ad(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function KO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function QO(n,e){return n.type&11?Ts(n,e):n.type&4?oy(n,e):null}function YO(n,e,t,r){return t===-1?QO(e,n):t===-2?ZO(n,e,r):to(n,n[fe],t,e)}function ZO(n,e,t){if(t===En)return Ts(e,n);if(t===io)return oy(e,n);if(t===li)return Mb(e,n)}function Rb(n,e,t,r){let i=e[wr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(YO(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function dm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Rb(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=un;p<h.length;p++){let g=h[p];g[Yi]===g[xt]&&dm(g[fe],g,l,r)}if(h[ms]!==null){let p=h[ms];for(let g=0;g<p.length;g++){let y=p[g];dm(y[fe],y,l,r)}}}}}return r}function JO(n,e){return n[wr].queries[e].queryList}function XO(n,e,t){let r=new Kg((t&4)===4);return Hk(n,e,r,r.destroy),(e[wr]??=new am).queries.push(new sm(r))-1}function eF(n,e,t,r){let i=$t();if(i.firstCreatePass){let o=Mt();nF(i,new um(e,t,r),o.index),rF(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return XO(i,Me(),t)}function tF(n){return n.split(",").map(e=>e.trim())}function nF(n,e,t){n.queries===null&&(n.queries=new cm),n.queries.track(new lm(e,t))}function rF(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function ay(n,e){return n.queries.getByIndex(e)}function iF(n,e){let t=n[fe],r=ay(t,e);return r.crossesNgTemplate?dm(t,n,e,[]):Rb(t,n,r,e)}var yC=new Set;function Eu(n){yC.has(n)||(yC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function oF(n){return typeof n=="function"&&n[mr]!==void 0}function Iu(n,e){Eu("NgSignals");let t=m0(n),r=t[mr];return e?.equal&&(r.equal=e.equal),t.set=i=>Zp(r,i),t.update=i=>y0(r,i),t.asReadonly=sF.bind(t),t}function sF(){let n=this[mr];if(n.readonlyFn===void 0){let e=()=>this();e[mr]=n,n.readonlyFn=e}return n.readonlyFn}function Nb(n){return oF(n)&&typeof n.set=="function"}function aF(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(dF))}return o}return xd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,g)=>{a.push(""),s.push(r(p).then(y=>{a[l+g]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>hF(o));e.push(u)}),cF(),Promise.all(e).then(()=>{})}var xd=new Map,uF=new Set;function cF(){let n=xd;return xd=new Map,n}function lF(){return xd.size===0}function dF(n){return typeof n=="string"?n:n.text()}function hF(n){uF.delete(n)}function fF(n){return Object.getPrototypeOf(n.prototype).constructor}function Ar(n){let e=fF(n.type),t=!0,r=[n];for(;e;){let i;if(oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ed(n.inputs),s.inputTransforms=ed(n.inputTransforms),s.declaredInputs=ed(n.declaredInputs),s.outputs=ed(n.outputs);let a=i.hostBindings;a&&vF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&mF(n,u),l&&yF(n,l),pF(n,i),iP(n.outputs,i.outputs),oi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ar&&(t=!1)}}e=Object.getPrototypeOf(e)}gF(r)}function pF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function gF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hu(i.hostAttrs,t=hu(t,i.hostAttrs))}}function ed(n){return n===hs?{}:n===vn?[]:n}function mF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function yF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function vF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function uy(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var si=class{},gu=class{};var Md=class extends si{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ad(this);let o=zC(e);this._bootstrapComponents=WD(o.bootstrap),this._r3Injector=PD(e,t,[{provide:si,useValue:this},{provide:vs,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Rd=class extends gu{constructor(e){super(),this.moduleType=e}create(e){return new Md(this.moduleType,e,[])}};function _F(n,e,t){return new Md(n,e,t,!1)}var hm=class extends si{constructor(e){super(),this.componentFactoryResolver=new Ad(this),this.instance=null;let t=new fu([...e.providers,{provide:si,useValue:this},{provide:vs,useValue:this.componentFactoryResolver}],e.parent||Mm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xd(n,e,t=null){return new hm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Pb(n){return EF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function wF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function EF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ai(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Nd(n,e,t,r){let i=ai(n,e,t);return ai(n,e+1,r)||i}function IF(n,e,t,r,i){let o=Nd(n,e,t,r);return ai(n,e+2,i)||o}function CF(n,e,t,r,i,o){let s=Nd(n,e,t,r);return Nd(n,e+2,i,o)||s}function DF(n){return(n.flags&32)===32}function bF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Yd(e,n,4,s||null,a||null);fb(e,t,h,yd(l,u)),Bm(e,h);let p=h.tView=ty(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function TF(n,e,t,r,i,o,s,a,u,l){let h=t+ii,p=e.firstCreatePass?bF(h,e,n,r,i,o,s,a,u):e.data[h];_u(p,!1);let g=SF(e,n,p,t);Lm()&&Xm(e,n,g,p),no(g,n);let y=mb(g,n,g,p);return n[h]=y,Zd(n,y),GO(y,p,n),Rm(p)&&cb(e,n,p),u!=null&&lb(n,p,l),p}function Rt(n,e,t,r,i,o,s,a){let u=Me(),l=$t(),h=yd(l.consts,o);return TF(u,l,n,e,t,r,i,h,s,a),Rt}var SF=AF;function AF(n,e,t,r){return jm(!0),e[dt].createComment("")}var us=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(us||{}),kb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),fm=class n{constructor(){this.ngZone=$(we),this.scheduler=$(ys),this.errorHandler=$(Er,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[us.EarlyRead,us.Write,us.MixedReadWrite,us.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}},pm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function cy(n,e){!e?.injector&&e1(cy);let t=e?.injector??$(ln);return mk(t)?(Eu("NgAfterNextRender"),MF(n,t,e,!0)):RF}function xF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function MF(n,e,t,r){let i=e.get(kb);i.impl??=e.get(fm);let o=t?.phase??us.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Hm):null,a=new pm(i.impl,xF(n,o),r,s);return i.impl.register(a),a}var RF={destroy(){}};function Cu(n,e,t,r){let i=Me(),o=qd();if(ai(i,o,e)){let s=$t(),a=Vm();iO(a,i,n,e,t,r)}return Cu}function NF(n,e,t,r){return ai(n,qd(),t)?e+an(t)+r:In}function PF(n,e,t,r,i,o){let s=Pm(),a=Nd(n,s,t,i);return zd(2),a?e+an(t)+r+an(i)+o:In}function kF(n,e,t,r,i,o,s,a){let u=Pm(),l=IF(n,u,t,i,s);return zd(3),l?e+an(t)+r+an(i)+o+an(s)+a:In}function OF(n,e,t,r,i,o,s,a,u,l){let h=Pm(),p=CF(n,h,t,i,s,u);return zd(4),p?e+an(t)+r+an(i)+o+an(s)+a+an(u)+l:In}function td(n,e){return n<<17|e<<2}function oo(n){return n>>17&32767}function FF(n){return(n&2)==2}function VF(n,e){return n&131071|e<<17}function gm(n){return n|2}function Es(n){return(n&131068)>>2}function Tg(n,e){return n&-131069|e<<2}function LF(n){return(n&1)===1}function mm(n){return n|1}function jF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=oo(s),u=Es(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||vu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=oo(n[a+1]);n[r+1]=td(g,a),g!==0&&(n[g+1]=Tg(n[g+1],r)),n[a+1]=VF(n[a+1],r)}else n[r+1]=td(a,0),a!==0&&(n[a+1]=Tg(n[a+1],r)),a=r;else n[r+1]=td(u,0),a===0?a=r:n[u+1]=Tg(n[u+1],r),u=r;l&&(n[r+1]=gm(n[r+1])),vC(n,h,r,!0),vC(n,h,r,!1),BF(e,h,n,r,o),s=td(a,u),o?e.classBindings=s:e.styleBindings=s}function BF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&vu(o,e)>=0&&(t[r+1]=mm(t[r+1]))}function vC(n,e,t,r){let i=n[t+1],o=e===null,s=r?oo(i):Es(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];UF(u,e)&&(a=!0,n[s+1]=r?mm(l):gm(l)),s=r?oo(l):Es(l)}a&&(n[t+1]=r?gm(i):mm(i))}function UF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?vu(n,e)>=0:!1}function It(n,e,t){let r=Me(),i=qd();if(ai(r,i,e)){let o=$t(),s=Vm();hb(o,s,r,n,e,r[dt],t,!1)}return It}function _C(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";ny(n,t,o[s],s,r)}function eh(n,e){return $F(n,e,null,!0),eh}function $F(n,e,t,r){let i=Me(),o=$t(),s=zd(2);if(o.firstUpdatePass&&qF(o,n,s,r),e!==In&&ai(i,s,e)){let a=o.data[Sr()];QF(o,a,i,i[dt],n,i[s+1]=YF(e,t),r,s)}}function HF(n,e){return e>=n.expandoStartIndex}function qF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Sr()],s=HF(n,t);ZF(o,r)&&e===null&&!s&&(e=!1),e=zF(i,o,e,r),jF(i,o,e,t,s,r)}}function zF(n,e,t,r){let i=D1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Sg(null,n,e,t,r),t=mu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Sg(i,n,e,t,r),o===null){let u=GF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Sg(null,n,e,u[1],r),u=mu(u,e.attrs,r),WF(n,e,r,u))}else o=KF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function GF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Es(r)!==0)return n[oo(r)]}function WF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[oo(i)]=r}function KF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=mu(r,s,t)}return mu(r,e.attrs,t)}function Sg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=mu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function mu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),TP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function QF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=LF(l)?wC(u,e,t,i,Es(l),s):void 0;if(!Pd(h)){Pd(o)||FF(l)&&(o=wC(u,null,t,i,a,s));let p=sD(Sr(),t);Ok(r,s,p,i,o)}}function wC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===In&&(g=p?vn:void 0);let y=p?yg(g,r):h===r?g:void 0;if(l&&!Pd(y)&&(y=yg(u,r)),Pd(y)&&(a=y,s))return a;let b=n[i+1];i=s?oo(b):Es(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=yg(u,r))}return a}function Pd(n){return n!==void 0}function YF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ut(wu(n)))),n}function ZF(n,e){return(n.flags&(e?8:16))!==0}function JF(n,e,t,r,i,o){let s=e.consts,a=yd(s,i),u=Yd(e,n,2,r,a);return fb(e,t,u,yd(s,o)),u.attrs!==null&&im(u,u.attrs,!1),u.mergedAttrs!==null&&im(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function O(n,e,t,r){let i=Me(),o=$t(),s=ii+n,a=i[dt],u=o.firstCreatePass?JF(s,o,i,e,t,r):o.data[s],l=XF(o,i,u,a,e,n);i[s]=l;let h=Rm(u);return _u(u,!0),nb(a,l,u),!DF(u)&&Lm()&&Xm(o,i,l,u),h1()===0&&no(l,i),f1(),h&&(cb(o,i,u),ub(o,u,i)),r!==null&&lb(i,u),O}function k(){let n=Mt();pD()?_1():(n=n.parent,_u(n,!1));let e=n;m1(e)&&y1(),p1();let t=$t();return t.firstCreatePass&&(Bm(t,n),tD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&R1(e)&&_C(t,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&N1(e)&&_C(t,e,Me(),e.stylesWithoutHost,!1),k}function xr(n,e,t,r){return O(n,e,t,r),k(),xr}var XF=(n,e,t,r,i,o)=>(jm(!0),KD(r,i,S1()));function Yt(){return Me()}var kd="en-US";var eV=kd;function tV(n){typeof n=="string"&&(eV=n.toLowerCase().replace(/_/g,"-"))}var nV=(n,e,t)=>{};function Ae(n,e,t,r){let i=Me(),o=$t(),s=Mt();return Ob(o,i,i[dt],s,n,e,r),Ae}function rV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[pd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Ob(n,e,t,r,i,o,s){let a=Rm(r),l=n.firstCreatePass&&_b(n),h=e[On],p=vb(e),g=!0;if(r.type&3||s){let A=wn(r,e),x=s?s(A):A,B=p.length,W=s?J=>s(Xn(J[r.index])):r.index,j=null;if(!s&&a&&(j=rV(n,e,i,r.index)),j!==null){let J=j.__ngLastListenerFn__||j;J.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,g=!1}else{o=IC(r,e,h,o),nV(A,i,o);let J=t.listen(x,i,o);p.push(o,J),l&&l.push(i,W,B,B+1)}}else o=IC(r,e,h,o);let y=r.outputs,b;if(g&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let x=0;x<A;x+=2){let B=b[x],W=b[x+1],oe=e[B][W].subscribe(o),te=p.length;p.push(o,oe),l&&l.push(i,r.index,te,-(te+1))}}}function EC(n,e,t,r){let i=Ce(null);try{return Kn(6,e,t),t(r)!==!1}catch(o){return wb(n,o),!1}finally{Kn(7,e,t),Ce(i)}}function IC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?ui(n.index,e):e;iy(s,5);let a=EC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=EC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ne(n=1){return T1(n)}function Fb(n,e,t,r){eF(n,e,t,r)}function Vb(n){let e=Me(),t=$t(),r=mD();km(r+1);let i=ay(t,r);if(n.dirty&&u1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=iF(e,r);n.reset(o,ek),n.notifyOnChanges()}return!0}return!1}function Lb(){return JO(Me(),mD())}function z(n,e=""){let t=Me(),r=$t(),i=n+ii,o=r.firstCreatePass?Yd(r,i,1,e,null):r.data[i],s=iV(r,t,o,e,n);t[i]=s,Lm()&&Xm(r,t,s,o),_u(o,!1)}var iV=(n,e,t,r,i)=>(jm(!0),vk(e[dt],r));function Nt(n){return Cn("",n,""),Nt}function Cn(n,e,t){let r=Me(),i=NF(r,n,e,t);return i!==In&&Jd(r,Sr(),i),Cn}function Du(n,e,t,r,i){let o=Me(),s=PF(o,n,e,t,r,i);return s!==In&&Jd(o,Sr(),s),Du}function ly(n,e,t,r,i,o,s){let a=Me(),u=kF(a,n,e,t,r,i,o,s);return u!==In&&Jd(a,Sr(),u),ly}function dy(n,e,t,r,i,o,s,a,u){let l=Me(),h=OF(l,n,e,t,r,i,o,s,a,u);return h!==In&&Jd(l,Sr(),h),dy}function De(n,e,t){Nb(e)&&(e=e());let r=Me(),i=qd();if(ai(r,i,e)){let o=$t(),s=Vm();hb(o,s,r,n,e,r[dt],t,!1)}return De}function xe(n,e){let t=Nb(n);return t&&n.set(e),t}function be(n,e){let t=Me(),r=$t(),i=Mt();return Ob(r,t,t[dt],i,n,e),be}function oV(n,e,t){let r=$t();if(r.firstCreatePass){let i=oi(n);ym(t,r.data,r.blueprint,i,!0),ym(e,r.data,r.blueprint,i,!1)}}function ym(n,e,t,r,i){if(n=Bt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ym(n[o],e,t,r,i);else{let o=$t(),s=Me(),a=Mt(),u=ps(n)?n:Bt(n.provide),l=ZC(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(ps(n)||!n.multi){let y=new eo(l,i,ie),b=xg(u,e,i?h:h+g,p);b===-1?(Hg(wd(a,s),o,u),Ag(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=xg(u,e,h+g,p),b=xg(u,e,h,h+g),A=y>=0&&t[y],x=b>=0&&t[b];if(i&&!x||!i&&!A){Hg(wd(a,s),o,u);let B=uV(i?aV:sV,t.length,i,r,l);!i&&x&&(t[b].providerFactory=B),Ag(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=jb(t[i?b:y],l,!i&&r);Ag(o,n,y>-1?y:b,B)}!i&&r&&x&&t[b].componentProviders++}}}function Ag(n,e,t,r){let i=ps(e),o=WP(e);if(i||o){let u=(o?Bt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function jb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function sV(n,e,t,r){return vm(this.multi,[])}function aV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=to(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),vm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],vm(i,o);return o}function vm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uV(n,e,t,r,i){let o=new eo(n,t,ie);return o.multi=[],o.index=e,o.componentProviders=0,jb(o,i,r&&!t),o}function bu(n,e=[]){return t=>{t.providersResolver=(r,i)=>oV(r,i?i(n):n,e)}}var cV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=KC(!1,t.type),i=r.length>0?Xd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(L(cn))})}}return n})();function Bb(n){Eu("NgStandalone"),n.getStandaloneInjector=e=>e.get(cV).getOrCreateStandaloneInjector(n)}var nd=null;function lV(n){nd!==null&&(n.defaultEncapsulation!==nd.defaultEncapsulation||n.preserveWhitespaces!==nd.preserveWhitespaces)||(nd=n)}var Cr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ub=new Cr("18.2.13");var th=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var hy=new K(""),Tu=new K(""),nh=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,fy||(dV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(we),L(rh),L(Tu))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),rh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return fy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function dV(n){fy=n}var fy;function ao(n){return!!n&&typeof n.then=="function"}function $b(n){return!!n&&typeof n.subscribe=="function"}var ih=new K(""),Hb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$(ih,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ao(o))t.push(o);else if($b(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),py=new K("");function hV(){g0(()=>{throw new X(600,!1)})}function fV(n){return n.isBoundToModule}var pV=10;function gV(n,e,t){try{let r=t();return ao(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function qb(n,e){return Array.isArray(e)?e.reduce(qb,n):P(P({},n),e)}var di=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(J1),this.afterRenderManager=$(kb),this.zonelessEnabled=$(sy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=$(bs).hasPendingTasks.pipe(Y(t=>!t)),this._injector=$(cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Sd;if(!this._injector.get(Hb).done){let g=!i&&qC(t),y=!1;throw new X(405,y)}let s;i?s=t:s=this._injector.get(vs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=fV(s)?void 0:this._injector.get(si),u=r||s.selector,l=s.create(ln.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(hy,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ud(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(_s,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<pV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)mV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$d(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ud(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(py,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ud(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ud(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mV(n,e,t,r){if(!t&&!$d(n))return;Cb(n,e,t&&!r?0:1)}var _m=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},oh=(()=>{class n{compileModuleSync(t){return new Rd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=zC(t),o=WD(i.declarations).reduce((s,a)=>{let u=ri(a);return u&&s.push(new ws(u)),s},[]);return new _m(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yV=new K("");function vV(n,e,t){let r=new Rd(t);return Promise.resolve(r)}function CC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var _V=(()=>{class n{constructor(){this.zone=$(we),this.changeDetectionScheduler=$(ys),this.applicationRef=$(di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wV({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new we(ge(P({},zb()),{scheduleInRootZone:t})),[{provide:we,useFactory:n},{provide:fs,multi:!0,useFactory:()=>{let r=$(_V,{optional:!0});return()=>r.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let r=$(EV);return()=>{r.initialize()}}},e===!0?{provide:Sb,useValue:!0}:[],{provide:Ab,useValue:t??kD}]}function zb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var EV=(()=>{class n{constructor(){this.subscription=new Ye,this.initialized=!1,this.zone=$(we),this.pendingTasks=$(bs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IV=(()=>{class n{constructor(){this.appRef=$(di),this.taskService=$(bs),this.ngZone=$(we),this.zonelessEnabled=$(sy),this.disableScheduling=$(Sb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ye,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Id):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(Ab,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?iC:OD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Id+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CV(){return typeof $localize<"u"&&$localize.locale||kd}var gy=new K("",{providedIn:"root",factory:()=>$(gy,pe.Optional|pe.SkipSelf)||CV()});var Od=new K("");function rd(n){return!n.moduleRef}function DV(n){let e=rd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(we);return t.run(()=>{rd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Er,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),rd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Od);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Od);s.add(o),n.moduleRef.onDestroy(()=>{ud(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return gV(r,t,()=>{let o=e.get(Hb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(gy,kd);if(tV(s||kd),rd(n)){let a=e.get(di);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return bV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function bV(n,e){let t=n.injector.get(di);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var Gb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>Z1(r?.ngZone,ge(P({},zb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[wV({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ys,useExisting:IV}],u=_F(t.moduleType,this.injector,a);return DV({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=qb({},r);return vV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Od,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(ln))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),lu=null,Wb=new K("");function TV(n){if(lu&&!lu.get(Wb,!1))throw new X(400,!1);hV(),lu=n;let e=n.get(Gb);return xV(n),e}function my(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(o=[])=>{let s=Kb();if(!s||s.injector.get(Wb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):TV(SV(a,r))}return AV(i)}}function SV(n=[],e){return ln.create({name:e,providers:[{provide:jd,useValue:"platform"},{provide:Od,useValue:new Set([()=>lu=null])},...n]})}function AV(n){let e=Kb();if(!e)throw new X(401,!1);return e}function Kb(){return lu?.get(Gb)??null}function xV(n){n.get(Gm,null)?.forEach(t=>t())}function yy(){return!1}var hi=(()=>{class n{static{this.__NG_ELEMENT_ID__=MV}}return n})();function MV(n){return RV(Mt(),Me(),(n&16)===16)}function RV(n,e,t){if(Ud(n)&&!t){let r=ui(n.index,e);return new ro(r,r)}else if(n.type&175){let r=e[Jn];return new ro(r,e)}return null}var wm=class{constructor(){}supports(e){return Pb(e)}create(e){return new Em(e)}},NV=(n,e)=>e,Em=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||NV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<DC(r,i,o)?t:r,a=DC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,b=y+g;h<=b&&b<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Pb(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,wF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Im(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Im=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Cm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Fd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Cm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function bC(){return new vy([new wm])}var vy=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:bC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bC()),deps:[[n,new Tm,new Is]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var Qb=my(null,"core",[]),Yb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(di))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();function fi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Su(n,e){Eu("NgSignals");let t=h0(n);return e?.equal&&(t[mr].equal=e.equal),t}function Mr(n){let e=Ce(null);try{return n()}finally{Ce(e)}}function Zb(n){let e=ri(n);if(!e)return null;let t=new ws(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var nT=null;function tr(){return nT}function rT(n){nT??=n}var sh=class{};var Zt=new K(""),Cy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(PV),providedIn:"platform"})}}return n})(),iT=new K(""),PV=(()=>{class n extends Cy{constructor(){super(),this._doc=$(Zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Dy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Jb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Rr(n){return n&&n[0]!=="?"?"?"+n:n}var Nr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(by),providedIn:"root"})}}return n})(),oT=new K(""),by=(()=>{class n extends Nr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Dy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Cy),L(oT,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sT=(()=>{class n extends Nr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Dy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(Cy),L(oT,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Ss=(()=>{class n{constructor(t){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=FV(Jb(Xb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Rr(r))}normalize(t){return n.stripTrailingSlash(OV(this._basePath,Xb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Rr}static{this.joinWithSlash=Dy}static{this.stripTrailingSlash=Jb}static{this.\u0275fac=function(r){return new(r||n)(L(Nr))}}static{this.\u0275prov=G({token:n,factory:()=>kV(),providedIn:"root"})}}return n})();function kV(){return new Ss(L(Nr))}function OV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Xb(n){return n.replace(/\/index.html$/,"")}function FV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function aT(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var _y=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Dn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _y(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),eT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);eT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(li),ie(io),ie(vy))}}static{this.\u0275dir=yt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function eT(n,e){n.context.$implicit=e.item}var uT=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ie(li),ie(io))}}static{this.\u0275dir=yt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),wy=class{constructor(){this.$implicit=null,this.ngIf=null}};function tT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ut(e)}'.`)}var cT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})(),Ty="browser",VV="server";function LV(n){return n===Ty}function uo(n){return n===VV}var lT=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>LV($(Qt))?new Ey($(Zt),window):new Iy})}}return n})(),Ey=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=jV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function jV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Iy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ah=class{};var xy=class extends sh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},My=class n extends xy{static makeCurrent(){rT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=UV();return t==null?null:$V(t)}resetBaseElement(){Au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return aT(document.cookie,e)}},Au=null;function UV(){return Au=Au||document.querySelector("base"),Au?Au.getAttribute("href"):null}function $V(n){return new URL(n,document.baseURI).pathname}var Ry=class{addToWindow(e){kn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),kn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=kn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};kn.frameworkStabilizers||(kn.frameworkStabilizers=[]),kn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?tr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},HV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Ny=new K(""),pT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(Ny),L(we))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),uh=class{constructor(e){this._doc=e}},Sy="ng-app-id",gT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uo(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Sy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Sy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Zt),L(Gd),L(Wm,8),L(Qt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Ay={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ky=/%COMP%/g,mT="%COMP%",qV=`_nghost-${mT}`,zV=`_ngcontent-${mT}`,GV=!0,WV=new K("",{providedIn:"root",factory:()=>GV});function KV(n){return zV.replace(ky,n)}function QV(n){return qV.replace(ky,n)}function yT(n,e){return e.map(t=>t.replace(ky,n))}var dT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=uo(a),this.defaultRenderer=new xu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r=ge(P({},r),{encapsulation:Yn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ch?i.applyToHost(t):i instanceof Mu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:o=new ch(u,l,r,this.appId,h,s,a,p);break;case Yn.ShadowDom:return new Py(u,l,t,r,s,a,this.nonce,p);default:o=new Mu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(pT),L(gT),L(Gd),L(WV),L(Zt),L(Qt),L(we),L(Wm))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),xu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ay[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ay[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ay[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(t,r,i&Ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=tr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function hT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Py=class extends xu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=yT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mu=class extends xu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?yT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ch=class extends Mu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=KV(l),this.hostAttr=QV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},YV=(()=>{class n extends uh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),fT=["alt","control","meta","shift"],ZV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},XV=(()=>{class n extends uh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),fT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=ZV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fT.forEach(s=>{if(s!==i){let a=JV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function eL(){My.makeCurrent()}function tL(){return new Er}function nL(){return $D(document),document}var rL=[{provide:Qt,useValue:Ty},{provide:Gm,useValue:eL,multi:!0},{provide:Zt,useFactory:nL,deps:[]}],vT=my(Qb,"browser",rL),iL=new K(""),oL=[{provide:Tu,useClass:Ry,deps:[]},{provide:hy,useClass:nh,deps:[we,rh,Tu]},{provide:nh,useClass:nh,deps:[we,rh,Tu]}],sL=[{provide:jd,useValue:"root"},{provide:Er,useFactory:tL,deps:[]},{provide:Ny,useClass:YV,multi:!0,deps:[Zt,we,Qt]},{provide:Ny,useClass:XV,multi:!0,deps:[Zt]},dT,gT,pT,{provide:_s,useExisting:dT},{provide:ah,useClass:HV,deps:[]},[]],_T=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Gd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(iL,12))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({providers:[...sL,...oL],imports:[cT,Yb]})}}return n})();var wT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var le="primary",qu=Symbol("RouteTitle"),jy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new jy(n)}function aL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function uL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nr(n[t],e[t]))return!1;return!0}function nr(n,e){let t=n?By(n):void 0,r=e?By(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!NT(n[i],e[i]))return!1;return!0}function By(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function PT(n){return n.length>0?n[n.length-1]:null}function mi(n){return cg(n)?n:ao(n)?_e(Promise.resolve(n)):ne(n)}var cL={exact:OT,subset:FT},kT={exact:lL,subset:dL,ignored:()=>!0};function IT(n,e,t){return cL[t.paths](n.root,e.root,t.matrixParams)&&kT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lL(n,e){return nr(n,e)}function OT(n,e,t){if(!lo(n.segments,e.segments)||!hh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!OT(n.children[r],e.children[r],t))return!1;return!0}function dL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NT(n[t],e[t]))}function FT(n,e,t){return VT(n,e,e.segments,t)}function VT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!lo(i,t)||e.hasChildren()||!hh(i,t,r))}else if(n.segments.length===t.length){if(!lo(n.segments,t)||!hh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!FT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!lo(n.segments,i)||!hh(n.segments,i,r)||!n.children[le]?!1:VT(n.children[le],e,o,r)}}function hh(n,e,t){return e.every((r,i)=>kT[t](n[i].parameters,r.parameters))}var kr=class{constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return pL.serialize(this)}},Re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fh(this)}},co=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return jT(this)}};function hL(n,e){return lo(n,e)&&n.every((t,r)=>nr(t.parameters,e[r].parameters))}function lo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function fL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var zu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new ks,providedIn:"root"})}}return n})(),ks=class{parse(e){let t=new $y(e);return new kr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ru(e.root,!0)}`,r=yL(e.queryParams),i=typeof e.fragment=="string"?`#${gL(e.fragment)}`:"";return`${t}${r}${i}`}},pL=new ks;function fh(n){return n.segments.map(e=>jT(e)).join("/")}function Ru(n,e){if(!n.hasChildren())return fh(n);if(e){let t=n.children[le]?Ru(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Ru(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=fL(n,(r,i)=>i===le?[Ru(n.children[le],!1)]:[`${i}:${Ru(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${fh(n)}/${t[0]}`:`${fh(n)}/(${t.join("//")})`}}function LT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lh(n){return LT(n).replace(/%3B/gi,";")}function gL(n){return encodeURI(n)}function Uy(n){return LT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ph(n){return decodeURIComponent(n)}function CT(n){return ph(n.replace(/\+/g,"%20"))}function jT(n){return`${Uy(n.path)}${mL(n.parameters)}`}function mL(n){return Object.entries(n).map(([e,t])=>`;${Uy(e)}=${Uy(t)}`).join("")}function yL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${lh(t)}=${lh(i)}`).join("&"):`${lh(t)}=${lh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var vL=/^[^\/()?;#]+/;function Oy(n){let e=n.match(vL);return e?e[0]:""}var _L=/^[^\/()?;=#]+/;function wL(n){let e=n.match(_L);return e?e[0]:""}var EL=/^[^=?&#]+/;function IL(n){let e=n.match(EL);return e?e[0]:""}var CL=/^[^&#]+/;function DL(n){let e=n.match(CL);return e?e[0]:""}var $y=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Re(e,t)),r}parseSegment(){let e=Oy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new co(ph(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=wL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Oy(this.remaining);i&&(r=i,this.capture(r))}e[ph(t)]=ph(r)}parseQueryParam(e){let t=IL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=DL(this.remaining);s&&(r=s,this.capture(r))}let i=CT(t),o=CT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Oy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Re([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function BT(n){return n.segments.length>0?new Re([],{[le]:n}):n}function UT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=UT(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Re(n.segments,e);return bL(t)}function bL(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Re(n.segments.concat(e.segments),e.children)}return n}function ho(n){return n instanceof kr}function TL(n,e,t=null,r=null){let i=$T(n);return HT(i,e,t,r)}function $T(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Re(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=BT(r);return e??i}function HT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Fy(i,i,i,t,r);let o=SL(e);if(o.toRoot())return Fy(i,i,new Re([],{}),t,r);let s=AL(o,i,n),a=s.processChildren?ku(s.segmentGroup,s.index,o.commands):zT(s.segmentGroup,s.index,o.commands);return Fy(i,s.segmentGroup,a,t,r)}function gh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vu(n){return typeof n=="object"&&n!=null&&n.outlets}function Fy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=qT(n,e,t);let a=BT(UT(s));return new kr(a,o,i)}function qT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=qT(o,e,t)}),new Re(n.segments,r)}var mh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gh(r[0]))throw new X(4003,!1);let i=r.find(Vu);if(i&&i!==PT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function SL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mh(t,e,r)}var Ms=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AL(n,e,t){if(n.isAbsolute)return new Ms(e,!0,0);if(!t)return new Ms(e,!1,NaN);if(t.parent===null)return new Ms(t,!0,0);let r=gh(n.commands[0])?0:1,i=t.segments.length-1+r;return xL(t,i,n.numberOfDoubleDots)}function xL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Ms(r,!1,i-o)}function ML(n){return Vu(n[0])?n[0].outlets:{[le]:n}}function zT(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return ku(n,e,t);let r=RL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Re(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Re(n.segments.slice(r.pathIndex),n.children),ku(o,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?Hy(n,e,t):r.match?ku(n,0,i):Hy(n,e,t)}function ku(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=ML(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=ku(n.children[le],e,t);return new Re(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Re(n.segments,i)}}function RL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Vu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!bT(u,l,s))return o;r+=2}else{if(!bT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Vu(o)){let u=NL(o.outlets);return new Re(r,u)}if(i===0&&gh(t[0])){let u=n.segments[e];r.push(new co(u.path,DT(t[0]))),i++;continue}let s=Vu(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&gh(a)?(r.push(new co(s,DT(a))),i+=2):(r.push(new co(s,{})),i++)}return new Re(r,{})}function NL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Hy(new Re([],{}),0,r))}),e}function DT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bT(n,e,t){return n==t.path&&nr(e,t.parameters)}var Ou="imperative",vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(vt||{}),bn=class{constructor(e,t){this.id=e,this.url=t}},Os=class extends bn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends bn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(hn||{}),yh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yh||{}),Pr=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gi=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},Lu=class extends bn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vh=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends bn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gy=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qy=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yy=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zy=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jy=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_h=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=vt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ju=class{},Fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function PL(n,e){return n.providers&&!n._injector&&(n._injector=Xd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Vn(n){return n.outlet||le}function kL(n,e){let t=n.filter(r=>Vn(r)===e);return t.push(...n.filter(r=>Vn(r)!==e)),t}function Gu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ev=class{get injector(){return Gu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Wu(this.rootInjector),this.attachRef=null}},Wu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ev(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(cn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nv(e,this._root).map(t=>t.value)}};function tv(n,e){if(n===e.value)return e;for(let t of e.children){let r=tv(n,t);if(r)return r}return null}function nv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nv(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Eh=class extends wh{constructor(e,t){super(e),this.snapshot=t,dv(this,e)}toString(){return this.snapshot.toString()}};function GT(n){let e=OL(n),t=new wt([new co("",{})]),r=new wt({}),i=new wt({}),o=new wt({}),s=new wt(""),a=new fo(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Eh(new dn(a,[]),e)}function OL(n){let e={},t={},r={},i="",o=new Rs([],e,r,i,t,le,n,null,{});return new Ch("",new dn(o,[]))}var fo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Y(l=>l[qu]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ih(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&KT(i)&&(r.resolve[qu]=i.title),r}var Rs=class{get title(){return this.data?.[qu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ch=class extends wh{constructor(e,t){super(t),this.url=e,dv(this,t)}toString(){return WT(this._root)}};function dv(n,e){e.value._routerState=n,e.children.forEach(t=>dv(n,t))}function WT(n){let e=n.children.length>0?` { ${n.children.map(WT).join(", ")} } `:"";return`${n.value}${e}`}function Vy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),nr(e.params,t.params)||n.paramsSubject.next(t.params),uL(e.url,t.url)||n.urlSubject.next(t.url),nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rv(n,e){let t=nr(n.params,e.params)&&hL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rv(n.parent,e.parent))}function KT(n){return typeof n.title=="string"||n.title===null}var hv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=$(Wu),this.location=$(li),this.changeDetector=$(hi),this.inputBinder=$(xh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new iv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=yt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tr]})}}return n})(),iv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fo?this.route:e===Wu?this.childContexts:this.parent.get(e,t)}},xh=new K(""),TT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ou([r.queryParams,r.params,r.data]).pipe(Ze(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?ne(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Zb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function FL(n,e,t){let r=Bu(n,e._root,t?t._root:void 0);return new Eh(r,e)}function Bu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=VL(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Bu(n,a)),s}}let r=LL(e.value),i=e.children.map(o=>Bu(n,o));return new dn(r,i)}}function VL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Bu(n,r,i);return Bu(n,r)})}function LL(n){return new fo(new wt(n.url),new wt(n.params),new wt(n.queryParams),new wt(n.fragment),new wt(n.data),n.outlet,n.component,n)}var Uu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},QT="ngNavigationCancelingError";function Dh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YT(!1,hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function YT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[QT]=!0,t.cancellationCode=e,t}function jL(n){return ZT(n)&&ho(n.url)}function ZT(n){return!!n&&n[QT]}var BL=(n,e,t,r)=>Y(i=>(new ov(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ov=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Vy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,t){this.component=e,this.route=t}};function UL(n,e,t){let r=n._root,i=e?e._root:null;return Nu(r,i,t,[r.value])}function $L(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ls(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xC(n)?n:e.get(n):r}function Nu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xs(e);return n.children.forEach(s=>{HL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Fu(a,t.getContext(s),i)),i}function HL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=qL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new bh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Nu(n,e,a?a.children:null,r,i):Nu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&Fu(e,a,i),i.canActivateChecks.push(new bh(r)),o.component?Nu(n,null,a?a.children:null,r,i):Nu(n,null,t,r,i);return i}function qL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lo(n.url,e.url)||!nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rv(n,e)||!nr(n.queryParams,e.queryParams);case"paramsChange":default:return!rv(n,e)}}function Fu(n,e,t){let r=xs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Fu(s,e.children.getContext(o),t):Fu(s,null,t):Fu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Ku(n){return typeof n=="function"}function zL(n){return typeof n=="boolean"}function GL(n){return n&&Ku(n.canLoad)}function WL(n){return n&&Ku(n.canActivate)}function KL(n){return n&&Ku(n.canActivateChild)}function QL(n){return n&&Ku(n.canDeactivate)}function YL(n){return n&&Ku(n.canMatch)}function JT(n){return n instanceof vr||n?.name==="EmptyError"}var dh=Symbol("INITIAL_VALUE");function Vs(){return Ze(n=>ou(n.map(e=>e.pipe(_r(1),Ki(dh)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===dh)return dh;if(t===!1||ZL(t))return t}return!0}),Et(e=>e!==dh),_r(1)))}function ZL(n){return ho(n)||n instanceof Uu}function JL(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(ge(P({},t),{guardsResult:!0})):XL(s,r,i,n).pipe(it(a=>a&&zL(a)?e2(r,o,n,e):ne(a)),Y(a=>ge(P({},t),{guardsResult:a})))})}function XL(n,e,t,r){return _e(n).pipe(it(i=>o2(i.component,i.route,t,e,r)),mn(i=>i!==!0,!0))}function e2(n,e,t,r){return _e(e).pipe(Gi(i=>rs(n2(i.route.parent,r),t2(i.route,r),i2(n,i.path,t),r2(n,i.route,t))),mn(i=>i!==!0,!0))}function t2(n,e){return n!==null&&e&&e(new Jy(n)),ne(!0)}function n2(n,e){return n!==null&&e&&e(new Yy(n)),ne(!0)}function r2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>Kl(()=>{let s=Gu(e)??t,a=Ls(o,s),u=WL(a)?a.canActivate(e,n):er(s,()=>a(e,n));return mi(u).pipe(mn())}));return ne(i).pipe(Vs())}function i2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>$L(s)).filter(s=>s!==null).map(s=>Kl(()=>{let a=s.guards.map(u=>{let l=Gu(s.node)??t,h=Ls(u,l),p=KL(h)?h.canActivateChild(r,n):er(l,()=>h(r,n));return mi(p).pipe(mn())});return ne(a).pipe(Vs())}));return ne(o).pipe(Vs())}function o2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let u=Gu(e)??i,l=Ls(a,u),h=QL(l)?l.canDeactivate(n,e,t,r):er(u,()=>l(n,e,t,r));return mi(h).pipe(mn())});return ne(s).pipe(Vs())}function s2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=Ls(s,n),u=GL(a)?a.canLoad(e,t):er(n,()=>a(e,t));return mi(u)});return ne(o).pipe(Vs(),XT(r))}function XT(n){return rg(lt(e=>{if(typeof e!="boolean")throw Dh(n,e)}),Y(e=>e===!0))}function a2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=Ls(s,n),u=YL(a)?a.canMatch(e,t):er(n,()=>a(e,t));return mi(u)});return ne(o).pipe(Vs(),XT(r))}var $u=class{constructor(e){this.segmentGroup=e||null}},Hu=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return ns(new $u(n))}function u2(n){return ns(new X(4e3,!1))}function c2(n){return ns(YT(!1,hn.GuardRejected))}var sv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[le])return u2(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:b,title:A}=i,x=er(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:A}));if(x instanceof kr)throw new Hu(x);t=x}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Hu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new kr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Re(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l2(n,e,t,r,i){let o=eS(n,e,t);return o.matched?(r=PL(e,r),a2(r,e,t,i).pipe(Y(s=>s===!0?o:P({},av)))):ne(o)}function eS(n,e,t){if(e.path==="**")return d2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},av):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||aL)(t,n,e);if(!i)return P({},av);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function d2(n){return{matched:!0,parameters:n.length>0?PT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ST(n,e,t,r){return t.length>0&&p2(n,t,r)?{segmentGroup:new Re(e,f2(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&g2(n,t,r)?{segmentGroup:new Re(n.segments,h2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function h2(n,e,t,r){let i={};for(let o of t)if(Mh(n,e,o)&&!r[Vn(o)]){let s=new Re([],{});i[Vn(o)]=s}return P(P({},r),i)}function f2(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&Vn(r)!==le){let i=new Re([],{});t[Vn(r)]=i}return t}function p2(n,e,t){return t.some(r=>Mh(n,e,r)&&Vn(r)!==le)}function g2(n,e,t){return t.some(r=>Mh(n,e,r))}function Mh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function m2(n,e,t){return e.length===0&&!n.children[t]}var uv=class{};function y2(n,e,t,r,i,o,s="emptyOnly"){return new cv(n,e,t,r,i,s,o).recognize()}var v2=31,cv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=ST(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new dn(r,t),o=new Ch("",i),s=TL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Rs([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Zr(r=>{if(r instanceof Hu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $u?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _e(o).pipe(Gi(s=>{let a=r.children[s],u=kL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Wi((s,a)=>(s.push(...a),s)),Jr(null),pg(),it(s=>{if(s===null)return As(r);let a=tS(s);return _2(a),ne(a)}))}processSegment(e,t,r,i,o,s,a){return _e(t).pipe(Gi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Zr(l=>{if(l instanceof $u)return ne(null);throw l}))),mn(u=>!!u),Zr(u=>{if(JT(u))return m2(r,i,o)?ne(new uv):As(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Vn(r)!==s&&(s===le||!Mh(i,o,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=eS(t,i,o);if(!u)return As(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>v2&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,AT(i),Vn(i),i.component??i._loadedComponent??null,i,xT(i)),b=Ih(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(it(x=>this.processSegment(e,r,t,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=l2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ze(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ze(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,b=new Rs(g,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,AT(r),Vn(r),r.component??r._loadedComponent??null,r,xT(r)),A=Ih(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:B}=ST(t,g,y,l);if(B.length===0&&x.hasChildren())return this.processChildren(h,l,x,b).pipe(Y(j=>new dn(b,j)));if(l.length===0&&B.length===0)return ne(new dn(b,[]));let W=Vn(r)===o;return this.processSegment(h,l,x,B,W?le:o,!0,b).pipe(Y(j=>new dn(b,j instanceof dn?[j]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):s2(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(lt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):c2(t))):ne({routes:[],injector:e})}};function _2(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function w2(n){let e=n.value.routeConfig;return e&&e.path===""}function tS(n){let e=[],t=new Set;for(let r of n){if(!w2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=tS(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function AT(n){return n.data||{}}function xT(n){return n.resolve||{}}function E2(n,e,t,r,i,o){return it(s=>y2(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:u})=>ge(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function I2(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of nS(u))s.add(l);let a=0;return _e(s).pipe(Gi(u=>o.has(u)?C2(u,r,n,e):(u.data=Ih(u,u.parent,n).resolve,ne(void 0))),lt(()=>a++),is(1),it(u=>a===s.size?ne(t):jt))})}function nS(n){let e=n.children.map(t=>nS(t)).flat();return[n,...e]}function C2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!KT(i)&&(o[qu]=i.title),D2(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=Ih(n,n.parent,t).resolve,null)))}function D2(n,e,t,r){let i=By(n);if(i.length===0)return ne({});let o={};return _e(i).pipe(it(s=>b2(n[s],e,t,r).pipe(mn(),lt(a=>{if(a instanceof Uu)throw Dh(new ks,a);o[s]=a}))),is(1),hg(o),Zr(s=>JT(s)?jt:ns(s)))}function b2(n,e,t,r){let i=Gu(e)??r,o=Ls(n,i),s=o.resolve?o.resolve(e,t):er(i,()=>o(e,t));return mi(s)}function Ly(n){return Ze(e=>{let t=n(e);return t?_e(t).pipe(Y(()=>e)):ne(e)})}var rS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[qu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(T2),providedIn:"root"})}}return n})(),T2=(()=>{class n extends rS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(wT))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qu=new K("",{providedIn:"root",factory:()=>({})}),S2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=gt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Bb],decls:1,vars:0,template:function(r,i){r&1&&xr(0,"router-outlet")},dependencies:[hv],encapsulation:2})}}return n})();function fv(n){let e=n.children&&n.children.map(fv),t=e?ge(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=S2),t}var Th=new K(""),pv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(oh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=mi(t.loadComponent()).pipe(Y(iS),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),su(()=>{this.componentLoaders.delete(t)})),i=new Jo(r,()=>new qe).pipe(Zo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=A2(r,this.compiler,t,this.onLoadEndListener).pipe(su(()=>{this.childrenLoaders.delete(r)})),s=new Jo(o,()=>new qe).pipe(Zo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A2(n,e,t,r){return mi(n.loadChildren()).pipe(Y(iS),it(i=>i instanceof gu||Array.isArray(i)?ne(i):_e(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Th,[],{optional:!0,self:!0}).flat()),{routes:s.map(fv),injector:o}}))}function x2(n){return n&&typeof n=="object"&&"default"in n}function iS(n){return x2(n)?n.default:n}var gv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(M2),providedIn:"root"})}}return n})(),M2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oS=new K(""),sS=new K("");function R2(n,e,t){let r=n.get(sS),i=n.get(Zt);return n.get(we).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),N2(n))),{onViewTransitionCreated:u}=r;return u&&er(n,()=>u({transition:a,from:e,to:t})),s})}function N2(n){return new Promise(e=>{cy({read:()=>setTimeout(e)},{injector:n})})}var P2=new K(""),mv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=$(pv),this.environmentInjector=$(cn),this.urlSerializer=$(zu),this.rootContexts=$(Wu),this.location=$(Ss),this.inputBindingEnabled=$(xh,{optional:!0})!==null,this.titleStrategy=$(rS),this.options=$(Qu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(gv),this.createViewTransition=$(oS,{optional:!0}),this.navigationErrorHandler=$(P2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Ky(i)),r=i=>this.events.next(new Qy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ge(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new wt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ou,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),Y(o=>ge(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ze(o=>{let s=!1,a=!1;return ne(o).pipe(Ze(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),jt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ge(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.rawUrl),p,yh.IgnoredSameUrlNavigation)),u.resolve(!1),jt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ne(u).pipe(Ze(p=>{let g=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?jt:Promise.resolve(p)}),E2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ge(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new vh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:g,source:y,restoredState:b,extras:A}=u,x=new Os(p,this.urlSerializer.serialize(g),y,b);this.events.next(x);let B=GT(this.rootComponentType).snapshot;return this.currentTransition=o=ge(P({},u),{targetSnapshot:B,urlAfterRedirects:g,extras:ge(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ne(o)}else{let p="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.extractedUrl),p,yh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),jt}}),lt(u=>{let l=new qy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Y(u=>(this.currentTransition=o=ge(P({},u),{guards:UL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),JL(this.environmentInjector,u=>this.events.next(u)),lt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Dh(this.urlSerializer,u.guardsResult);let l=new zy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",hn.GuardRejected),!1)),Ly(u=>{if(u.guards.canActivateChecks.length)return ne(u).pipe(lt(l=>{let h=new Gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ze(l=>{let h=!1;return ne(l).pipe(I2(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",hn.NoDataFromResolver)}}))}),lt(l=>{let h=new Wy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ly(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(lt(g=>{h.component=g}),Y(()=>{})));for(let g of h.children)p.push(...l(g));return p};return ou(l(u.targetSnapshot.root)).pipe(Jr(null),_r(1))}),Ly(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?_e(h).pipe(Y(()=>o)):ne(o)}),Y(u=>{let l=FL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ge(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),lt(()=>{this.events.next(new ju)}),BL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),_r(1),lt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),mg(this.transitionAbortSubject.pipe(lt(u=>{throw u}))),su(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zr(u=>{if(a=!0,ZT(u))this.events.next(new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),jL(u)?this.events.next(new Fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Lu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=er(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Uu){let{message:p,cancellationCode:g}=Dh(this.urlSerializer,h);this.events.next(new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,g)),this.events.next(new Fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return jt}))}))}cancelNavigationTransition(t,r,i){let o=new Pr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k2(n){return n!==Ou}var O2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(F2),providedIn:"root"})}}return n})(),lv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},F2=(()=>{class n extends lv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ds(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>$(V2),providedIn:"root"})}}return n})(),V2=(()=>{class n extends aS{constructor(){super(...arguments),this.location=$(Ss),this.urlSerializer=$(zu),this.options=$(Qu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(gv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new kr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=GT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Os)this.stateMemento=this.createStateMemento();else if(t instanceof gi)this.rawUrlTree=r.initialUrl;else if(t instanceof vh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ju?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Pr&&(t.code===hn.GuardRejected||t.code===hn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Lu?this.restoreHistory(r,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof kr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ds(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pu||{});function uS(n,e){n.events.pipe(Et(t=>t instanceof Ln||t instanceof Pr||t instanceof Lu||t instanceof gi),Y(t=>t instanceof Ln||t instanceof gi?Pu.COMPLETE:(t instanceof Pr?t.code===hn.Redirect||t.code===hn.SupersededByNewNavigation:!1)?Pu.REDIRECTING:Pu.FAILED),Et(t=>t!==Pu.REDIRECTING),_r(1)).subscribe(()=>{e()})}function L2(n){throw n}var j2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Or=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(th),this.stateManager=$(aS),this.options=$(Qu,{optional:!0})||{},this.pendingTasks=$(bs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(mv),this.urlSerializer=$(zu),this.location=$(Ss),this.urlHandlingStrategy=$(gv),this._events=new qe,this.errorHandler=this.options.errorHandler||L2,this.navigated=!1,this.routeReuseStrategy=$(O2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(Th,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(xh,{optional:!0}),this.eventsSubscription=new Ye,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||k2(i.source)},s);this.scheduleNavigation(a,Ou,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ou,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=$T(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return HT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ho(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ou,null,r)}navigate(t,r={skipLocationChange:!1}){return U2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},j2):r===!1?i=P({},B2):i=r,ho(t))return IT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return IT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return uS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function U2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function $2(n){return!(n instanceof ju)&&!(n instanceof Fs)}var Sh=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new qe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ln&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ho(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:zD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ho(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ie(Or),ie(fo),$m("tabindex"),ie(ci),ie(En),ie(Nr))}}static{this.\u0275dir=yt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Cu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fi],replaceUrl:[2,"replaceUrl","replaceUrl",fi],routerLink:"routerLink"},standalone:!0,features:[uy,Tr]})}}return n})(),cS=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Je,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ln&&this.update()})}ngAfterContentInit(){ne(this.links.changes,ne(null)).pipe(Wn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=_e(t).pipe(Wn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=H2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Or),ie(En),ie(ci),ie(hi),ie(Sh,8))}}static{this.\u0275dir=yt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Fb(o,Sh,5),r&2){let s;Vb(s=Lb())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Tr]})}}return n})();function H2(n){return!!n.paths}var Ah=class{};var q2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Et(t=>t instanceof Ln),Gi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Xd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(Wn())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ne(null);let o=i.pipe(it(s=>s===null?ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(Wn())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(Or),L(oh),L(cn),L(Ah),L(pv))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lS=new K(""),z2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ln?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof gi&&t.code===yh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _h&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _h(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){ib()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function G2(n){return n.routerState.root}function Yu(n,e){return{\u0275kind:n,\u0275providers:e}}function W2(){let n=$(ln);return e=>{let t=n.get(di);if(e!==t.components[0])return;let r=n.get(Or),i=n.get(dS);n.get(yv)===1&&r.initialNavigation(),n.get(hS,null,pe.Optional)?.setUpPreloading(),n.get(lS,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var dS=new K("",{factory:()=>new qe}),yv=new K("",{providedIn:"root",factory:()=>1});function K2(){return Yu(2,[{provide:yv,useValue:0},{provide:ih,multi:!0,deps:[ln],useFactory:e=>{let t=e.get(iT,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Or),o=e.get(dS);uS(i,()=>{r(!0)}),e.get(mv).afterPreactivation=()=>(r(!0),o.closed?ne(void 0):o),i.initialNavigation()}))}}])}function Q2(){return Yu(3,[{provide:ih,multi:!0,useFactory:()=>{let e=$(Or);return()=>{e.setUpLocationChangeListener()}}},{provide:yv,useValue:2}])}var hS=new K("");function Y2(n){return Yu(0,[{provide:hS,useExisting:q2},{provide:Ah,useExisting:n}])}function Z2(){return Yu(8,[TT,{provide:xh,useExisting:TT}])}function J2(n){let e=[{provide:oS,useValue:R2},{provide:sS,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Yu(9,e)}var MT=new K("ROUTER_FORROOT_GUARD"),X2=[Ss,{provide:zu,useClass:ks},Or,Wu,{provide:fo,useFactory:G2,deps:[Or]},pv,[]],vv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[X2,[],{provide:Th,multi:!0,useValue:t},{provide:MT,useFactory:rj,deps:[[Or,new Is,new Tm]]},{provide:Qu,useValue:r||{}},r?.useHash?tj():nj(),ej(),r?.preloadingStrategy?Y2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ij(r):[],r?.bindToComponentInputs?Z2().\u0275providers:[],r?.enableViewTransitions?J2().\u0275providers:[],oj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Th,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(MT,8))}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();function ej(){return{provide:lS,useFactory:()=>{let n=$(lT),e=$(we),t=$(Qu),r=$(mv),i=$(zu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new z2(i,r,n,e,t)}}}function tj(){return{provide:Nr,useClass:sT}}function nj(){return{provide:Nr,useClass:by}}function rj(n){return"guarded"}function ij(n){return[n.initialNavigation==="disabled"?Q2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?K2().\u0275providers:[]]}var RT=new K("");function oj(){return[{provide:RT,useFactory:W2},{provide:py,multi:!0,useExisting:RT}]}var Rh=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var aj="firebase",uj="10.14.1";Yr(aj,uj,"app");var Zu=new Cr("ANGULARFIRE2_VERSION");var cj=(n,e)=>{let t=e?[e]:r0(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},po=class{constructor(){return cj(lj)}},lj="app-check";function _v(){}var Nh=class{zone;delegate;constructor(e,t=ag){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},wv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_v,{},_v,_v)),t.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ph=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Nh(Zone.current)),this.insideAngular=t.run(()=>new Nh(Zone.current,iu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(we))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Jt(n){return hj(dj())(n)}function hj(n){return function(t){return t=t.lift(new wv(n.ngZone)),t.pipe(Rn(n.outsideAngular),gn(n.insideAngular))}}var gj=new Map,mj={activated:!1,tokenObservers:[]},yj={initialized:!1,enabled:!1};function jn(n){return gj.get(n)||Object.assign({},mj)}function vS(){return yj}var vj="https://content-firebaseappcheck.googleapis.com/v1";var _j="exchangeDebugToken",pS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},I5=24*60*60*1e3;var Iv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new $p,this.pending.promise.catch(t=>{}),yield wj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $p,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function wj(n){return new Promise(e=>{setTimeout(e,n)})}var Ej={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},yi=new t0("appCheck","AppCheck",Ej);function _S(n){if(!jn(n).activated)throw yi.create("use-before-activation",{appName:n.name})}function wS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw yi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw yi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw yi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function ES(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vj}/projects/${t}/apps/${r}:${_j}?key=${i}`,body:{debug_token:e}}}var Ij="firebase-app-check-database",Cj=1,Cv="firebase-app-check-store";var kh=null;function Dj(){return kh||(kh=new Promise((n,e)=>{try{let t=indexedDB.open(Ij,Cj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Cv,{keyPath:"compositeKey"})}}}catch(t){e(yi.create("storage-open",{originalErrorMessage:t?.message}))}}),kh)}function bj(n,e){return Tj(Sj(n),e)}function Tj(n,e){return N(this,null,function*(){let r=(yield Dj()).transaction(Cv,"readwrite"),o=r.objectStore(Cv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(yi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Sj(n){return`${n.options.appId}-${n.name}`}var Dv=new vl("@firebase/app-check");function Ev(n,e){return yl()?bj(n,e).catch(t=>{Dv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IS(){return vS().enabled}function CS(){return N(this,null,function*(){let n=vS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Aj={error:"UNKNOWN_ERROR"};function xj(n){return JI.encodeString(JSON.stringify(n),!1)}function bv(n,e=!1){return N(this,null,function*(){let t=n.app;_S(t);let r=jn(t),i=r.token,o;if(i&&!Ju(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ju(u)?i=u:yield Ev(t,void 0))}if(!e&&i&&Ju(i))return{token:i.token};let s=!1;if(IS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wS(ES(t,yield CS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Ev(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield jn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Dv.warn(u.message):Dv.error(u),o=u}let a;return i?o?Ju(i)?a={token:i.token,internalError:o}:a=mS(o):(a={token:i.token},r.token=i,yield Ev(t,i)):a=mS(o),s&&Pj(t,a),a})}function Mj(n){return N(this,null,function*(){let e=n.app;_S(e);let{provider:t}=jn(e);if(IS()){let r=yield CS(),{token:i}=yield wS(ES(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Rj(n,e,t,r){let{app:i}=n,o=jn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ju(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),gS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gS(n))}function DS(n,e){let t=jn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gS(n){let{app:e}=n,t=jn(e),r=t.tokenRefresher;r||(r=Nj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Nj(n){let{app:e}=n;return new Iv(()=>N(this,null,function*(){let t=jn(e),r;if(t.token?r=yield bv(n,!0):r=yield bv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=jn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},pS.RETRIAL_MIN_WAIT,pS.RETRIAL_MAX_WAIT)}function Pj(n,e){let t=jn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ju(n){return n.expireTimeMillis-Date.now()>0}function mS(n){return{token:xj(Aj),error:n}}var Tv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=jn(this.app);for(let t of e)DS(this.app,t.next);return Promise.resolve()}};function kj(n,e){return new Tv(n,e)}function Oj(n){return{getToken:e=>bv(n,e),getLimitedUseToken:()=>Mj(n),addTokenListener:e=>Rj(n,"INTERNAL",e),removeTokenListener:e=>DS(n.app,e)}}var Fj="@firebase/app-check",Vj="0.8.8";var Lj="app-check",yS="app-check-internal";function jj(){Ja(new $i(Lj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return kj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yS).initialize()})),Ja(new $i(yS,n=>{let e=n.getProvider("app-check").getImmediate();return Oj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Yr(Fj,Vj)}jj();var Bj=["localhost","0.0.0.0","127.0.0.1"],k5=typeof window<"u"&&Bj.includes(window.location.hostname);var Uj="firebase",$j="10.14.1";sn.registerVersion(Uj,$j,"app-compat");var Hj=["ngOnDestroy"],SS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Hj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Oh=class{constructor(e){return e}},js=new K("angularfire2.app.options"),Bs=new K("angularfire2.app.name");function Xu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=sn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>sn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;qj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Oh(s)}var qj=(n,...e)=>{yy()&&typeof console<"u"&&console[n](...e)},zj={provide:Oh,useFactory:Xu,deps:[js,we,[new Is,Bs]]},AS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:js,useValue:t},{provide:Bs,useValue:r}]}}constructor(t){sn.registerVersion("angularfire",Zu.full,"core"),sn.registerVersion("angularfire",Zu.full,"app-compat"),sn.registerVersion("angular",Ub.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Qt))};static \u0275mod=mt({type:n});static \u0275inj=pt({providers:[zj]})}return n})();function Fh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Gj(i,s)||(TS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Wj?" You may need to reload as Firebase is not HMR aware.":""}`),TS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Gj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Wj=typeof module<"u"&&!!module.hot,TS=(n,...e)=>{yy()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Sv=new K("angularfire2.auth.use-emulator"),Av=new K("angularfire2.auth.settings"),xv=new K("angularfire2.auth.tenant-id"),Mv=new K("angularfire2.auth.langugage-code"),Rv=new K("angularfire2.auth.use-device-language"),Nv=new K("angularfire.auth.persistence"),Pv=(n,e,t,r,i,o,s,a)=>Fh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),xS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,g,y){let b=new qe,A=ne(void 0).pipe(gn(s.outsideAngular),Ze(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Y(()=>Xu(t,o,r)),Y(x=>Pv(x,o,a,l,h,p,u,g)),Yl({bufferSize:1,refCount:!1}));if(uo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{A.pipe(mn()).subscribe();let x=A.pipe(Ze(j=>j.getRedirectResult().then(J=>J,()=>null)),Jt,Yl({bufferSize:1,refCount:!1})),B=A.pipe(Ze(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))})))),W=A.pipe(Ze(j=>new ye(J=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))}))));this.authState=x.pipe(Zl(B),Rn(s.outsideAngular),gn(s.insideAngular)),this.user=x.pipe(Zl(W),Rn(s.outsideAngular),gn(s.insideAngular)),this.idToken=this.user.pipe(Ze(j=>j?_e(j.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(Ze(j=>j?_e(j.getIdTokenResult()):ne(null))),this.credential=dg(x,b,this.authState.pipe(Et(j=>!j))).pipe(Y(j=>j?.user?j:null),Rn(s.outsideAngular),gn(s.insideAngular))}return SS(this,A,o,{spy:{apply:(x,B,W)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&W.then(j=>b.next(j))}}})}static \u0275fac=function(r){return new(r||n)(L(js),L(Bs,8),L(Qt),L(we),L(Ph),L(Sv,8),L(Av,8),L(xv,8),L(Mv,8),L(Rv,8),L(Nv,8),L(po,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RS={};var vi,kv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)_[fr-2]=arguments[fr];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return x(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return x(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-x(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+x(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=J(w,v).g;w=B(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=B(this,E),A(E)?-1:b(E)?0:1};function x(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(g)}n.abs=function(){return A(this)?x(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(E,v){return E.add(x(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?x(this).j(x(E)):x(x(this).j(E));if(A(E))return x(this.j(x(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,fr=E.i(C)>>>16,Na=E.i(C)&65535;w[2*I+2*C]+=_*Na,W(w,2*I+2*C),w[2*I+2*C+1]+=T*Na,W(w,2*I+2*C+1),w[2*I+2*C+1]+=_*fr,W(w,2*I+2*C+1),w[2*I+2*C+2]+=T*fr,W(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function W(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function j(E,v){this.g=E,this.h=v}function J(E,v){if(b(v))throw Error("division by zero");if(b(E))return new j(p,p);if(A(E))return v=J(x(E),v),new j(x(v.g),x(v.h));if(A(v))return v=J(E,x(v)),new j(x(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=v;0>=I.l(E);)w=oe(w),I=oe(I);var C=te(w,1),T=te(I,1);for(I=te(I,2),w=te(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=te(I,1),w=te(w,1)}return v=B(E,C.j(v)),new j(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=g),C=C.add(T),E=B(E,_)}return new j(C,E)}n.A=function(E){return J(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function oe(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function te(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kv=RS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,vi=RS.Integer=s}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fr={};var Ov,Qj,Us,Fv,ec,Lh,Vv,Lv,jv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var D=c[m];if(!(D in f))break e;f=f[D]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,D={next:function(){if(!m&&f<c.length){var M=f++;return{value:d(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,D,M){for(var U=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)U[ke-2]=arguments[ke];return d.prototype[D].apply(m,U)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let D=c.length||0,M=m.length||0;c.length=D+M;for(let U=0;U<M;U++)c[D+U]=m[U]}else c.push(m)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var oe=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function te(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)c[f]=m[f];for(let M=0;M<w.length;M++)f=w[M],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=mp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class fr{constructor(){this.h=this.g=null}add(d,f){let m=Na.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Na=new B(()=>new QR,c=>c.reset());class QR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pa,ka=!1,mp=new fr,KE=()=>{let c=a.Promise.resolve(void 0);Pa=()=>{c.then(YR)}};var YR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Na;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ka=!1};function Gr(){this.s=this.s,this.C=this.C}Gr.prototype.s=!1,Gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var ZR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Oa(c,d){if(bt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(oe){e:{try{J(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Oa.aa.h.call(this)}}b(Oa,bt);var JR={2:"touch",3:"pen",4:"mouse"};Oa.prototype.h=function(){Oa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),XR=0;function eN(c,d,f,m,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++XR,this.da=this.fa=!1}function Xc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function el(c){this.src=c,this.g={},this.h=0}el.prototype.add=function(c,d,f,m,D){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var U=vp(c,d,m,D);return-1<U?(d=c[U],f||(d.fa=!1)):(d=new eN(d,this.src,M,!!m,D),d.fa=f,c.push(d)),d};function yp(c,d){var f=d.type;if(f in c.g){var m=c.g[f],D=Array.prototype.indexOf.call(m,d,void 0),M;(M=0<=D)&&Array.prototype.splice.call(m,D,1),M&&(Xc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function vp(c,d,f,m){for(var D=0;D<c.length;++D){var M=c[D];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==m)return D}return-1}var _p="closure_lm_"+(1e6*Math.random()|0),wp={};function QE(c,d,f,m,D){if(m&&m.once)return ZE(c,d,f,m,D);if(Array.isArray(d)){for(var M=0;M<d.length;M++)QE(c,d[M],f,m,D);return null}return f=Dp(f),c&&c[Fa]?c.K(d,f,l(m)?!!m.capture:!!m,D):YE(c,d,f,!1,m,D)}function YE(c,d,f,m,D,M){if(!d)throw Error("Invalid event type");var U=l(D)?!!D.capture:!!D,ke=Ip(c);if(ke||(c[_p]=ke=new el(c)),f=ke.add(d,f,m,U,M),f.proxy)return f;if(m=tN(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)ZR||(D=U),D===void 0&&(D=!1),c.addEventListener(d.toString(),m,D);else if(c.attachEvent)c.attachEvent(XE(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function tN(){function c(f){return d.call(c.src,c.listener,f)}let d=nN;return c}function ZE(c,d,f,m,D){if(Array.isArray(d)){for(var M=0;M<d.length;M++)ZE(c,d[M],f,m,D);return null}return f=Dp(f),c&&c[Fa]?c.L(d,f,l(m)?!!m.capture:!!m,D):YE(c,d,f,!0,m,D)}function JE(c,d,f,m,D){if(Array.isArray(d))for(var M=0;M<d.length;M++)JE(c,d[M],f,m,D);else m=l(m)?!!m.capture:!!m,f=Dp(f),c&&c[Fa]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],f=vp(M,f,m,D),-1<f&&(Xc(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ip(c))&&(d=c.g[d.toString()],c=-1,d&&(c=vp(d,f,m,D)),(f=-1<c?d[c]:null)&&Ep(f))}function Ep(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Fa])yp(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(XE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Ip(d))?(yp(f,c),f.h==0&&(f.src=null,d[_p]=null)):Xc(c)}}}function XE(c){return c in wp?wp[c]:wp[c]="on"+c}function nN(c,d){if(c.da)c=!0;else{d=new Oa(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Ep(c),c=f.call(m,d)}return c}function Ip(c){return c=c[_p],c instanceof el?c:null}var Cp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dp(c){return typeof c=="function"?c:(c[Cp]||(c[Cp]=function(d){return c.handleEvent(d)}),c[Cp])}function Tt(){Gr.call(this),this.i=new el(this),this.M=this,this.F=null}b(Tt,Gr),Tt.prototype[Fa]=!0,Tt.prototype.removeEventListener=function(c,d,f,m){JE(this,c,d,f,m)};function Ft(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new bt(d,c);else if(d instanceof bt)d.target=d.target||c;else{var D=d;d=new bt(m,c),I(d,D)}if(D=!0,f)for(var M=f.length-1;0<=M;M--){var U=d.g=f[M];D=tl(U,m,!0,d)&&D}if(U=d.g=c,D=tl(U,m,!0,d)&&D,D=tl(U,m,!1,d)&&D,f)for(M=0;M<f.length;M++)U=d.g=f[M],D=tl(U,m,!1,d)&&D}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Xc(f[m]);delete c.g[d],c.h--}}this.F=null},Tt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Tt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function tl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,M=0;M<d.length;++M){var U=d[M];if(U&&!U.da&&U.capture==f){var ke=U.listener,_t=U.ha||U.src;U.fa&&yp(c.i,U),D=ke.call(_t,m)!==!1&&D}}return D&&!m.defaultPrevented}function eI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function tI(c){c.g=eI(()=>{c.g=null,c.i&&(c.i=!1,tI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class rN extends Gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:tI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Va(c){Gr.call(this),this.h=c,this.g={}}b(Va,Gr);var nI=[];function rI(c){te(c.g,function(d,f){this.g.hasOwnProperty(f)&&Ep(d)},c),c.g={}}Va.prototype.N=function(){Va.aa.N.call(this),rI(this)},Va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bp=a.JSON.stringify,iN=a.JSON.parse,oN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Tp(){}Tp.prototype.h=null;function iI(c){return c.h||(c.h=c.i())}function oI(){}var La={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sp(){bt.call(this,"d")}b(Sp,bt);function Ap(){bt.call(this,"c")}b(Ap,bt);var Li={},sI=null;function nl(){return sI=sI||new Tt}Li.La="serverreachability";function aI(c){bt.call(this,Li.La,c)}b(aI,bt);function ja(c){let d=nl();Ft(d,new aI(d))}Li.STAT_EVENT="statevent";function uI(c,d){bt.call(this,Li.STAT_EVENT,c),this.stat=d}b(uI,bt);function Vt(c){let d=nl();Ft(d,new uI(d,c))}Li.Ma="timingevent";function cI(c,d){bt.call(this,Li.Ma,c),this.size=d}b(cI,bt);function Ba(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ua(){this.g=!0}Ua.prototype.xa=function(){this.g=!1};function sN(c,d,f,m,D,M){c.info(function(){if(c.g)if(M)for(var U="",ke=M.split("&"),_t=0;_t<ke.length;_t++){var Se=ke[_t].split("=");if(1<Se.length){var St=Se[0];Se=Se[1];var At=St.split("_");U=2<=At.length&&At[1]=="type"?U+(St+"="+Se+"&"):U+(St+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+U})}function aN(c,d,f,m,D,M,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+M+" "+U})}function Ho(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cN(c,f)+(m?" "+m:"")})}function uN(c,d){c.info(function(){return"TIMEOUT: "+d})}Ua.prototype.info=function(){};function cN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<D.length;U++)D[U]=""}}}}return bp(f)}catch{return d}}var rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xp;function il(){}b(il,Tp),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},xp=new il;function Wr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dI}function dI(){this.i=null,this.g="",this.h=!1}var hI={},Mp={};function Rp(c,d,f){c.L=1,c.v=ul(pr(d)),c.m=f,c.P=!0,fI(c,null)}function fI(c,d){c.F=Date.now(),ol(c),c.A=pr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),SI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new dI,c.g=zI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new rN(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(nI[0]=D.toString()),D=nI);for(var M=0;M<D.length;M++){var U=QE(f,D[M],m||d.handleEvent,!1,d.h||d);if(!U)break;d.g[U.key]=U}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ja(),sN(c.i,c.u,c.A,c.l,c.R,c.m)}Wr.prototype.ca=function(c){c=c.target;let d=this.M;d&&gr(c)==3?d.j():this.Y(c)},Wr.prototype.Y=function(c){try{if(c==this.g)e:{let At=gr(this.g);var d=this.g.Ba();let Go=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||kI(this.g)))){this.J||At!=4||d==7||(d==8||0>=Go?ja(3):ja(2)),Np(this);var f=this.g.Z();this.X=f;t:if(pI(this)){var m=kI(this.g);c="";var D=m.length,M=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),$a(this);var U="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(M&&d==D-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,aN(this.i,this.u,this.A,this.l,this.R,At,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,_t=this.g;if((ke=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ke)){var Se=ke;break t}}Se=null}if(f=Se)Ho(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pp(this,f);else{this.o=!1,this.s=3,Vt(12),ji(this),$a(this);break e}}if(this.P){f=!0;let xn;for(;!this.J&&this.C<U.length;)if(xn=lN(this,U),xn==Mp){At==4&&(this.s=4,Vt(14),f=!1),Ho(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==hI){this.s=4,Vt(15),Ho(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Ho(this.i,this.l,xn,null),Pp(this,xn);if(pI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||U.length!=0||this.h.h||(this.s=1,Vt(16),f=!1),this.o=this.o&&f,!f)Ho(this.i,this.l,U,"[Invalid Chunked Response]"),ji(this),$a(this);else if(0<U.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),jp(St),St.M=!0,Vt(11))}}else Ho(this.i,this.l,U,null),Pp(this,U);At==4&&ji(this),this.o&&!this.J&&(At==4?UI(this.j,this):(this.o=!1,ol(this)))}else SN(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),ji(this),$a(this)}}}catch{}finally{}};function pI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lN(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Mp:(f=Number(d.substring(f,m)),isNaN(f)?hI:(m+=1,m+f>d.length?Mp:(d=d.slice(m,m+f),c.C=m+f,d)))}Wr.prototype.cancel=function(){this.J=!0,ji(this)};function ol(c){c.S=Date.now()+c.I,gI(c,c.I)}function gI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ba(g(c.ba,c),d)}function Np(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Wr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(uN(this.i,this.A),this.L!=2&&(ja(),Vt(17)),ji(this),this.s=2,$a(this)):gI(this,this.S-c)};function $a(c){c.j.G==0||c.J||UI(c.j,c)}function ji(c){Np(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,rI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Pp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||kp(f.h,c))){if(!c.K&&kp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)fl(f),dl(f);else break e;Lp(f),Vt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ba(g(f.Za,f),6e3));if(1>=vI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ui(f,11)}else if((c.K||f.g==c)&&fl(f),!W(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let Se=D[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let St=Se[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));let At=Se[4];At!=null&&(f.Aa=At,f.j.info("SVER="+f.Aa));let Go=Se[5];Go!=null&&typeof Go=="number"&&0<Go&&(m=1.5*Go,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let xn=c.g;if(xn){let gl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var M=m.h;M.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Op(M,M.h),M.h=null))}if(m.D){let Bp=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bp&&(m.ya=Bp,Be(m.I,m.D,Bp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var U=c;if(m.qa=qI(m,m.J?m.ia:null,m.W),U.K){_I(m.h,U);var ke=U,_t=m.L;_t&&(ke.I=_t),ke.B&&(Np(ke),ol(ke)),m.g=U}else jI(m);0<f.i.length&&hl(f)}else Se[0]!="stop"&&Se[0]!="close"||Ui(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ui(f,7):Vp(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}ja(4)}catch{}}var dN=class{constructor(c,d){this.g=c,this.map=d}};function mI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vI(c){return c.h?1:c.g?c.g.size:0}function kp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Op(c,d){c.g?c.g.add(d):c.h=d}function _I(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}mI.prototype.cancel=function(){if(this.i=wI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function wI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function hN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function fN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function EI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=fN(c),m=hN(c),D=m.length,M=0;M<D;M++)d.call(void 0,m[M],f&&f[M],c)}var II=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),D=null;if(0<=m){var M=c[f].substring(0,m);D=c[f].substring(m+1)}else M=c[f];d(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bi){this.h=c.h,sl(this,c.j),this.o=c.o,this.g=c.g,al(this,c.s),this.l=c.l;var d=c.i,f=new za;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),CI(this,f),this.m=c.m}else c&&(d=String(c).match(II))?(this.h=!1,sl(this,d[1]||"",!0),this.o=Ha(d[2]||""),this.g=Ha(d[3]||"",!0),al(this,d[4]),this.l=Ha(d[5]||"",!0),CI(this,d[6]||"",!0),this.m=Ha(d[7]||"")):(this.h=!1,this.i=new za(null,this.h))}Bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(qa(d,DI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(qa(d,DI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(qa(f,f.charAt(0)=="/"?yN:mN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",qa(f,_N)),c.join("")};function pr(c){return new Bi(c)}function sl(c,d,f){c.j=f?Ha(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function al(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function CI(c,d,f){d instanceof za?(c.i=d,wN(c.i,c.h)):(f||(d=qa(d,vN)),c.i=new za(d,c.h))}function Be(c,d,f){c.i.set(d,f)}function ul(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ha(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,gN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function gN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var DI=/[#\/\?@]/g,mN=/[#\?:]/g,yN=/[#\?]/g,vN=/[#\?@]/g,_N=/#/g;function za(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Kr(c){c.g||(c.g=new Map,c.h=0,c.i&&pN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=za.prototype,n.add=function(c,d){Kr(this),this.i=null,c=qo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function bI(c,d){Kr(c),d=qo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function TI(c,d){return Kr(c),d=qo(c,d),c.g.has(d)}n.forEach=function(c,d){Kr(this),this.g.forEach(function(f,m){f.forEach(function(D){c.call(d,D,m,this)},this)},this)},n.na=function(){Kr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let D=c[m];for(let M=0;M<D.length;M++)f.push(d[m])}return f},n.V=function(c){Kr(this);let d=[];if(typeof c=="string")TI(this,c)&&(d=d.concat(this.g.get(qo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Kr(this),this.i=null,c=qo(this,c),TI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function SI(c,d,f){bI(c,d),0<f.length&&(c.i=null,c.g.set(qo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let M=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var D=M;U[m]!==""&&(D+="="+encodeURIComponent(String(U[m]))),c.push(D)}}return this.i=c.join("&")};function qo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function wN(c,d){d&&!c.j&&(Kr(c),c.i=null,c.g.forEach(function(f,m){var D=m.toLowerCase();m!=D&&(bI(this,m),SI(this,D,f))},c)),c.j=d}function EN(c,d){let f=new Ua;if(a.Image){let m=new Image;m.onload=y(Qr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Qr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Qr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Qr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function IN(c,d){let f=new Ua,m=new AbortController,D=setTimeout(()=>{m.abort(),Qr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(D),M.ok?Qr(f,"TestPingServer: ok",!0,d):Qr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Qr(f,"TestPingServer: error",!1,d)})}function Qr(c,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function CN(){this.g=new oN}function DN(c,d,f){let m=f||"";try{EI(c,function(D,M){let U=D;l(D)&&(U=bp(D)),d.push(m+M+"="+encodeURIComponent(U))})}catch(D){throw d.push(m+"type="+encodeURIComponent("_badmap")),D}}function Ga(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ga,Tp),Ga.prototype.g=function(){return new cl(this.l,this.j)},Ga.prototype.i=function(c){return function(){return c}}({});function cl(c,d){Tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(cl,Tt),n=cl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ka(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;AI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function AI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Wa(this):Ka(this),this.readyState==3&&AI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Wa(this))},n.Qa=function(c){this.g&&(this.response=c,Wa(this))},n.ga=function(){this.g&&Wa(this)};function Wa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ka(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ka(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xI(c){let d="";return te(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Fp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=xI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Be(c,d,f))}function Qe(c){Tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Qe,Tt);var bN=/^https?$/i,TN=["POST","PUT"];n=Qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xp.g(),this.v=this.o?iI(this.o):iI(xp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){MI(this,M);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())f.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TN,d,void 0))||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,U]of f)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{PI(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){MI(this,M)}};function MI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,RI(c),ll(c)}function RI(c){c.A||(c.A=!0,Ft(c,"complete"),Ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ft(this,"complete"),Ft(this,"abort"),ll(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ll(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?NI(this):this.bb())},n.bb=function(){NI(this)};function NI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||gr(c)!=4||c.Z()!=2)){if(c.u&&gr(c)==4)eI(c.Ea,0,c);else if(Ft(c,"readystatechange"),gr(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=U===0){var D=String(c.D).match(II)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!bN.test(D?D.toLowerCase():"")}f=m}if(f)Ft(c,"complete"),Ft(c,"success");else{c.m=6;try{var M=2<gr(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",RI(c)}}finally{ll(c)}}}}function ll(c,d){if(c.g){PI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ft(c,"ready");try{f.onreadystatechange=m}catch{}}}function PI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function gr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),iN(d)}};function kI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function SN(c){let d={};c=(c.g&&2<=gr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(W(c[m]))continue;var f=C(c[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[D]||[];d[D]=M,M.push(f)}E(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function OI(c){this.Aa=0,this.i=[],this.j=new Ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qa("baseRetryDelayMs",5e3,c),this.cb=Qa("retryDelaySeedMs",1e4,c),this.Wa=Qa("forwardChannelMaxRetries",2,c),this.wa=Qa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new mI(c&&c.concurrentRequestLimit),this.Da=new CN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=OI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Vt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=qI(this,null,this.W),hl(this)};function Vp(c){if(FI(c),c.G==3){var d=c.U++,f=pr(c.I);if(Be(f,"SID",c.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),Ya(c,f),d=new Wr(c,c.j,d),d.L=2,d.v=ul(pr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=zI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ol(d)}HI(c)}function dl(c){c.g&&(jp(c),c.g.cancel(),c.g=null)}function FI(c){dl(c),c.u&&(a.clearTimeout(c.u),c.u=null),fl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function hl(c){if(!yI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Pa||KE(),ka||(Pa(),ka=!0),mp.add(d,c),c.B=0}}function AN(c,d){return vI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ba(g(c.Ga,c,d),$I(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Wr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=LI(this,D,d),f=pr(this.I),Be(f,"RID",c),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),Ya(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(xI(M)))+"&"+d:this.m&&Fp(f,this.m,M)),Op(this.h,D),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),D.T=!0,Rp(D,f,null)):Rp(D,f,d),this.G=2}}else this.G==3&&(c?VI(this,c):this.i.length==0||yI(this.h)||VI(this))};function VI(c,d){var f;d?f=d.l:f=c.U++;let m=pr(c.I);Be(m,"SID",c.K),Be(m,"RID",f),Be(m,"AID",c.T),Ya(c,m),c.m&&c.o&&Fp(m,c.m,c.o),f=new Wr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=LI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Op(c.h,f),Rp(f,m,d)}function Ya(c,d){c.H&&te(c.H,function(f,m){Be(d,m,f)}),c.l&&EI({},function(f,m){Be(d,m,f)})}function LI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var D=c.i;let M=-1;for(;;){let U=["count="+f];M==-1?0<f?(M=D[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let ke=!0;for(let _t=0;_t<f;_t++){let Se=D[_t].g,St=D[_t].map;if(Se-=M,0>Se)M=Math.max(0,D[_t].g-100),ke=!1;else try{DN(St,U,"req"+Se+"_")}catch{m&&m(St)}}if(ke){m=U.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function jI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Pa||KE(),ka||(Pa(),ka=!0),mp.add(d,c),c.v=0}}function Lp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ba(g(c.Fa,c),$I(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,BI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ba(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),dl(this),BI(this))};function jp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function BI(c){c.g=new Wr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=pr(c.qa);Be(d,"RID","rpc"),Be(d,"SID",c.K),Be(d,"AID",c.T),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(d,"TO",c.ja),Be(d,"TYPE","xmlhttp"),Ya(c,d),c.m&&c.o&&Fp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ul(pr(d)),f.m=null,f.P=!0,fI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,dl(this),Lp(this),Vt(19))};function fl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function UI(c,d){var f=null;if(c.g==d){fl(c),jp(c),c.g=null;var m=2}else if(kp(c.h,d))f=d.D,_I(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;m=nl(),Ft(m,new cI(m,f)),hl(c)}else jI(c);else if(D=d.s,D==3||D==0&&0<d.X||!(m==1&&AN(c,d)||m==2&&Lp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function $I(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ui(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let D=!m;m=new Bi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sl(m,"https"),ul(m),D?EN(m.toString(),f):IN(m.toString(),f)}else Vt(2);c.G=0,c.l&&c.l.sa(d),HI(c),FI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function HI(c){if(c.G=0,c.ka=[],c.l){let d=wI(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function qI(c,d,f){var m=f instanceof Bi?pr(f):new Bi(f);if(m.g!="")d&&(m.g=d+"."+m.g),al(m,m.s);else{var D=a.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var M=new Bi(null);m&&sl(M,m),d&&(M.g=d),D&&al(M,D),f&&(M.l=f),m=M}return f=c.D,d=c.ya,f&&d&&Be(m,f,d),Be(m,"VER",c.la),Ya(c,m),m}function zI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Qe(new Ga({eb:f})):new Qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function GI(){}n=GI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pl(){}pl.prototype.g=function(c,d){return new on(c,d)};function on(c,d){Tt.call(this),this.g=new OI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new zo(this)}b(on,Tt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Vp(this.g)},on.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=bp(c),c=f);d.i.push(new dN(d.Ya++,c)),d.G==3&&hl(d)},on.prototype.N=function(){this.g.l=null,delete this.j,Vp(this.g),delete this.g,on.aa.N.call(this)};function WI(c){Sp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(WI,Sp);function KI(){Ap.call(this),this.status=1}b(KI,Ap);function zo(c){this.g=c}b(zo,GI),zo.prototype.ua=function(){Ft(this.g,"a")},zo.prototype.ta=function(c){Ft(this.g,new WI(c))},zo.prototype.sa=function(c){Ft(this.g,new KI)},zo.prototype.ra=function(){Ft(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,jv=Fr.createWebChannelTransport=function(){return new pl},Lv=Fr.getStatEventTarget=function(){return nl()},Vv=Fr.Event=Li,Lh=Fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,ec=Fr.ErrorCode=rl,lI.COMPLETE="complete",Fv=Fr.EventType=lI,oI.EventType=La,La.OPEN="a",La.CLOSE="b",La.ERROR="c",La.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Us=Fr.WebChannel=oI,Qj=Fr.FetchXmlHttpFactory=Ga,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Ov=Fr.XhrIo=Qe}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});var NS="@firebase/firestore";var at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");var va="10.14.0";var bi=new vl("@firebase/firestore");function Gs(){return bi.logLevel}function OA(n){bi.setLogLevel(n)}function V(n,...e){if(bi.logLevel<=zn.DEBUG){let t=e.map(qw);bi.debug(`Firestore (${va}): ${n}`,...t)}}function et(n,...e){if(bi.logLevel<=zn.ERROR){let t=e.map(qw);bi.error(`Firestore (${va}): ${n}`,...t)}}function Bn(n,...e){if(bi.logLevel<=zn.WARN){let t=e.map(qw);bi.warn(`Firestore (${va}): ${n}`,...t)}}function qw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+n;throw et(e),new Error(e)}function Z(n,e){n||Q()}function FA(n,e){n||Q()}function H(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends e0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ht=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(at.UNAUTHENTICATED))}shutdown(){}},Gv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Wv=class{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ht;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ht,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ht)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new Kh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new at(e)}},Kv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Qv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Kv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new Yv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Yj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Qh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Yj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function ta(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VA(n){return n+"\0"}var We=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new We(0,0))}static max(){return new n(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends Yh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Zj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class n extends Yh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Zj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var na=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Jv(n){return n.fields.find(e=>e.kind===2)}function mo(n){return n.fields.filter(e=>e.kind!==2)}na.UNKNOWN_ID=-1;var Js=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var hc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Sn.min())}};function LA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new We(t+1,0):new We(t,r));return new Sn(i,q.empty(),e)}function jA(n){return new Sn(n.readTime,n.key,-1)}var Sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),q.empty(),-1)}static max(){return new n(re.max(),q.empty(),-1)}};function zw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var BA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Oi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==BA)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Jh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Io(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Gw(r.target.error);this.V.reject(new Io(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Io(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new e_(t)}},Ti=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Za())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yl())return!1;if(n.v())return!0;let e=Za(),t=n.S(e),r=0<t&&t<10,i=UA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Io(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new F(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new F(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Io(e,s))},i.onupgradeneeded=o=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Jh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(V("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function UA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Xv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yo(this.B.delete())}},Io=class extends F{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Fi(n){return n.name==="IndexedDbTransactionError"}var e_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(V("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yo(r)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),yo(this.store.add(e))}get(e){return yo(this.store.get(e)).next(t=>(t===void 0&&(t=null),V("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),yo(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),yo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){V("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Gw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Xv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function yo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Gw(r.target.error);t(i)}})}var PS=!1;function Gw(n){let e=Ti.S(Za());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PS||(PS=!0,setTimeout(()=>{throw r},0)),r}}return n}var t_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){V("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{V("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Fi(t)?V("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Oi(t)}yield this.X(6e4)}))}},n_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return V("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(V("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=jA(o);zw(s,r)>0&&(r=s)}),new Sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var fn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Pc(n){return n==null}function fc(n){return n===0&&1/n==-1/0}function $A(n){return typeof n=="number"&&Number.isInteger(n)&&!fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ht(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kS(e)),e=Jj(n.get(t),e);return kS(e)}function Jj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function kS(n){return n+""}function rr(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),Ie.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Q(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Q()}o=s+2}return new Ie(r)}var OS=["userId","batchId"];function Hh(n,e){return[n,Ht(e)]}function HA(n,e,t){return[n,Ht(e),t]}var Xj={},eB=["prefixPath","collectionGroup","readTime","documentId"],tB=["prefixPath","collectionGroup","documentId"],nB=["collectionGroup","readTime","prefixPath","documentId"],rB=["canonicalId","targetId"],iB=["targetId","path"],oB=["path","targetId"],sB=["collectionId","parent"],aB=["indexId","uid"],uB=["uid","sequenceNumber"],cB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lB=["indexId","uid","orderedDocumentKey"],dB=["userId","collectionPath","documentId"],hB=["userId","collectionPath","largestBatchId"],fB=["userId","collectionGroup","largestBatchId"],qA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pB=[...qA,"documentOverlays"],zA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GA=zA,Ww=[...GA,"indexConfiguration","indexState","indexEntries"],gB=Ww,mB=[...Ww,"globals"];var pc=class extends Zh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ft(n,e){let t=H(n);return Ti.F(t._e,e)}function FS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||or.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},or=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Le=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xh(this.data.getIterator())}getIteratorFrom(e){return new Xh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $s(n){return n.hasNext()?n.getNext():void 0}var pn=class n{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Le(tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ef=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function KA(){return typeof atob<"u"}var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ef("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var yB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(n){if(Z(!!n),typeof n=="string"){let e=0,t=yB.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Si(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function Gf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kw(n){let e=n.mapValue.fields.__previous_value__;return Gf(e)?Kw(e):e}function gc(n){let e=jr(n.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}var r_=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ai=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ci={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qh={nullValue:"NULL_VALUE"};function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gf(n)?4:QA(n)?9007199254740991:Wf(n)?10:11:Q()}function ur(n,e){if(n===e)return!0;let t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gc(n).isEqual(gc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=jr(i.timestampValue),a=jr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Si(i.bytesValue).isEqual(Si(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ze(i.geoPointValue.latitude)===ze(o.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ze(i.integerValue)===ze(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ze(i.doubleValue),a=ze(o.doubleValue);return s===a?fc(s)===fc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ta(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(FS(s)!==FS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ur(s[u],a[u])))return!1;return!0}(n,e);default:return Q()}}function mc(n,e){return(n.values||[]).find(t=>ur(t,e))!==void 0}function xi(n,e){if(n===e)return 0;let t=Co(n),r=Co(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ze(o.integerValue||o.doubleValue),u=ze(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return VS(n.timestampValue,e.timestampValue);case 4:return VS(gc(n),gc(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Si(o),u=Si(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ue(a[l],u[l]);if(h!==0)return h}return ue(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue(ze(o.latitude),ze(s.latitude));return a!==0?a:ue(ze(o.longitude),ze(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ue(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:LS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ci.mapValue&&s===Ci.mapValue)return 0;if(o===Ci.mapValue)return 1;if(s===Ci.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=ue(u[p],h[p]);if(g!==0)return g;let y=xi(a[u[p]],l[h[p]]);if(y!==0)return y}return ue(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function VS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=jr(n),r=jr(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function LS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=xi(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function ra(n){return i_(n)}function i_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=jr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Si(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=i_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${i_(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function Do(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function o_(n){return!!n&&"integerValue"in n}function yc(n){return!!n&&"arrayValue"in n}function jS(n){return!!n&&"nullValue"in n}function BS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zh(n){return!!n&&"mapValue"in n}function Wf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ac(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ac(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var YA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function vB(n){return"nullValue"in n?qh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Do(Ai.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Wf(n)?YA:{mapValue:{}}:Q()}function _B(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Do(Ai.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?YA:"mapValue"in n?Wf(n)?{mapValue:{}}:Ci:Q()}function US(n,e){let t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $S(n,e){let t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var kt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=tt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ac(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ac(this.value))}};function ZA(n){let e=[];return ko(n.fields,(t,r)=>{let i=new tt([t]);if(zh(r)){let o=ZA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new pn(e)}var ut=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),kt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),kt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cr=class{constructor(e,t){this.position=e,this.inclusive=t}};function HS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=xi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function qS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}var bo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tf=class{},ve=class n extends tf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new u_(e,t,r):t==="array-contains"?new d_(e,r):t==="in"?new nf(e,r):t==="not-in"?new h_(e,r):t==="array-contains-any"?new f_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new c_(e,r):new l_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xi(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pe=class n extends tf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ia(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ia(n){return n.op==="and"}function s_(n){return n.op==="or"}function Qw(n){return JA(n)&&ia(n)}function JA(n){for(let e of n.filters)if(e instanceof Pe)return!1;return!0}function a_(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(Qw(n))return n.filters.map(e=>a_(e)).join(",");{let e=n.filters.map(t=>a_(t)).join(",");return`${n.op}(${e})`}}function XA(n,e){return n instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)}(n,e):n instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&XA(s,i.filters[a]),!0):!1}(n,e):void Q()}function ex(n,e){let t=n.filters.concat(e);return Pe.create(t,n.op)}function tx(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`}(n):n instanceof Pe?function(t){return t.op.toString()+" {"+t.getFilters().map(tx).join(" ,")+"}"}(n):"Filter"}var u_=class extends ve{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},c_=class extends ve{constructor(e,t){super(e,"in",t),this.keys=nx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},l_=class extends ve{constructor(e,t){super(e,"not-in",t),this.keys=nx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function nx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var d_=class extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return yc(t)&&mc(t.arrayValue,this.value)}},nf=class extends ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mc(this.value.arrayValue,t)}},h_=class extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!mc(this.value.arrayValue,t)}},f_=class extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}};var p_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function g_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new p_(n,e,t,r,i,o,s)}function To(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>a_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ra(r)).join(",")),e.ue=t}return e.ue}function kc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qS(n.startAt,e.startAt)&&qS(n.endAt,e.endAt)}function rf(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function of(n,e){return n.filters.filter(t=>t instanceof ve&&t.field.isEqual(e))}function zS(n,e,t){let r=qh,i=!0;for(let o of of(n,e)){let s=qh,a=!0;switch(o.op){case"<":case"<=":s=vB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=qh}US({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];US({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function GS(n,e,t){let r=Ci,i=!0;for(let o of of(n,e)){let s=Ci,a=!0;switch(o.op){case">=":case">":s=_B(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ci}$S({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];$S({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Un=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function rx(n,e,t,r,i,o,s,a){return new Un(n,e,t,r,i,o,s,a)}function _a(n){return new Un(n)}function WS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Yw(n){return n.collectionGroup!==null}function Xs(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Le(tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new bo(o,r))}),t.has(tt.keyField().canonicalString())||e.ce.push(new bo(tt.keyField(),r))}return e.ce}function qt(n){let e=H(n);return e.le||(e.le=EB(e,Xs(n))),e.le}function EB(n,e){if(n.limitType==="F")return g_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bo(i.field,o)});let t=n.endAt?new cr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cr(n.startAt.position,n.startAt.inclusive):null;return g_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function m_(n,e){let t=n.filters.concat([e]);return new Un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sf(n,e,t){return new Un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oc(n,e){return kc(qt(n),qt(e))&&n.limitType===e.limitType}function ix(n){return`${To(qt(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tx(i)).join(", ")}]`),Pc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`}(qt(n))}; limitType=${n.limitType})`}function Fc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=HS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,a,u){let l=HS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Xs(r),i))}(n,e)}function ox(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sx(n){return(e,t)=>{let r=!1;for(let i of Xs(n)){let o=IB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function IB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?xi(u,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return WA(this.inner)}size(){return this.innerSize}};var CB=new He(q.comparator);function Xt(){return CB}var ax=new He(q.comparator);function oc(...n){let e=ax;for(let t of n)e=e.insert(t.key,t);return e}function ux(n){let e=ax;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ir(){return uc()}function cx(){return uc()}function uc(){return new lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var DB=new He(q.comparator),bB=new Le(q.comparator);function ce(...n){let e=bB;for(let t of n)e=e.add(t);return e}var TB=new Le(ue);function Zw(){return TB}function Jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function lx(n){return{integerValue:""+n}}function dx(n,e){return $A(e)?lx(e):Jw(n,e)}var oa=class{constructor(){this._=void 0}};function SB(n,e,t){return n instanceof Mi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gf(o)&&(o=Kw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Br?fx(n,e):n instanceof Ur?px(n,e):function(i,o){let s=hx(i,o),a=KS(s)+KS(i.Pe);return o_(s)&&o_(i.Pe)?lx(a):Jw(i.serializer,a)}(n,e)}function AB(n,e,t){return n instanceof Br?fx(n,e):n instanceof Ur?px(n,e):t}function hx(n,e){return n instanceof Ri?function(r){return o_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mi=class extends oa{},Br=class extends oa{constructor(e){super(),this.elements=e}};function fx(n,e){let t=gx(e);for(let r of n.elements)t.some(i=>ur(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ur=class extends oa{constructor(e){super(),this.elements=e}};function px(n,e){let t=gx(e);for(let r of n.elements)t=t.filter(i=>!ur(i,r));return{arrayValue:{values:t}}}var Ri=class extends oa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function KS(n){return ze(n.integerValue||n.doubleValue)}function gx(n){return yc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var So=class{constructor(e,t){this.field=e,this.transform=t}};function xB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Br&&i instanceof Br||r instanceof Ur&&i instanceof Ur?ta(r.elements,i.elements,ur):r instanceof Ri&&i instanceof Ri?ur(r.Pe,i.Pe):r instanceof Mi&&i instanceof Mi}(n.transform,e.transform)}var y_=class{constructor(e,t){this.version=e,this.transformResults=t}},Xe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var sa=class{};function mx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pi(n.key,Xe.none()):new Ni(n.key,n.data,Xe.none());{let t=n.data,r=kt.empty(),i=new Le(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new $n(n.key,r,new pn(i.toArray()),Xe.none())}}function MB(n,e,t){n instanceof Ni?function(i,o,s){let a=i.value.clone(),u=YS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof $n?function(i,o,s){if(!Gh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=YS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(yx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function cc(n,e,t,r){return n instanceof Ni?function(o,s,a,u){if(!Gh(o.precondition,s))return a;let l=o.value.clone(),h=ZS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof $n?function(o,s,a,u){if(!Gh(o.precondition,s))return a;let l=ZS(o.fieldTransforms,u,s),h=s.data;return h.setAll(yx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Gh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function RB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=hx(r.transform,i||null);o!=null&&(t===null&&(t=kt.empty()),t.set(r.field,o))}return t||null}function QS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ta(r,i,(o,s)=>xB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ni=class extends sa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$n=class extends sa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function yx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function YS(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,AB(s,a,t[i]))}return r}function ZS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,SB(o,s,e))}return r}var Pi=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vc=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _c=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&MB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=mx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,r)=>QS(t,r))&&ta(this.baseMutations,e.baseMutations,(t,r)=>QS(t,r))}},v_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return DB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var wc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var __=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,Ee;function vx(n){switch(n){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function _x(n){if(n===void 0)return et("GRPC error has no .code"),R.UNKNOWN;switch(n){case ot.OK:return R.OK;case ot.CANCELLED:return R.CANCELLED;case ot.UNKNOWN:return R.UNKNOWN;case ot.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ot.INTERNAL:return R.INTERNAL;case ot.UNAVAILABLE:return R.UNAVAILABLE;case ot.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ot.NOT_FOUND:return R.NOT_FOUND;case ot.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ot.ABORTED:return R.ABORTED;case ot.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ot.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(Ee=ot||(ot={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var JS=null;function wx(){return new TextEncoder}var NB=new vi([4294967295,4294967295],0);function XS(n){let e=wx().encode(n),t=new kv;return t.update(e),new Uint8Array(t.digest())}function eA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vi([t,r],0),new vi([i,o],0)]}var w_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eo(`Invalid padding: ${t}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=vi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(vi.fromNumber(r)));return i.compare(NB)===1&&(i=new vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=XS(e),[r,i]=eA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=XS(e),[r,i]=eA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ec=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(re.min(),i,new He(ue),Xt(),ce())}},Ic=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var ea=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},af=class{constructor(e,t){this.targetId=e,this.me=t}},uf=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},cf=class{constructor(){this.fe=0,this.ge=nA(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Ic(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=nA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},E_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=tA(),this.Qe=new He(ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(rf(o))if(r===0){let s=new q(o.path);this.Ue(t,s,ut.newNoDocument(s,re.min()))}else Z(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}JS?.et(function(h,p,g,y,b){var A,x,B,W,j,J;let oe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},te=p.unchangedNames;return te&&(oe.bloomFilter={applied:b===0,hashCount:(A=te?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(W=(B=(x=te?.bits)===null||x===void 0?void 0:x.bitmap)===null||B===void 0?void 0:B.length)!==null&&W!==void 0?W:0,padding:(J=(j=te?.bits)===null||j===void 0?void 0:j.padding)!==null&&J!==void 0?J:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),oe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Si(r).toUint8Array()}catch(u){if(u instanceof ef)return Bn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new w_(s,i,o)}catch(u){return Bn(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&rf(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ut.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ec(e,t,this.Qe,this.ke,r);return this.ke=Xt(),this.qe=tA(),this.Qe=new He(ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Le(ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function tA(){return new He(q.comparator)}function nA(){return new He(q.comparator)}var PB={asc:"ASCENDING",desc:"DESCENDING"},kB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OB={and:"AND",or:"OR"},I_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function C_(n,e){return n.useProto3Json||Pc(e)?e:{value:e}}function aa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FB(n,e){return aa(n,e.toTimestamp())}function nt(n){return Z(!!n),re.fromTimestamp(function(t){let r=jr(t);return new We(r.seconds,r.nanos)}(n))}function Xw(n,e){return D_(n,e).canonicalString()}function D_(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Ix(n){let e=Ie.fromString(n);return Z(Nx(e)),e}function Cc(n,e){return Xw(n.databaseId,e.path)}function sr(n,e){let t=Ix(e);if(t.get(1)!==n.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(bx(t))}function Cx(n,e){return Xw(n.databaseId,e)}function Dx(n){let e=Ix(n);return e.length===4?Ie.emptyPath():bx(e)}function b_(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bx(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function rA(n,e,t){return{name:Cc(n,e),fields:t.value.mapValue.fields}}function Tx(n,e,t){let r=sr(n,e.name),i=nt(e.updateTime),o=e.createTime?nt(e.createTime):re.min(),s=new kt({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function VB(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let o=sr(r,i.found.name),s=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):re.min(),u=new kt({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let o=sr(r,i.missing),s=nt(i.readTime);return ut.newNoDocument(o,s)}(n,e):Q()}function LB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Z(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:_x(l.code);return new F(h,l.message||"")}(s);t=new uf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sr(n,r.document.name),o=nt(r.document.updateTime),s=r.document.createTime?nt(r.document.createTime):re.min(),a=new kt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sr(n,r.document),o=r.readTime?nt(r.readTime):re.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sr(n,r.document),o=r.removedTargetIds||[];t=new ea([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new __(i,o),a=r.targetId;t=new af(a,s)}}return t}function Dc(n,e){let t;if(e instanceof Ni)t={update:rA(n,e.key,e.value)};else if(e instanceof Pi)t={delete:Cc(n,e.key)};else if(e instanceof $n)t={update:rA(n,e.key,e.data),updateMask:qB(e.fieldMask)};else{if(!(e instanceof vc))return Q();t={verify:Cc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Mi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Br)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ur)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ri)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:FB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function T_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Xe.updateTime(nt(o.updateTime)):o.exists!==void 0?Xe.exists(o.exists):Xe.none()}(e.currentDocument):Xe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),u=new Mi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new Br(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Ur(h)}else"increment"in a?u=new Ri(s,a.increment):Q();let l=tt.fromServerFormat(a.fieldPath);return new So(l,u)}(n,i)):[];if(e.update){e.update.name;let i=sr(n,e.update.name),o=new kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new pn(l.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new $n(i,o,s,t,r)}return new Ni(i,o,t,r)}if(e.delete){let i=sr(n,e.delete);return new Pi(i,t)}if(e.verify){let i=sr(n,e.verify);return new vc(i,t)}return Q()}function jB(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?nt(i.updateTime):nt(o);return s.isEqual(re.min())&&(s=nt(o)),new y_(s,i.transformResults||[])}(t,e))):[]}function Sx(n,e){return{documents:[Cx(n,e.path)]}}function Ax(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Cx(n,i);let o=function(l){if(l.length!==0)return Rx(Pe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ks(g.field),direction:UB(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=C_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function xx(n){let e=Dx(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=Mx(p);return g instanceof Pe&&Qw(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(b){return new bo(Qs(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Pc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new cr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new cr(y,g)}(t.endAt)),rx(e,i,s,o,a,"F",u,l)}function BB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qs(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(t.unaryFilter.field);return ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(t.unaryFilter.field);return ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(Qs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pe.create(t.compositeFilter.filters.map(r=>Mx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function UB(n){return PB[n]}function $B(n){return kB[n]}function HB(n){return OB[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Qs(n){return tt.fromServerFormat(n.fieldPath)}function Rx(n){return n instanceof ve?function(t){if(t.op==="=="){if(BS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NAN"}};if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NAN"}};if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(t.field),op:$B(t.op),value:t.value}}}(n):n instanceof Pe?function(t){let r=t.getFilters().map(i=>Rx(i));return r.length===1?r[0]:{compositeFilter:{op:HB(t.op),filters:r}}}(n):Q()}function qB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ua=class n{constructor(e,t,r,i,o=re.min(),s=re.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lf=class{constructor(e){this.ct=e}};function zB(n,e){let t;if(e.document)t=Tx(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=xo(e.noDocument.readTime);t=ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{let r=q.fromSegments(e.unknownDocument.path),i=xo(e.unknownDocument.version);t=ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new We(i[0],i[1]);return re.fromTimestamp(o)}(e.readTime)),t}function iA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:df(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Cc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:aa(o,s.version.toTimestamp()),createTime:aa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ao(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:t.path.toArray(),version:Ao(e.version)}}return r}function df(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ao(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xo(n){let e=new We(n.seconds,n.nanoseconds);return re.fromTimestamp(e)}function vo(n,e){let t=(e.baseMutations||[]).map(o=>T_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>T_(n.ct,o)),i=We.fromMillis(e.localWriteTimeMs);return new _c(e.batchId,i,t,r)}function sc(n){let e=xo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?xo(n.lastLimboFreeSnapshotVersion):re.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Z(o.documents.length===1),qt(_a(Dx(o.documents[0])))}(n.query):function(o){return qt(xx(o))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rt.fromBase64String(n.resumeToken))}function Px(n,e){let t=Ao(e.snapshotVersion),r=Ao(e.lastLimboFreeSnapshotVersion),i;i=rf(e.target)?Sx(n.ct,e.target):Ax(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:To(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eE(n){let e=xx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sf(e,e.limit,"L"):e}function Bv(n,e){return new wc(e.largestBatchId,T_(n.ct,e.overlayMutation))}function oA(n,e){let t=e.path.lastSegment();return[n,Ht(e.path.popLast()),t]}function sA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ao(r.readTime),documentKey:Ht(r.documentKey.path),largestBatchId:r.largestBatchId}}var S_=class{getBundleMetadata(e,t){return aA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:xo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return aA(e).put(function(i){return{bundleId:i.id,createTime:Ao(nt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return uA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:eE(o.bundledQuery),readTime:xo(o.readTime)}}(r)})}saveNamedQuery(e,t){return uA(e).put(function(i){return{name:i.name,readTime:Ao(nt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function aA(n){return ft(n,"bundles")}function uA(n){return ft(n,"namedQueries")}var hf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return tc(e).get(oA(this.userId,t)).next(r=>r?Bv(this.serializer,r):null)}getOverlays(e,t){let r=ir();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new wc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Ht(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(tc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ir(),o=Ht(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return tc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Bv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ir(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Bv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return tc(e).put(function(i,o,s){let[a,u,l]=oA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Dc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function tc(n){return ft(n,"documentOverlays")}var A_=class{Pt(e){return ft(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Vr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ze(e.integerValue));else if("doubleValue"in e){let r=ze(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=jr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Si(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?QA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Wf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ze(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Vr.vt=new Vr;function GB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=GB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var x_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=cA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=cA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},M_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},R_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},_o=class{constructor(){this.jt=new x_,this.Ht=new M_(this.jt),this.Jt=new R_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var wo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function _i(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=lA(n.arrayValue,e.arrayValue),t!==0?t:(t=lA(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function lA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var ff=class{constructor(e){this.Xt=new Le((t,r)=>tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Jv(e);if(t!==void 0&&!this.sn(t))return!1;let r=mo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Le(tt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Js(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Js(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Js(r.field,r.dir==="asc"?0:1)));return new na(na.UNKNOWN_ID,this.collectionId,t,hc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function kx(n){var e,t;if(Z(n instanceof ve||n instanceof Pe),n instanceof ve){if(n instanceof nf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ve.create(n.field,"==",o)))||[];return Pe.create(i,"or")}return n}let r=n.filters.map(i=>kx(i));return Pe.create(r,n.op)}function WB(n){if(n.getFilters().length===0)return[];let e=k_(kx(n));return Z(Ox(e)),N_(e)||P_(e)?[e]:e.getFilters()}function N_(n){return n instanceof ve}function P_(n){return n instanceof Pe&&Qw(n)}function Ox(n){return N_(n)||P_(n)||function(t){if(t instanceof Pe&&s_(t)){for(let r of t.getFilters())if(!N_(r)&&!P_(r))return!1;return!0}return!1}(n)}function k_(n){if(Z(n instanceof ve||n instanceof Pe),n instanceof ve)return n;if(n.filters.length===1)return k_(n.filters[0]);let e=n.filters.map(r=>k_(r)),t=Pe.create(e,n.op);return t=pf(t),Ox(t)?t:(Z(t instanceof Pe),Z(ia(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>tE(r,i)))}function tE(n,e){let t;return Z(n instanceof ve||n instanceof Pe),Z(e instanceof ve||e instanceof Pe),t=n instanceof ve?e instanceof ve?function(i,o){return Pe.create([i,o],"and")}(n,e):dA(n,e):e instanceof ve?dA(e,n):function(i,o){if(Z(i.filters.length>0&&o.filters.length>0),ia(i)&&ia(o))return ex(i,o.getFilters());let s=s_(i)?i:o,a=s_(i)?o:i,u=s.filters.map(l=>tE(l,a));return Pe.create(u,"or")}(n,e),pf(t)}function dA(n,e){if(ia(e))return ex(e,n.getFilters());{let t=e.filters.map(r=>tE(n,r));return Pe.create(t,"or")}}function pf(n){if(Z(n instanceof ve||n instanceof Pe),n instanceof ve)return n;let e=n.getFilters();if(e.length===1)return pf(e[0]);if(JA(n))return n;let t=e.map(i=>pf(i)),r=[];return t.forEach(i=>{i instanceof ve?r.push(i):i instanceof Pe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,n.op)}var O_=class{constructor(){this.un=new bc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Sn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},bc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Le(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(Ie.comparator)).toArray()}};var jh=new Uint8Array(0),F_=class{constructor(e,t){this.databaseId=t,this.cn=new bc,this.ln=new lr(r=>To(r),(r,i)=>kc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Ht(i)};return hA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[VA(t),""],!1,!0);return hA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(rr(s.parent))}return r})}addFieldIndex(e,t){let r=nc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=qs(e);return o.next(a=>{s.put(sA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=nc(e),i=qs(e),o=Hs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=nc(e),r=Hs(e),i=qs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ff(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Hs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(u,l)=>{V("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${To(t)}`);let h=function(j,J){let oe=Jv(J);if(oe===void 0)return null;for(let te of of(j,oe.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(l,u),p=function(j,J){let oe=new Map;for(let te of mo(J))for(let E of of(j,te.fieldPath))switch(E.op){case"==":case"in":oe.set(te.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return oe.set(te.fieldPath.canonicalString(),E.value),Array.from(oe.values())}return null}(l,u),g=function(j,J){let oe=[],te=!0;for(let E of mo(J)){let v=E.kind===0?zS(j,E.fieldPath,j.startAt):GS(j,E.fieldPath,j.startAt);oe.push(v.value),te&&(te=v.inclusive)}return new cr(oe,te)}(l,u),y=function(j,J){let oe=[],te=!0;for(let E of mo(J)){let v=E.kind===0?GS(j,E.fieldPath,j.endAt):zS(j,E.fieldPath,j.endAt);oe.push(v.value),te&&(te=v.inclusive)}return new cr(oe,te)}(l,u),b=this.In(u,l,g),A=this.In(u,l,y),x=this.Tn(u,l,p),B=this.En(u.indexId,h,b,g.inclusive,A,y.inclusive,x);return S.forEach(B,W=>r.G(W,t.limit).next(j=>{j.forEach(J=>{let oe=q.fromSegments(J.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=WB(Pe.create(e.filters,"and")).map(r=>g_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let g=t?this.dn(t[p/l]):jh,y=this.An(e,g,r[p%l],i),b=this.Rn(e,g,o[p%l],s),A=a.map(x=>this.An(e,g,x,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new wo(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new wo(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new ff(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Le(tt.comparator),h=!1;for(let p of u.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new _o;for(let i of mo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Vr.vt.It(o,s)}return r.zt()}dn(e){let t=new _o;return Vr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new _o;return Vr.vt.It(Do(this.databaseId,t),r.Yt(function(o){let s=mo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new _o);let o=0;for(let s of mo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&yc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Vr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new _o;u.seed(a.zt()),Vr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=nc(e),i=qs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let g=p?new hc(p.sequenceNumber,new Sn(xo(p.readTime),new q(rr(p.documentKey)),p.largestBatchId)):hc.empty(),y=h.fields.map(([b,A])=>new Js(tt.fromServerFormat(b),A));return new na(h.indexId,h.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=nc(e),o=qs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(sA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Hs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Hs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Hs(e),o=new Le(_i);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new wo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Le(_i),i=this.Vn(t,e);if(i==null)return r;let o=Jv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(yc(s))for(let a of s.arrayValue.values||[])r=r.add(new wo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new wo(t.indexId,e.key,jh,i));return r}bn(e,t,r,i,o){V("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,g){let y=u.getIterator(),b=l.getIterator(),A=$s(y),x=$s(b);for(;A||x;){let B=!1,W=!1;if(A&&x){let j=h(A,x);j<0?W=!0:j>0&&(B=!0)}else A!=null?W=!0:B=!0;B?(p(x),x=$s(b)):W?(g(A),A=$s(y)):(A=$s(y),x=$s(b))}}(i,o,_i,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>_i(s,a)).filter((s,a,u)=>!a||_i(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=_i(s,e),u=_i(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,jh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,jh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return _i(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Q())).next(fA)}};function hA(n){return ft(n,"collectionParents")}function Hs(n){return ft(n,"indexEntries")}function nc(n){return ft(n,"indexConfiguration")}function qs(n){return ft(n,"indexState")}function fA(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;zw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}var pA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Fx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,g)=>(a++,g.delete()));o.push(u.next(()=>{Z(a===1)}));let l=[];for(let h of t.mutations){let p=HA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function gf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q();e=n.noDocument}return JSON.stringify(e).length}Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(41943040,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);var mf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ys(e),s=wi(e);return s.add({}).next(a=>{Z(typeof a=="number");let u=new _c(a,t,r,i),l=function(y,b,A){let x=A.baseMutations.map(W=>Dc(y.ct,W)),B=A.mutations.map(W=>Dc(y.ct,W));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Le((g,y)=>ue(g.canonicalString(),y.canonicalString()));for(let g of i){let y=HA(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Xj))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return wi(e).get(t).next(r=>r?(Z(r.userId===this.userId),vo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return wi(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Z(a.batchId>=r),o=vo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return wi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wi(e).U("userMutationsIndex",t).next(r=>r.map(i=>vo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Hh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ys(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,g=rr(h);if(l===this.userId&&t.path.isEqual(g))return wi(e).get(p).next(y=>{if(!y)throw Q();Z(y.userId===this.userId),o.push(vo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Le(ue),i=[];return t.forEach(o=>{let s=Hh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ys(e).J({range:a},(l,h,p)=>{let[g,y,b]=l,A=rr(y);g===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Hh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Le(ue);return Ys(e).J({range:s},(u,l,h)=>{let[p,g,y]=u,b=rr(g);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(wi(e).get(o).next(s=>{if(s===null)throw Q();Z(s.userId===this.userId),r.push(vo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Fx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ys(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=rr(o[1]);i.push(u)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return Vx(e,this.userId,t)}Nn(e){return Lx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Vx(n,e,t){let r=Hh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ys(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,g]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function wi(n){return ft(n,"mutations")}function Ys(n){return ft(n,"documentMutations")}function Lx(n){return ft(n,"mutationQueues")}var ca=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var V_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>re.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return zs(e).J((s,a)=>{let u=sc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return zs(e).J((r,i)=>{let o=sc(i);t(o)})}qn(e){return gA(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return gA(e).put("targetGlobalKey",t)}Kn(e,t){return zs(e).put(Px(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=To(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=sc(a);kc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Ei(e);return t.forEach(s=>{let a=Ht(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ei(e);return S.forEach(t,o=>{let s=Ht(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Ei(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ei(e),o=ce();return i.J({range:r,H:!0},(s,a,u)=>{let l=rr(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Ht(t.path),i=IDBKeyRange.bound([r],[VA(r)],!1,!0),o=0;return Ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return zs(e).get(t).next(r=>r?sc(r):null)}};function zs(n){return ft(n,"targets")}function gA(n){return ft(n,"targetGlobal")}function Ei(n){return ft(n,"targetDocuments")}function mA([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var L_=class{constructor(e){this.Un=e,this.buffer=new Le(mA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();mA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},j_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fi(t)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Oi(t)}yield this.Hn(3e5)}))}},B_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(fn.oe);let r=new L_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(pA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=zn.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function KB(n,e){return new B_(n,e)}var U_=class{constructor(e,t){this.db=e,this.garbageCollector=KB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Bh(e,r)}removeReference(e,t,r){return Bh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Bh(e,t)}nr(e,t){return function(i,o){let s=!1;return Lx(i).Y(a=>Vx(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,re.min()),Ei(e).delete(function(p){return[0,Ht(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Bh(e,t)}tr(e,t){let r=Ei(e),i,o=fn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==fn.oe&&t(new q(rr(i)),o),o=l,i=u):o=fn.oe}).next(()=>{o!==fn.oe&&t(new q(rr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bh(n,e){return Ei(n).put(function(r,i){return{targetId:0,path:Ht(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var yf=class{constructor(){this.changes=new lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return go(e).put(r)}removeEntry(e,t,r){return go(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],df(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ut.newInvalidDocument(t);return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rc(t))},(i,o)=>{r={document:this.ir(t,o),size:gf(o)}}).next(()=>r)}getEntries(e,t){let r=Xt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Xt(),i=new He(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,gf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Le(_A);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(rc(i.first()),rc(i.last())),s=i.getIterator(),a=s.getNext();return go(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&_A(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(rc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return go(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Xt();for(let p of l){let g=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Fc(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Xt(),s=vA(t,r),a=vA(t,Sn.max());return go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new H_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yA(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return yA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=zB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return ut.newInvalidDocument(e)}};function jx(n){return new $_(n)}var H_=class extends yf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new lr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Le((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=iA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=gf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=iA(this.cr.serializer,s.convertToNoDocument(re.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function yA(n){return ft(n,"remoteDocumentGlobal")}function go(n){return ft(n,"remoteDocumentsV14")}function rc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vA(n,e){let t=e.documentKey.path.toArray();return[n,df(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _A(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ue(t[o],r[o]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var q_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var vf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cc(r.mutation,i,pn.empty(),We.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=ir();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=oc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Xt(),s=uc(),a=function(){return uc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof $n)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),cc(h.mutation,l,h.mutation.getFieldMask(),We.now())):s.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new q_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=uc(),i=new He((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=cx();h.forEach(g=>{if(!o.has(g)){let y=mx(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(ir()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:ux(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=oc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,g){return new Un(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ut.newInvalidDocument(h)))});let a=oc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&cc(h.mutation,l,pn.empty(),We.now()),Fc(t,l)&&(a=a.insert(u,l))}),a})}};var z_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:eE(i.bundledQuery),readTime:nt(i.readTime)}}(t)),S.resolve()}};var G_=class{constructor(){this.overlays=new He(q.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ir();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=ir(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new He((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ir(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ir(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var W_=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Tc=class{constructor(){this.Tr=new Le(st.Er),this.dr=new Le(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new st(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new st(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Ie([])),r=new st(t,e),i=new st(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Ie([])),r=new st(t,e),i=new st(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new st(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||ue(e.wr,t.wr)}static Ar(e,t){return ue(e.wr,t.wr)||q.comparator(e.key,t.key)}};var K_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Le(st.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _c(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Le(ue);return t.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new st(new q(o),0),a=new Le(ue);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new st(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new st(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Q_=class{constructor(e){this.Mr=e,this.docs=function(){return new He(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xt(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||zw(jA(h),r)<=0||(i.has(h.key)||Fc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Y_(this)}getSize(e){return S.resolve(this.size)}},Y_=class extends yf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Z_=class{constructor(e){this.persistence=e,this.Nr=new lr(t=>To(t),kc),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tc,this.targetCount=0,this.kr=ca.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var _f=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fn(0),this.Kr=!1,this.Kr=!0,this.$r=new W_,this.referenceDelegate=e(this),this.Ur=new Z_(this),this.indexManager=new O_,this.remoteDocumentCache=function(i){return new Q_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lf(t),this.Gr=new z_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new K_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new J_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},J_=class extends Zh{constructor(e){super(),this.currentSequenceNumber=e}},wf=class n{constructor(e){this.persistence=e,this.Jr=new Tc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var X_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Jh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OS,{unique:!0}),u.createObjectStore("documentMutations")}(e),wA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),wA(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OS,{unique:!0});let p=l.store("mutations"),g=h.map(y=>p.put(y));return S.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:dB});l.createIndex("collectionPathOverlayIndex",hB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",fB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:eB});l.createIndex("documentKeyIndex",tB),l.createIndex("collectionGroupIndex",nB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:aB}).createIndex("sequenceNumberIndex",uB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:cB}).createIndex("documentKeyIndex",lB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=gf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Z(u.userId===o.userId);let l=vo(this.serializer,u);return Fx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ie(s),l=function(p){return[0,Ht(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Ht(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:sB});let r=t.store("collectionParents"),i=new bc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Ht(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ie(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=rr(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=sc(i),s=Px(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new q(Ie.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):Q()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=jx(this.serializer),o=new _f(wf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ce();vo(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new at(l),p=hf.lt(this.serializer,h),g=o.getIndexManager(h),y=mf.lt(h,this.serializer,g,o.referenceDelegate);return new vf(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new pc(t,fn.oe),u).next()})})}};function wA(n){n.createObjectStore("targetDocuments",{keyPath:iB}).createIndex("documentTargetsIndex",oB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rB,{unique:!0}),n.createObjectStore("targetGlobal")}var Uv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ew=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new F(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new U_(this,i),this.Ai=t+"main",this.serializer=new lf(u),this.Ri=new Ti(this.Ai,this.hi,new X_(this.serializer)),this.$r=new A_,this.Ur=new V_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jx(this.serializer),this.Gr=new S_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,Uv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Fi(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ic(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Uh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ft(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,Uv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new pc(e,fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Uh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return mf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?mB:u===16?gB:u===15?Ww:u===14?GA:u===13?zA:u===12?pB:u===11?qA:void Q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new pc(a,this.Qr?this.Qr.next():fn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(R.FAILED_PRECONDITION,BA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return ic(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new F(R.FAILED_PRECONDITION,Uv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put("owner",t)}static D(){return Ti.D()}bi(e){let t=ic(e);return t.get("owner").next(r=>this.vi(r)?(V("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Hp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ic(n){return ft(n,"owner")}function Uh(n){return ft(n,"clientMetadata")}function nE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var tw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var nw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ef=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Hp()?8:UA(Za())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Gs()<=zn.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Gs()<=zn.DEBUG&&V("QueryEngine","Query:",Ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=zn.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(t))):S.resolve())}Yi(e,t){if(WS(t))return S.resolve(null);let r=qt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sf(t,null,"F"),r=qt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,sf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return WS(t)||i.isEqual(re.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Gs()<=zn.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(t)),this.rs(e,s,t,LA(i,-1)).next(a=>a))})}ts(e,t){let r=new Le(sx(e));return t.forEach((i,o)=>{Fc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Gs()<=zn.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,Sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var rw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new He(ue),this._s=new lr(o=>To(o),kc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Bx(n,e,t,r){return new rw(n,e,t,r)}function Ux(n,e){return N(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function QB(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=S.resolve();return g.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let x=l.docVersions.get(b);Z(x!==null),A.version.compareTo(x)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $x(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function YB(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,x,B){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(g,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Xt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Hx(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function Hx(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Xt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function ZB(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function la(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function da(n,e,t){return N(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Fi(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function If(n,e,t){let r=H(n),i=re.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=H(u),g=p._s.get(h);return g!==void 0?S.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,s,qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:re.min(),t?o:ce())).next(a=>(Gx(r,ox(e),a),{documents:a,Ts:o})))}function qx(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function zx(n,e){let t=H(n),r=t.us.get(e)||re.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,LA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Gx(t,e,i),i))}function Gx(n,e,t){let r=n.us.get(e)||re.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function JB(n,e,t,r){return N(this,null,function*(){let i=H(n),o=ce(),s=Xt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield la(i,function(h){return qt(_a(Ie.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Hx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function XB(r,i){return N(this,arguments,function*(n,e,t=ce()){let o=yield la(n,qt(eE(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=nt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(rt.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function EA(n,e){return`firestore_clients_${n}_${e}`}function IA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $v(n,e){return`firestore_targets_${n}_${e}`}var Cf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new F(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(et("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},lc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new F(r.error.code,r.error.message))),o?new n(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Df=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Zw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=$A(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},iw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}},Sc=class{constructor(){this.activeTargetIds=Zw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},dc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new He(ue),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=EA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Sc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(EA(this.persistenceKey,r));if(i){let o=Df.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem($v(this.persistenceKey,e));if(i){let o=lc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($v(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return V("SharedClientState","READ",e,t),t}setItem(e,t){V("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(V("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=fn.oe;if(o!=null)try{let a=JSON.parse(o);Z(typeof a=="number"),s=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Cf(this.currentUser,e,t,r),o=IA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=IA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=$v(this.persistenceKey,e),o=new lc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Df.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Cf.Rs(new at(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return lc.Rs(i,t)}Ls(e){return iw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Zw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},bf=class{constructor(){this.so=new Sc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ow=class{_o(e){}shutdown(){}};var Tf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $h=null;function Hv(){return $h===null?$h=function(){return 268435456+Math.round(2147483648*Math.random())}():$h++,"0x"+$h.toString(16)}var eU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pt="WebChannelConnection",aw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Hv(),u=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(V("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Bn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=eU[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Hv();return new Promise((s,a)=>{let u=new Ov;u.setWithCredentials(!0),u.listenOnce(Fv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ec.NO_ERROR:let h=u.getResponseJson();V(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ec.TIMEOUT:V(Pt,`RPC '${e}' ${o} timed out`),a(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:let p=u.getStatus();if(V(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let b=function(x){let B=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(B)>=0?B:R.UNKNOWN}(y.status);a(new F(b,y.message))}else a(new F(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{V(Pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);V(Pt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Hv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jv(),a=Lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Pt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),g=!1,y=!1,b=new sw({Io:x=>{y?V(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(V(Pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(Pt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),A=(x,B,W)=>{x.listen(B,j=>{try{W(j)}catch(J){setTimeout(()=>{throw J},0)}})};return A(p,Us.EventType.OPEN,()=>{y||(V(Pt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,Us.EventType.CLOSE,()=>{y||(y=!0,V(Pt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,Us.EventType.ERROR,x=>{y||(y=!0,Bn(Pt,`RPC '${e}' stream ${i} transport errored:`,x),b.So(new F(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Us.EventType.MESSAGE,x=>{var B;if(!y){let W=x.data[0];Z(!!W);let j=W,J=j.error||((B=j[0])===null||B===void 0?void 0:B.error);if(J){V(Pt,`RPC '${e}' stream ${i} received error:`,J);let oe=J.status,te=function(w){let I=ot[w];if(I!==void 0)return _x(I)}(oe),E=J.message;te===void 0&&(te=R.INTERNAL,E="Unknown error status: "+oe+" with message "+J.message),y=!0,b.So(new F(te,E)),p.close()}else V(Pt,`RPC '${e}' stream ${i} received:`,W),b.bo(W)}}),A(a,Vv.STAT_EVENT,x=>{x.stat===Lh.PROXY?V(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Lh.NOPROXY&&V(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Wx(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}function Vc(n){return new I_(n,!0)}var Ac=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Sf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ac(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(et(t.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uw=class extends Sf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=LB(this.serializer,e),r=function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?nt(s.readTime):re.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=b_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=rf(u)?{documents:Sx(o,u)}:{query:Ax(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Ex(o,s.resumeToken);let l=C_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){a.readTime=aa(o,s.snapshotVersion.toTimestamp());let l=C_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=BB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=b_(this.serializer),t.removeTarget=e,this.a_(t)}},cw=class extends Sf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=jB(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=b_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Dc(this.serializer,r))};this.a_(t)}};var lw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,D_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,D_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},dw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(et(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var hw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Vi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=H(u);l.L_.add(4),yield wa(l),l.q_.set("Unknown"),l.L_.delete(4),yield Lc(l)})}(this))}))}),this.q_=new dw(r,i)}};function Lc(n){return N(this,null,function*(){if(Vi(n))for(let e of n.B_)yield e(!0)})}function wa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Kf(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),oE(t)?iE(t):Ia(t).r_()&&rE(t,e))}function ha(n,e){let t=H(n),r=Ia(t);t.N_.delete(e),r.r_()&&Kx(t,e),t.N_.size===0&&(r.r_()?r.o_():Vi(t)&&t.q_.set("Unknown"))}function rE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).A_(e)}function Kx(n,e){n.Q_.xe(e),Ia(n).R_(e)}function iE(n){n.Q_=new E_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.q_.v_()}function oE(n){return Vi(n)&&!Ia(n).n_()&&n.N_.size>0}function Vi(n){return H(n).L_.size===0}function Qx(n){n.Q_=void 0}function tU(n){return N(this,null,function*(){n.q_.set("Online")})}function nU(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{rE(n,e)})})}function rU(n,e){return N(this,null,function*(){Qx(n),oE(n)?(n.q_.M_(e),iE(n)):n.q_.set("Unknown")})}function iU(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof uf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Af(n,r)}else if(e instanceof ea?n.Q_.Ke(e):e instanceof af?n.Q_.He(e):n.Q_.We(e),!t.isEqual(re.min()))try{let r=yield $x(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),Kx(o,u);let p=new ua(h.target,u,l,h.sequenceNumber);rE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Af(n,r)}})}function Af(n,e,t){return N(this,null,function*(){if(!Fi(e))throw e;n.L_.add(1),yield wa(n),n.q_.set("Offline"),t||(t=()=>$x(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Lc(n)}))})}function Yx(n,e){return e().catch(t=>Af(n,t,e))}function Ea(n){return N(this,null,function*(){let e=H(n),t=ki(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oU(e);)try{let i=yield ZB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,sU(e,i)}catch(i){yield Af(e,i)}Zx(e)&&Jx(e)})}function oU(n){return Vi(n)&&n.O_.length<10}function sU(n,e){n.O_.push(e);let t=ki(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Zx(n){return Vi(n)&&!ki(n).n_()&&n.O_.length>0}function Jx(n){ki(n).start()}function aU(n){return N(this,null,function*(){ki(n).p_()})}function uU(n){return N(this,null,function*(){let e=ki(n);for(let t of n.O_)e.m_(t.mutations)})}function cU(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=v_.from(r,e,t);yield Yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ea(n)})}function lU(n,e){return N(this,null,function*(){e&&ki(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return vx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();ki(r).s_(),yield Yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ea(r)}})}(n,e)),Zx(n)&&Jx(n)})}function CA(n,e){return N(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Vi(t);t.L_.add(3),yield wa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Lc(t)})}function fw(n,e){return N(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield Lc(t)):e||(t.L_.add(2),yield wa(t),t.q_.set("Unknown"))})}function Ia(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new uw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:tU.bind(null,n),Ro:nU.bind(null,n),mo:rU.bind(null,n),d_:iU.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),oE(n)?iE(n):n.q_.set("Unknown")):(yield n.K_.stop(),Qx(n))}))),n.K_}function ki(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new cw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aU.bind(null,n),mo:lU.bind(null,n),f_:uU.bind(null,n),g_:cU.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ea(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var pw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ca(n,e){if(et("AsyncQueue",`${e}: ${n}`),Fi(n))return new F(R.UNAVAILABLE,`${e}: ${n}`);throw n}var xf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Mf=class{constructor(){this.W_=new He(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,xf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var gw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},mw=class{constructor(){this.queries=DA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=DA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function DA(){return new lr(n=>ix(n),Oc)}function sE(n,e){return N(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new gw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ca(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&uE(t)})}function aE(n,e){return N(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function dU(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&uE(t)}function hU(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function uE(n){n.Y_.forEach(e=>{e.next()})}var yw,bA;(bA=yw||(yw={})).ea="default",bA.Cache="cache";var xc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yw.Cache}};var vw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Rf=class{constructor(e){this.serializer=e}Es(e){return sr(this.serializer,e)}ds(e){return e.metadata.exists?Tx(this.serializer,e.document,!1):ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nt(e)}},_w=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ie.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Rf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield JB(this.localStore,new Rf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield XB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Xx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Nf=class{constructor(e){this.key=e}},Pf=class{constructor(e){this.key=e}},kf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=sx(e),this.Ra=new xf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Mf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Fc(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),x=!0):this.ga(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new fa(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Pf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Nf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ww=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ew=class{constructor(e){this.key=e,this.va=!1}},Iw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new lr(a=>ix(a),Oc),this.Ma=new Map,this.xa=new Set,this.Oa=new He(q.comparator),this.Na=new Map,this.La=new Tc,this.Ba={},this.ka=new Map,this.qa=ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function fU(n,e,t=!0){return N(this,null,function*(){let r=Qf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield eM(r,e,t,!0),i})}function pU(n,e){return N(this,null,function*(){let t=Qf(n);yield eM(t,e,!0,!1)})}function eM(n,e,t,r){return N(this,null,function*(){let i=yield la(n.localStore,qt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield cE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kf(n.remoteStore,i),a})}function cE(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,g,y)=>function(A,x,B,W){return N(this,null,function*(){let j=x.view.ma(B);j.ns&&(j=yield If(A.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,j)));let J=W&&W.targetChanges.get(x.targetId),oe=W&&W.targetMismatches.get(x.targetId)!=null,te=x.view.applyChanges(j,A.isPrimaryClient,J,oe);return Cw(A,x.targetId,te.wa),te.snapshot})}(n,p,g,y);let o=yield If(n.localStore,e,!0),s=new kf(e,o.Ts),a=s.ma(o.documents),u=Ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Cw(n,t,l.wa);let h=new ww(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function gU(n,e,t){return N(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Oc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield da(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ha(r.remoteStore,i.targetId),pa(r,i.targetId)}).catch(Oi))):(pa(r,i.targetId),yield da(r.localStore,i.targetId,!0))})}function mU(n,e){return N(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ha(t.remoteStore,r.targetId))})}function yU(n,e,t){return N(this,null,function*(){let r=fE(n);try{let i=yield function(s,a){let u=H(s),l=We.now(),h=a.reduce((y,b)=>y.add(b.key),ce()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Xt(),A=ce();return u.cs.getEntries(y,h).next(x=>{b=x,b.forEach((B,W)=>{W.isValidDocument()||(A=A.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(x=>{p=x;let B=[];for(let W of a){let j=RB(W,p.get(W.key).overlayedDocument);j!=null&&B.push(new $n(W.key,j,ZA(j.value.mapValue),Xe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,B,a)}).next(x=>{g=x;let B=x.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,x.batchId,B)})}).then(()=>({batchId:g.batchId,changes:ux(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new He(ue)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield qr(r,i.changes),yield Ea(r.remoteStore)}catch(i){let o=Ca(i,"Failed to persist write");t.reject(o)}})}function tM(n,e){return N(this,null,function*(){let t=H(n);try{let r=yield YB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Z(s.va):i.removedDocuments.size>0&&(Z(s.va),s.va=!1))}),yield qr(t,r,e)}catch(r){yield Oi(r)}})}function TA(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=H(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&uE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vU(n,e,t){return N(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new He(q.comparator);s=s.insert(o,ut.newNoDocument(o,re.min()));let a=ce().add(o),u=new Ec(re.min(),new Map,new He(ue),s,a);yield tM(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),hE(r)}else yield da(r.localStore,e,!1).then(()=>pa(r,e,t)).catch(Oi)})}function _U(n,e){return N(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield QB(t.localStore,e);dE(t,r,null),lE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qr(t,i)}catch(i){yield Oi(i)}})}function wU(n,e,t){return N(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let u=H(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Z(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);dE(r,e,t),lE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qr(r,i)}catch(i){yield Oi(i)}})}function EU(n,e){return N(this,null,function*(){let t=H(n);Vi(t.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ca(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function lE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function dE(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||nM(n,r)})}function nM(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ha(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),hE(n))}function Cw(n,e,t){for(let r of t)r instanceof Nf?(n.La.addReference(r.key,e),IU(n,r)):r instanceof Pf?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||nM(n,r.key)):Q()}function IU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),hE(n))}function hE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Ie.fromString(e)),r=n.qa.next();n.Na.set(r,new Ew(t)),n.Oa=n.Oa.insert(t,r),Kf(n.remoteStore,new ua(qt(_a(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}function qr(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=tw.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=H(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,g=>S.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>S.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Fi(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(g,A)}}})}(r.localStore,o))})}function CU(n,e){return N(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield Ux(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qr(t,r.hs)}})}function DU(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function bU(n,e){return N(this,null,function*(){let t=H(n),r=yield If(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Cw(t,e.targetId,i.wa),i})}function TU(n,e){return N(this,null,function*(){let t=H(n);return zx(t.localStore,e).then(r=>qr(t,r))})}function SU(n,e,t,r){return N(this,null,function*(){let i=H(n),o=yield function(a,u){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(g=>g?l.localDocuments.getDocuments(p,g):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(dE(i,e,r||null),lE(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):Q(),yield qr(i,o)):V("SyncEngine","Cannot apply mutation batch with id: "+e)})}function AU(n,e){return N(this,null,function*(){let t=H(n);if(Qf(t),fE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield SA(t,r.toArray());t.Qa=!0,yield fw(t.remoteStore,!0);for(let o of i)Kf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(pa(t,s),da(t.localStore,s,!0))),ha(t.remoteStore,s)}),yield i,yield SA(t,r),function(s){let a=H(s);a.Na.forEach((u,l)=>{ha(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new He(q.comparator)}(t),t.Qa=!1,yield fw(t.remoteStore,!1)}})}function SA(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield la(r.localStore,qt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield bU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield qx(r.localStore,s);a=yield la(r.localStore,l),yield cE(r,rM(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function rM(n){return rx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function xU(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function MU(n,e,t,r){return N(this,null,function*(){let i=H(n);if(i.Qa)return void V("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield zx(i.localStore,ox(o[0])),a=Ec.createSynthesizedRemoteEventForCurrentChange(e,t==="current",rt.EMPTY_BYTE_STRING);yield qr(i,s,a);break}case"rejected":yield da(i.localStore,e,!0),pa(i,e,r);break;default:Q()}})}function RU(n,e,t){return N(this,null,function*(){let r=Qf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){V("SyncEngine","Adding an already active target "+i);continue}let o=yield qx(r.localStore,i),s=yield la(r.localStore,o);yield cE(r,rM(o),s.targetId,!1,s.resumeToken),Kf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield da(r.localStore,i,!1).then(()=>{ha(r.remoteStore,i),pa(r,i)}).catch(Oi))}})}function Qf(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vU.bind(null,e),e.Ca.d_=dU.bind(null,e.eventManager),e.Ca.$a=hU.bind(null,e.eventManager),e}function fE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wU.bind(null,e),e}function NU(n,e,t){let r=H(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=H(y),x=nt(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",B=>A.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(x)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(Xx(u));let l=new _w(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield s.Ua()}let p=yield l.complete();return yield qr(o,p.Ia,void 0),yield function(y,b){let A=H(y);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Bn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Dw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Bx(this.persistence,new Ef,t.initialUser,this.serializer)}Ga(t){return new _f(wf.Zr,this.serializer)}Wa(t){return new bf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Of=class n extends Dw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Up(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield fE(this.Ja.syncEngine),yield Ea(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Bx(this.persistence,new Ef,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new j_(r,e.asyncQueue,t)}Ha(e,t){let r=new n_(t,this.persistence);return new t_(e.asyncQueue,r)}Ga(e){let t=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new ew(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Wx(),Wh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bf}},bw=class n extends Of{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Up(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof dc&&(this.sharedClientState.syncEngine={no:SU.bind(null,t),ro:MU.bind(null,t),io:RU.bind(null,t),Qi:xU.bind(null,t),eo:TU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield AU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Wx();if(!dc.D(t))throw new F(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},pE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CU.bind(null,this.syncEngine),yield fw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mw}()}createDatastore(t){let r=Vc(t.databaseInfo.databaseId),i=function(s){return new aw(s)}(t.databaseInfo);return function(s,a,u,l){return new lw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new hw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>TA(this.syncEngine,r,0),function(){return Tf.D()?new Tf:new ow}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new Iw(o,s,a,u,l,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=H(o);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function AA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Tw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ht,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new vw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Sw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=H(i),a={documents:o.map(p=>Cc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ie.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=VB(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());Z(!!g),h.push(g)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new vc(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=H(r),s={writes:i.map(a=>Dc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q();t=re.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new F(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(re.min())?Xe.exists(!1):Xe.updateTime(t):Xe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(re.min()))throw new F(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xe.updateTime(t)}return Xe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Aw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Ac(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new Sw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Pc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!vx(t)}return!1}};var xw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=Qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ca(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Ux(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function xA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield gE(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>CA(e.remoteStore,i)),n._onlineComponents=e})}function gE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Bn("Error using user provided cache. Falling back to memory cache: "+t),yield qv(n,new Dw)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield qv(n,new Dw);return n._offlineComponents})}function Yf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield xA(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield xA(n,new pE))),n._onlineComponents})}function iM(n){return gE(n).then(e=>e.persistence)}function mE(n){return gE(n).then(e=>e.localStore)}function oM(n){return Yf(n).then(e=>e.remoteStore)}function yE(n){return Yf(n).then(e=>e.syncEngine)}function PU(n){return Yf(n).then(e=>e.datastore)}function ma(n){return N(this,null,function*(){let e=yield Yf(n),t=e.eventManager;return t.onListen=fU.bind(null,e.syncEngine),t.onUnlisten=gU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mU.bind(null,e.syncEngine),t})}function kU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield iM(n),t=yield oM(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),Lc(o)}(t)}))}function OU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield iM(n),t=yield oM(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=H(i);o.L_.add(0),yield wa(o),o.q_.set("Offline")})}(t)}))}function FU(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ca(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield mE(n),e,t)})),t.promise}function sM(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:g=>{h.Za(),s.enqueueAndForget(()=>aE(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new F(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new xc(_a(a.path),h,{includeMetadataChanges:!0,_a:!0});return sE(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function VU(n,e){let t=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield If(i,o,!0),u=new kf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ca(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield mE(n),e,t)})),t.promise}function aM(n,e,t={}){let r=new ht;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:g=>{h.Za(),s.enqueueAndForget(()=>aE(o,p)),g.fromCache&&u.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new xc(a,h,{includeMetadataChanges:!0,_a:!0});return sE(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function LU(n,e){let t=new ga(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield ma(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield ma(n),t)}))}}function jU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?wx().encode(s):s,function(h,p){return new Tw(h,p)}(function(h,p){if(h instanceof Uint8Array)return AA(h,p);if(h instanceof ArrayBuffer)return AA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Vc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){NU(yield yE(n),i,r)}))}function BU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield mE(n),e)}))}function uM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MA=new Map;function vE(n,e,t){if(!t)throw new F(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _E(n,e,t,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RA(n){if(!q.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NA(n){if(q.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Zf(n);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cM(n,e){if(e<=0)throw new F(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ff=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_E("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ff({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ff(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zv;switch(r.type){case"firstParty":return new Qv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MA.get(t);r&&(V("ComponentProvider","Removing Datastore"),MA.delete(t),r.terminate())}(this),Promise.resolve()}};function lM(n,e,t,r={}){var i;let o=(n=Te(n,Mo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=at.MOCK_USER;else{a=XI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(l)}n._authCredentials=new Gv(new Kh(a,u))}}var Ct=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ar=class n extends Ct{constructor(e,t,r){super(e,t,_a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function wE(n,e,...t){if(n=Ge(n),vE("collection","path",e),n instanceof Mo){let r=Ie.fromString(e,...t);return NA(r),new ar(n,null,r)}{if(!(n instanceof je||n instanceof ar))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return NA(r),new ar(n.firestore,null,r)}}function dM(n,e){if(n=Te(n,Mo),vE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ct(n,null,function(r){return new Un(Ie.emptyPath(),r)}(e))}function jc(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=Qh.newId()),vE("doc","path",e),n instanceof Mo){let r=Ie.fromString(e,...t);return RA(r),new je(n,null,new q(r))}{if(!(n instanceof je||n instanceof ar))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return RA(r),new je(n.firestore,n instanceof ar?n.converter:null,new q(r))}}function EE(n,e){return n=Ge(n),e=Ge(e),(n instanceof je||n instanceof ar)&&(e instanceof je||e instanceof ar)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IE(n,e){return n=Ge(n),e=Ge(e),n instanceof Ct&&e instanceof Ct&&n.firestore===e.firestore&&Oc(n._query,e._query)&&n.converter===e.converter}var Vf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ac(this,"async_queue_retry"),this.Vu=()=>{let r=Wh();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Wh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Wh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ht;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fi(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=pw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Mw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Rw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var hM=-1,Ke=class extends Mo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vf(e),this._firestoreClient=void 0,yield e}})}};function Dt(n){if(n._terminated)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fM(n),n._firestoreClient}function fM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new r_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,uM(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function pM(n,e){Bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return mM(n,pE.provider,{build:r=>new Of(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function gM(n){return N(this,null,function*(){Bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();mM(n,pE.provider,{build:t=>new bw(t,e.cacheSizeBytes)})})}function mM(n,e,t){if((n=Te(n,Ke))._firestoreClient||n._terminated)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},fM(n)}function yM(n){if(n._initialized&&!n._terminated)throw new F(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ht;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Ti.D())return Promise.resolve();let i=r+"main";yield Ti.delete(i)})}(nE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function vM(n){return function(t){let r=new ht;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return EU(yield yE(t),r)})),r.promise}(Dt(n=Te(n,Ke)))}function _M(n){return kU(Dt(n=Te(n,Ke)))}function wM(n){return OU(Dt(n=Te(n,Ke)))}function EM(n,e){let t=Dt(n=Te(n,Ke)),r=new Rw;return jU(t,n._databaseId,e,r),r}function IM(n,e){return BU(Dt(n=Te(n,Ke)),e).then(t=>t?new Ct(n,null,t.query):null)}var dr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Hn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $r=class{constructor(e){this._methodName=e}};var Ro=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Mc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var UU=/^__.*__$/,Nw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $n(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ni(e,this.data,t,this.fieldTransforms)}},Lf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $n(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var jf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CM(this.Cu)&&UU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Pw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vc(e)}Qu(e,t,r,i=!1){return new jf({Cu:e,methodName:t,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oo(n){let e=n._freezeSettings(),t=Vc(n._databaseId);return new Pw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);bE("Data must be an object, but it was:",s,r);let a=TM(r,s),u,l;if(o.merge)u=new pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Lw(e,p,t);if(!s.contains(g))throw new F(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AM(h,g)||h.push(g)}u=new pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Nw(new kt(a),u,l)}var Rc=class n extends $r{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function DM(n,e,t){return new jf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var kw=class n extends $r{_toFieldTransform(e){return new So(e.path,new Mi)}isEqual(e){return e instanceof n}},Ow=class n extends $r{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=DM(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new Br(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&qp(this.Ku,e.Ku)}},Fw=class n extends $r{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=DM(this,e,!0),r=this.Ku.map(o=>Fo(o,t)),i=new Ur(r);return new So(e.path,i)}isEqual(e){return e instanceof n&&qp(this.Ku,e.Ku)}},Vw=class n extends $r{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ri(e.serializer,dx(e.serializer,this.$u));return new So(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function CE(n,e,t,r){let i=n.Qu(1,e,t);bE("Data must be an object, but it was:",i,r);let o=[],s=kt.empty();ko(r,(u,l)=>{let h=TE(e,u,t);l=Ge(l);let p=i.Nu(h);if(l instanceof Rc)o.push(h);else{let g=Fo(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new pn(o);return new Lf(s,a,i.fieldTransforms)}function DE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Lw(e,r,t)],u=[i];if(o.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Lw(e,o[g])),u.push(o[g+1]);let l=[],h=kt.empty();for(let g=a.length-1;g>=0;--g)if(!AM(l,a[g])){let y=a[g],b=u[g];b=Ge(b);let A=s.Nu(y);if(b instanceof Rc)l.push(y);else{let x=Fo(b,A);x!=null&&(l.push(y),h.set(y,x))}}let p=new pn(l);return new Lf(h,p,s.fieldTransforms)}function bM(n,e,t,r=!1){return Fo(t,n.Qu(r?4:3,e))}function Fo(n,e){if(SM(n=Ge(n)))return bE("Unsupported field value:",e,n),TM(n,e);if(n instanceof $r)return function(r,i){if(!CM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Fo(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=We.fromDate(r);return{timestampValue:aa(i.serializer,o)}}if(r instanceof We){let o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aa(i.serializer,o)}}if(r instanceof Ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:Ex(i.serializer,r._byteString)};if(r instanceof je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Jw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zf(r)}`)}(n,e)}function TM(n,e){let t={};return WA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{let o=Fo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function SM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof Ro||n instanceof dr||n instanceof je||n instanceof $r||n instanceof Mc)}function bE(n,e,t){if(!SM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Zf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Lw(n,e,t){if((e=Ge(e))instanceof Hn)return e._internalPath;if(typeof e=="string")return TE(n,e);throw Bf("Field path arguments must be of type string or ",n,!1,void 0,t)}var $U=new RegExp("[~\\*/\\[\\]]");function TE(n,e,t){if(e.search($U)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hn(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(R.INVALID_ARGUMENT,a+n+u)}function AM(n,e){return n.some(t=>t.isEqual(e))}var No=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jw=class extends No{data(){return super.data()}};function Xf(n,e){return typeof e=="string"?TE(n,e):e instanceof Hn?e._internalPath:e._delegate._internalPath}function xM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nc=class{},Po=class extends Nc{};function zr(n,e,...t){let r=[];e instanceof Nc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Bw).length,a=o.filter(u=>u instanceof Uf).length;if(s>1||s>0&&a>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Uf=class n extends Po{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return jM(e._query,t),new Ct(e.firestore,e.converter,m_(e._query,t))}_parse(e){let t=Oo(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kA(p,h);let y=[];for(let b of p)y.push(PA(u,o,b));g={arrayValue:{values:y}}}else g=PA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kA(p,h),g=bM(a,s,p,h==="in"||h==="not-in");return ve.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function MM(n,e,t){let r=e,i=Xf("where",n);return Uf._create(i,r,t)}var Bw=class n extends Nc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Pe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)jM(s,u),s=m_(s,u)}(e._query,t),new Ct(e.firestore,e.converter,m_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Uw=class n extends Po{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(o,s)}(e._query,this._field,this._direction);return new Ct(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Un(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function RM(n,e="asc"){let t=e,r=Xf("orderBy",n);return Uw._create(r,t)}var $f=class n extends Po{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ct(e.firestore,e.converter,sf(e._query,this._limit,this._limitType))}};function NM(n){return cM("limit",n),$f._create("limit",n,"F")}function PM(n){return cM("limitToLast",n),$f._create("limitToLast",n,"L")}var Hf=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=LM(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,o){return new Un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function kM(...n){return Hf._create("startAt",n,!0)}function OM(...n){return Hf._create("startAfter",n,!1)}var qf=class n extends Po{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=LM(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,o){return new Un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function FM(...n){return qf._create("endBefore",n,!1)}function VM(...n){return qf._create("endAt",n,!0)}function LM(n,e,t,r){if(t[0]=Ge(t[0]),t[0]instanceof No)return function(o,s,a,u,l){if(!u)throw new F(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Xs(o))if(p.field.isKeyField())h.push(Do(s,u.key));else{let g=u.data.field(p.field);if(Gf(g))throw new F(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new F(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new cr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Oo(n.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new F(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(g[b].field.isKeyField()){if(typeof A!="string")throw new F(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Yw(s)&&A.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let x=s.path.child(Ie.fromString(A));if(!q.isDocumentKey(x))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let B=new q(x);y.push(Do(a,B))}else{let x=bM(u,l,A);y.push(x)}}return new cr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function PA(n,e,t){if(typeof(t=Ge(t))=="string"){if(t==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yw(e)&&t.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ie.fromString(t));if(!q.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Do(n,new q(r))}if(t instanceof je)return Do(n,t._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(t)}.`)}function kA(n,e){if(!Array.isArray(n)||n.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ya=class{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ze(s.doubleValue));return new Mc(o)}convertGeoPoint(e){return new Ro(ze(e.latitude),ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){let t=jr(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);Z(Nx(r));let i=new Ai(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||et(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ep(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $w=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};var Lr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},An=class extends No{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Xf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Di=class extends An{data(e={}){return super.data(e)}},qn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Lr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Di(this._firestore,this._userDataWriter,r.key,r,new Lr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Di(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:HU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function HU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function SE(n,e){return n instanceof An&&e instanceof An?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qn&&e instanceof qn&&n._firestore===e._firestore&&IE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function BM(n){n=Te(n,je);let e=Te(n.firestore,Ke);return sM(Dt(e),n._key).then(t=>RE(e,n,t))}var Hr=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};function UM(n){n=Te(n,je);let e=Te(n.firestore,Ke),t=Dt(e),r=new Hr(e);return FU(t,n._key).then(i=>new An(e,r,n._key,i,new Lr(i!==null&&i.hasLocalMutations,!0),n.converter))}function $M(n){n=Te(n,je);let e=Te(n.firestore,Ke);return sM(Dt(e),n._key,{source:"server"}).then(t=>RE(e,n,t))}function HM(n){n=Te(n,Ct);let e=Te(n.firestore,Ke),t=Dt(e),r=new Hr(e);return xM(n._query),aM(t,n._query).then(i=>new qn(e,r,n,i))}function qM(n){n=Te(n,Ct);let e=Te(n.firestore,Ke),t=Dt(e),r=new Hr(e);return VU(t,n._query).then(i=>new qn(e,r,n,i))}function zM(n){n=Te(n,Ct);let e=Te(n.firestore,Ke),t=Dt(e),r=new Hr(e);return aM(t,n._query,{source:"server"}).then(i=>new qn(e,r,n,i))}function AE(n,e,t){n=Te(n,je);let r=Te(n.firestore,Ke),i=ep(n.converter,e,t);return Da(r,[Jf(Oo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Xe.none())])}function xE(n,e,t,...r){n=Te(n,je);let i=Te(n.firestore,Ke),o=Oo(i),s;return s=typeof(e=Ge(e))=="string"||e instanceof Hn?DE(o,"updateDoc",n._key,e,t,r):CE(o,"updateDoc",n._key,e),Da(i,[s.toMutation(n._key,Xe.exists(!0))])}function GM(n){return Da(Te(n.firestore,Ke),[new Pi(n._key,Xe.none())])}function WM(n,e){let t=Te(n.firestore,Ke),r=jc(n),i=ep(n.converter,e);return Da(t,[Jf(Oo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Xe.exists(!1))]).then(()=>r)}function ME(n,...e){var t,r,i;n=Ge(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Mw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Mw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof je)l=Te(n.firestore,Ke),h=_a(n._key.path),u={next:p=>{e[s]&&e[s](RE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Te(n,Ct);l=Te(p.firestore,Ke),h=p._query;let g=new Hr(l);u={next:y=>{e[s]&&e[s](new qn(l,g,p,y))},error:e[s+1],complete:e[s+2]},xM(n._query)}return function(g,y,b,A){let x=new ga(A),B=new xc(y,x,b);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return sE(yield ma(g),B)})),()=>{x.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return aE(yield ma(g),B)}))}}(Dt(l),h,a,u)}function KM(n,e){return LU(Dt(n=Te(n,Ke)),Mw(e)?e:{next:e})}function Da(n,e){return function(r,i){let o=new ht;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return yU(yield yE(r),i,o)})),o.promise}(Dt(n),e)}function RE(n,e,t){let r=t.docs.get(e._key),i=new Hr(n);return new An(n,i,e._key,r,new Lr(t.hasPendingWrites,t.fromCache),e.converter)}var qU={maxAttempts:5};var zf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,t,r){this._verifyNotCommitted();let i=Ii(e,this._firestore),o=ep(i.converter,t,r),s=Jf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Xe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ii(e,this._firestore),s;return s=typeof(t=Ge(t))=="string"||t instanceof Hn?DE(this._dataReader,"WriteBatch.update",o._key,t,r,i):CE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Xe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ii(e,this._firestore);return this._mutations=this._mutations.concat(new Pi(t._key,Xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ii(n,e){if((n=Ge(n)).firestore!==e)throw new F(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Hw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Oo(t)}get(t){let r=Ii(t,this._firestore),i=new $w(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Q();let s=o[0];if(s.isFoundDocument())return new No(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new No(this._firestore,i,r._key,null,r.converter);throw Q()})}set(t,r,i){let o=Ii(t,this._firestore),s=ep(o.converter,r,i),a=Jf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Ii(t,this._firestore),a;return a=typeof(r=Ge(r))=="string"||r instanceof Hn?DE(this._dataReader,"Transaction.update",s._key,r,i,o):CE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Ii(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ii(e,this._firestore),r=new Hr(this._firestore);return super.get(e).then(i=>new An(this._firestore,r,t._key,i._document,new Lr(!1,!1),t.converter))}};function QM(n,e,t){n=Te(n,Ke);let r=Object.assign(Object.assign({},qU),t);return function(o){if(o.maxAttempts<1)throw new F(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new ht;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield PU(o);new Aw(o.asyncQueue,l,a,s,u).au()})),u.promise}(Dt(n),i=>e(new Hw(n,i)),r)}function YM(){return new Rc("deleteField")}function ZM(){return new kw("serverTimestamp")}function JM(...n){return new Ow("arrayUnion",n)}function XM(...n){return new Fw("arrayRemove",n)}function eR(n){return new Vw("increment",n)}(function(e,t=!0){(function(i){va=i})(n0),Ja(new $i("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ke(new Wv(r.getProvider("auth-internal")),new Zv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Yr(NS,"4.7.3",e),Yr(NS,"4.7.3","esm2017")})();var zU="@firebase/firestore-compat",GU="0.3.38";function VE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tR(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function nR(){if(!KA())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return nR(),new n(dr.fromBase64String(e))}static fromUint8Array(e){return tR(),new n(dr.fromUint8Array(e))}toBase64(){return nR(),this._delegate.toBase64()}toUint8Array(){return tR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function NE(n){return WU(n,["next","error","complete"])}function WU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var PE=class{enableIndexedDbPersistence(e,t){return pM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return gM(e._delegate)}clearIndexedDbPersistence(e){return yM(e._delegate)}},np=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){lM(this._delegate,e,t,r)}enableNetwork(){return _M(this._delegate)}disableNetwork(){return wM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_E("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return vM(this._delegate)}onSnapshotsInSync(e){return KM(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sa(this,wE(this._delegate,e))}catch(t){throw zt(t,"collection()","Firestore.collection()")}}doc(e){try{return new hr(this,jc(this._delegate,e))}catch(t){throw zt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bo(this,dM(this._delegate,e))}catch(t){throw zt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return QM(this._delegate,t=>e(new rp(this,t)))}batch(){return Dt(this._delegate),new ip(new zf(this._delegate,e=>Da(this._delegate,e)))}loadBundle(e){return EM(this._delegate,e)}namedQuery(e){return IM(this._delegate,e).then(t=>t?new Bo(this,t):null)}},ba=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new tp(new dr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return hr.forKey(t,this.firestore,null)}};function KU(n){OA(n)}var rp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}get(e){let t=Vo(e);return this._delegate.get(t).then(r=>new Lo(this._firestore,new An(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Vo(e);return r?(VE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}},ip=class{constructor(e){this._delegate=e}set(e,t,r){let i=Vo(e);return r?(VE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ta=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Di(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ba(e),t),i.set(t,o)),o}};Ta.INSTANCES=new WeakMap;var hr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}static forPath(e,t,r){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new je(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new je(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sa(this.firestore,wE(this._delegate,e))}catch(t){throw zt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof je?EE(this._delegate,e):!1}set(e,t){t=VE("DocumentReference.set",t);try{return t?AE(this._delegate,e,t):AE(this._delegate,e)}catch(r){throw zt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?xE(this._delegate,e):xE(this._delegate,e,t,...r)}catch(i){throw zt(i,"updateDoc()","DocumentReference.update()")}}delete(){return GM(this._delegate)}onSnapshot(...e){let t=rR(e),r=iR(e,i=>new Lo(this.firestore,new An(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ME(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=UM(this._delegate):e?.source==="server"?t=$M(this._delegate):t=BM(this._delegate),t.then(r=>new Lo(this.firestore,new An(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function zt(n,e,t){return n.message=n.message.replace(e,t),n}function rR(n){for(let e of n)if(typeof e=="object"&&!NE(e))return e;return{}}function iR(n,e){var t,r;let i;return NE(n[0])?i=n[0]:NE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Lo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SE(this._delegate,e._delegate)}},jo=class extends Lo{data(e){let t=this._delegate.data(e);return this._delegate._converter||FA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Bo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}where(e,t,r){try{return new n(this.firestore,zr(this._delegate,MM(e,t,r)))}catch(i){throw zt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,zr(this._delegate,RM(e,t)))}catch(r){throw zt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,zr(this._delegate,NM(e)))}catch(t){throw zt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,zr(this._delegate,PM(e)))}catch(t){throw zt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,zr(this._delegate,kM(...e)))}catch(t){throw zt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,zr(this._delegate,OM(...e)))}catch(t){throw zt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,zr(this._delegate,FM(...e)))}catch(t){throw zt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,zr(this._delegate,VM(...e)))}catch(t){throw zt(t,"endAt()","Query.endAt()")}}isEqual(e){return IE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=qM(this._delegate):e?.source==="server"?t=zM(this._delegate):t=HM(this._delegate),t.then(r=>new Bc(this.firestore,new qn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=rR(e),r=iR(e,i=>new Bc(this.firestore,new qn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ME(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},kE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Bc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jo(this._firestore,r))})}isEqual(e){return SE(this._delegate,e._delegate)}},Sa=class n extends Bo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new hr(this.firestore,e):null}doc(e){try{return e===void 0?new hr(this.firestore,jc(this._delegate)):new hr(this.firestore,jc(this._delegate,e))}catch(t){throw zt(t,"doc()","CollectionReference.doc()")}}add(e){return WM(this._delegate,e).then(t=>new hr(this.firestore,t))}isEqual(e){return EE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vo(n){return Te(n,je)}var OE=class n{constructor(...e){this._delegate=new Hn(...e)}static documentId(){return new n(tt.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof Hn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var FE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=ZM();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=YM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=JM(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=XM(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=eR(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var QU={Firestore:np,GeoPoint:Ro,Timestamp:We,Blob:tp,Transaction:rp,WriteBatch:ip,DocumentReference:hr,DocumentSnapshot:Lo,Query:Bo,QueryDocumentSnapshot:jo,QuerySnapshot:Bc,CollectionReference:Sa,FieldPath:OE,FieldValue:FE,setLogLevel:KU,CACHE_SIZE_UNLIMITED:hM};function YU(n,e){n.INTERNAL.registerComponent(new $i("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QU)))}function ZU(n){YU(n,(e,t)=>new np(e,t,new PE)),n.registerVersion(zU,GU)}ZU(sn);function JU(n,e=iu){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function oR(n,e){return JU(n,e)}function XU(n,e){return oR(n,e).pipe(Ki(void 0),au(),Y(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function BE(n,e){return oR(n,e).pipe(Y(t=>({payload:t,type:"query"})))}var op=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=uR(r,t);return new ap(i,o,this.afs)}snapshotChanges(){return XU(this.ref,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return this.snapshotChanges().pipe(Y(({payload:t})=>e.idField?ge(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return _e(this.ref.get(e)).pipe(Jt)}};function sp(n,e){return BE(n,e).pipe(Ki(void 0),au(),Y(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function sR(n,e,t){return sp(n,t).pipe(Wi((r,i)=>e$(r,i.map(o=>o.payload),e),[]),fg(),Y(r=>r.map(i=>({type:i.type,payload:i}))))}function e$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=t$(n,r))}),n}function LE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function t$(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return LE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return LE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LE(n,e.oldIndex,1);break}return n}function aR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ap=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Y(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ki(void 0),au(),Et(([r,i])=>i.length>0||!r),Y(([,r])=>r),Jt)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=aR(e);return sR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return BE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.payload.docs.map(r=>e.idField?ge(P({},r.data()),{[e.idField]:r.id}):r.data())),Jt)}get(e){return _e(this.query.get(e)).pipe(Jt)}add(e){return this.ref.add(e)}doc(e){return new op(this.ref.doc(e),this.afs)}},jE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?sp(this.query,this.afs.schedulers.outsideAngular).pipe(Jt):sp(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.filter(r=>e.indexOf(r.type)>-1)),Et(t=>t.length>0),Jt)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=aR(e);return sR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return BE(this.query,this.afs.schedulers.outsideAngular).pipe(Y(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),Jt)}get(e){return _e(this.query.get(e)).pipe(Jt)}},n$=new K("angularfire2.enableFirestorePersistence"),r$=new K("angularfire2.firestore.persistenceSettings"),i$=new K("angularfire2.firestore.settings"),o$=new K("angularfire2.firestore.use-emulator");function uR(n,e=t=>t){return{query:e(n),ref:n}}var en=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,g,y,b,A,x,B,W){this.schedulers=u;let j=Xu(t,a,r),J=h;p&&Pv(j,a,g,b,A,x,y,B),[this.firestore,this.persistenceEnabled$]=Fh(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let oe=a.runOutsideAngular(()=>j.firestore());if(o&&oe.settings(o),J&&oe.useEmulator(...J),i&&!uo(s)){let te=()=>{try{return _e(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ne(!1)}};return[oe,a.runOutsideAngular(te)]}else return[oe,ne(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=uR(i,r),a=this.schedulers.ngZone.run(()=>o);return new ap(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new jE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new op(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(js),L(Bs,8),L(n$,8),L(i$,8),L(Qt),L(we),L(Ph),L(r$,8),L(o$,8),L(xS,8),L(Sv,8),L(Av,8),L(xv,8),L(Mv,8),L(Rv,8),L(Nv,8),L(po,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(P({},t))}deleteHeader(t){return this.headerRef.doc(t).delete()}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ie(ci),ie(En))}}static{this.\u0275dir=yt({type:n})}}return n})(),a$=(()=>{class n extends vR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ds(n)))(i||n)}})()}static{this.\u0275dir=yt({type:n,features:[Ar]})}}return n})(),_R=new K("");var u$={provide:_R,useExisting:so(()=>Ot),multi:!0};function c$(){let n=tr()?tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var l$=new K(""),Ot=(()=>{class n extends vR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!c$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(ci),ie(En),ie(l$,8))}}static{this.\u0275dir=yt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[bu([u$]),Ar]})}}return n})();function d$(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var $E=new K(""),wR=new K("");function h$(n){return d$(n.value)?{required:!0}:null}function lR(n){return null}function ER(n){return n!=null}function IR(n){return ao(n)?_e(n):n}function CR(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function DR(n,e){return e.map(t=>t(n))}function f$(n){return!n.validate}function bR(n){return n.map(e=>f$(e)?e:t=>e.validate(t))}function p$(n){if(!n)return null;let e=n.filter(ER);return e.length==0?null:function(t){return CR(DR(t,e))}}function HE(n){return n!=null?p$(bR(n)):null}function g$(n){if(!n)return null;let e=n.filter(ER);return e.length==0?null:function(t){let r=DR(t,e).map(IR);return lg(r).pipe(Y(CR))}}function qE(n){return n!=null?g$(bR(n)):null}function dR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function m$(n){return n._rawValidators}function y$(n){return n._rawAsyncValidators}function UE(n){return n?Array.isArray(n)?n:[n]:[]}function cp(n,e){return Array.isArray(n)?n.includes(e):n===e}function hR(n,e){let t=UE(e);return UE(n).forEach(i=>{cp(t,i)||t.push(i)}),t}function fR(n,e){return UE(e).filter(t=>!cp(n,t))}var lp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ma=class extends lp{get formDirective(){return null}get path(){return null}},Gc=class extends lp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},v$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sW=ge(P({},v$),{"[class.ng-submitted]":"isSubmitted"}),tn=(()=>{class n extends dp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Gc,2))}}static{this.\u0275dir=yt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&eh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ar]})}}return n})(),nn=(()=>{class n extends dp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ie(Ma,10))}}static{this.\u0275dir=yt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&eh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ar]})}}return n})();var Uc="VALID",up="INVALID",Aa="PENDING",$c="DISABLED",Ra=class{},hp=class extends Ra{constructor(e,t){super(),this.value=e,this.source=t}},qc=class extends Ra{constructor(e,t){super(),this.pristine=e,this.source=t}},zc=class extends Ra{constructor(e,t){super(),this.touched=e,this.source=t}},xa=class extends Ra{constructor(e,t){super(),this.status=e,this.source=t}};function TR(n){return(gp(n)?n.validators:n)||null}function _$(n){return Array.isArray(n)?HE(n):n||null}function SR(n,e){return(gp(e)?e.asyncValidators:n)||null}function w$(n){return Array.isArray(n)?qE(n):n||null}function gp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function E$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function I$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var fp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Su(()=>this.statusReactive()),this.statusReactive=Iu(void 0),this._pristine=Su(()=>this.pristineReactive()),this.pristineReactive=Iu(!0),this._touched=Su(()=>this.touchedReactive()),this.touchedReactive=Iu(!1),this._events=new qe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mr(this.statusReactive)}set status(e){Mr(()=>this.statusReactive.set(e))}get valid(){return this.status===Uc}get invalid(){return this.status===up}get pending(){return this.status==Aa}get disabled(){return this.status===$c}get enabled(){return this.status!==$c}get pristine(){return Mr(this.pristineReactive)}set pristine(e){Mr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Mr(this.touchedReactive)}set touched(e){Mr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fR(e,this._rawAsyncValidators))}hasValidator(e){return cp(this._rawValidators,e)}hasAsyncValidator(e){return cp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new zc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new qc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new qc(!0,r))}markAsPending(e={}){this.status=Aa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$c,this.errors=null,this._forEachChild(i=>{i.disable(ge(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hp(this.value,r)),this._events.next(new xa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Uc,this._forEachChild(r=>{r.enable(ge(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uc||this.status===Aa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hp(this.value,t)),this._events.next(new xa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$c:Uc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Aa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=IR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new xa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?$c:this.errors?up:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Aa)?Aa:this._anyControlsHaveStatus(up)?up:Uc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new qc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new zc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=w$(this._rawAsyncValidators)}},pp=class extends fp{constructor(e,t,r){super(TR(t),SR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){I$(this,!0,e),Object.keys(e).forEach(r=>{E$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var zE=new K("CallSetDisabledState",{providedIn:"root",factory:()=>GE}),GE="always";function C$(n,e){return[...e.path,n]}function AR(n,e,t=GE){xR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),b$(n,e),S$(n,e),T$(n,e),D$(n,e)}function pR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function D$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function xR(n,e){let t=m$(n);e.validator!==null?n.setValidators(dR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=y$(n);e.asyncValidator!==null?n.setAsyncValidators(dR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();pR(e._rawValidators,i),pR(e._rawAsyncValidators,i)}function b$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MR(n,e)})}function T$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function S$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function A$(n,e){n==null,xR(n,e)}function x$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function M$(n){return Object.getPrototypeOf(n.constructor)===a$}function R$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function N$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ot?t=o:M$(o)?r=o:i=o}),i||r||t||null}var P$={provide:Ma,useExisting:so(()=>Gt)},Hc=Promise.resolve(),Gt=(()=>{class n extends Ma{get submitted(){return Mr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Su(()=>this.submittedReactive()),this.submittedReactive=Iu(!1),this._directives=new Set,this.ngSubmit=new Je,this.form=new pp({},HE(t),qE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Hc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),AR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Hc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Hc.then(()=>{let r=this._findContainer(t.path),i=new pp({});A$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Hc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Hc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),R$(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ie($E,10),ie(wR,10),ie(zE,8))}}static{this.\u0275dir=yt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bu([P$]),Ar]})}}return n})();function gR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var k$=class extends fp{constructor(e=null,t,r){super(TR(t),SR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var O$={provide:Gc,useExisting:so(()=>Wt)},yR=Promise.resolve(),Wt=(()=>{class n extends Gc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new k$,this._registered=!1,this.name="",this.update=new Je,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=N$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),x$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){AR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&fi(r);yR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?C$(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ie(Ma,9),ie($E,10),ie(wR,10),ie(_R,10),ie(hi,8),ie(zE,8))}}static{this.\u0275dir=yt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bu([O$]),Ar,Tr]})}}return n})(),rn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=yt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var F$=(()=>{class n{constructor(){this._validator=lR}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lR,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=yt({type:n,features:[Tr]})}}return n})();var V$={provide:$E,useExisting:so(()=>WE),multi:!0};var WE=(()=>{class n extends F${constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fi,this.createValidator=t=>h$}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ds(n)))(i||n)}})()}static{this.\u0275dir=yt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Cu("required",i._enabled?"":null)},inputs:{required:"required"},features:[bu([V$]),Ar]})}}return n})();var L$=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({})}}return n})();var RR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zE,useValue:t.callSetDisabledState??GE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[L$]})}}return n})();function j$(n,e){if(n&1&&(O(0,"div",14),xr(1,"img",15),k()),n&2){let t=Ne(2);ee(),It("src",t.header.photoUrl,Ym)}}function B$(n,e){if(n&1){let t=Yt();O(0,"div",3),Rt(1,j$,2,1,"div",4),O(2,"form",5),Ae("ngSubmit",function(){Fe(t);let i=Ne();return Ve(i.actualizarHeader())}),O(3,"label"),z(4,"Nombre"),k(),O(5,"input",6),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.name,i)||(o.header.name=i),Ve(i)}),k(),O(6,"label"),z(7,"Meta de vida"),k(),O(8,"input",7),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.goalLife,i)||(o.header.goalLife=i),Ve(i)}),k(),O(9,"label"),z(10,"URL de Foto"),k(),O(11,"input",8),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.photoUrl,i)||(o.header.photoUrl=i),Ve(i)}),k(),O(12,"label"),z(13,"Correo Electr\xF3nico"),k(),O(14,"input",9),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.email,i)||(o.header.email=i),Ve(i)}),k(),O(15,"label"),z(16,"Tel\xE9fono"),k(),O(17,"input",10),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.phoneNumber,i)||(o.header.phoneNumber=i),Ve(i)}),k(),O(18,"label"),z(19,"Ubicaci\xF3n"),k(),O(20,"input",11),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.location,i)||(o.header.location=i),Ve(i)}),k(),O(21,"label"),z(22,"Red Social"),k(),O(23,"input",12),be("ngModelChange",function(i){Fe(t);let o=Ne();return xe(o.header.socialNetwork,i)||(o.header.socialNetwork=i),Ve(i)}),k(),O(24,"button",13),z(25,"Actualizar Header"),k()()()}if(n&2){let t=Ne();ee(),It("ngIf",t.header.photoUrl),ee(4),De("ngModel",t.header.name),ee(3),De("ngModel",t.header.goalLife),ee(3),De("ngModel",t.header.photoUrl),ee(3),De("ngModel",t.header.email),ee(3),De("ngModel",t.header.phoneNumber),ee(3),De("ngModel",t.header.location),ee(3),De("ngModel",t.header.socialNetwork)}}var NR=(()=>{class n{constructor(t){this.headerService=t,this.header=new Rh,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}actualizarHeader(){this.header.id&&this.headerService.updateHeader(this.header.id,this.header).then(()=>{console.log("Header actualizado exitosamente")})}static{this.\u0275fac=function(r){return new(r||n)(ie(cR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-header"]],decls:5,vars:1,consts:[[1,"header-section"],[1,"header-title","card"],["class","header-form card",4,"ngIf"],[1,"header-form","card"],["class","image-preview",4,"ngIf"],[3,"ngSubmit"],["type","text","name","name","placeholder","Nombre",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","Meta de vida",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photoUrl","placeholder","URL de foto",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","email","placeholder","Correo electr\xF3nico",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","Tel\xE9fono",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Ubicaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","Red social",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"image-preview"],["alt","Vista previa",3,"src"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Editar Header"),k()(),Rt(4,B$,26,8,"div",2),k()),r&2&&(ee(4),It("ngIf",i.header))},dependencies:[uT,rn,Ot,tn,nn,Wt,Gt],styles:[".header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;font-weight:700;text-align:center}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}@media (max-width: 600px){.header-section[_ngcontent-%COMP%]{padding:1rem}}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;border-radius:10px;border:2px solid #fff;object-fit:cover;box-shadow:0 0 10px #0006}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.3rem;margin-top:1rem;color:#fff}"]})}}return n})();var Wc=class{constructor(){this.starDate="",this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var PR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}updateWorkExperience(t,r){return this.workExperienceRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $$(n,e){if(n&1){let t=Yt();O(0,"div",17)(1,"div",18)(2,"strong"),z(3),k(),z(4),xr(5,"br"),O(6,"small"),z(7),k(),O(8,"p"),z(9),k()(),O(10,"button",19),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteJob(i.id))}),z(11,"Eliminar"),k(),O(12,"button",20),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editJob(i))}),z(13,"Editar"),k()()}if(n&2){let t=e.$implicit;ee(3),Nt(t.company),ee(),Cn(" \u2014 ",t.position," "),ee(3),ly("",t.starDate," - ",t.endDate," | ",t.location,""),ee(2),Nt(t.accomplishments)}}var kR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new Wc,console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}AgregarJob(){this.myWorkExperience.id?this.workExperienceService.updateWorkExperience(this.myWorkExperience.id,this.myWorkExperience).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("Deleted successfully")})}editJob(t){this.myWorkExperience=P({},t),this.btntxt="Actualizar"}resetForm(){this.myWorkExperience=new Wc,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ie(PR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-workexperience"]],decls:30,vars:8,consts:[[1,"experience-section"],[1,"card"],[3,"ngSubmit"],["for","startDate"],["type","text","id","startDate","placeholder","mm/yyyy","name","startDate",1,"txt",3,"ngModelChange","ngModel"],["for","endDate"],["type","text","id","endDate","placeholder","mm/yyyy","name","endDate",1,"txt",3,"ngModelChange","ngModel"],["for","location"],["type","text","id","location","placeholder","Ciudad, Pa\xEDs","name","location",1,"txt",3,"ngModelChange","ngModel"],["for","position"],["type","text","id","position","placeholder","Puesto desempe\xF1ado","name","position",1,"txt",3,"ngModelChange","ngModel"],["for","company"],["type","text","id","company","placeholder","Nombre de la empresa","name","company",1,"txt",3,"ngModelChange","ngModel"],["for","accomplishments"],["type","text","id","accomplishments","placeholder","Principales logros","name","accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","experience-item",4,"ngFor","ngForOf"],[1,"experience-item"],[1,"job-details"],[1,"btn","danger",3,"click"],[1,"btn","edit",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Experiencia Laboral"),k()(),O(4,"div",1)(5,"form",2),Ae("ngSubmit",function(){return i.AgregarJob()}),O(6,"label",3),z(7,"Inicio"),k(),O(8,"input",4),be("ngModelChange",function(s){return xe(i.myWorkExperience.starDate,s)||(i.myWorkExperience.starDate=s),s}),k(),O(9,"label",5),z(10,"Fin"),k(),O(11,"input",6),be("ngModelChange",function(s){return xe(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),k(),O(12,"label",7),z(13,"Ubicaci\xF3n"),k(),O(14,"input",8),be("ngModelChange",function(s){return xe(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),k(),O(15,"label",9),z(16,"Puesto"),k(),O(17,"input",10),be("ngModelChange",function(s){return xe(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),k(),O(18,"label",11),z(19,"Empresa"),k(),O(20,"input",12),be("ngModelChange",function(s){return xe(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),k(),O(21,"label",13),z(22,"Logros"),k(),O(23,"input",14),be("ngModelChange",function(s){return xe(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),k(),O(24,"button",15),z(25),k()()(),O(26,"div",1)(27,"h3"),z(28,"Lista de Experiencia"),k(),Rt(29,$$,14,6,"div",16),k()()),r&2&&(ee(8),De("ngModel",i.myWorkExperience.starDate),ee(3),De("ngModel",i.myWorkExperience.endDate),ee(3),De("ngModel",i.myWorkExperience.location),ee(3),De("ngModel",i.myWorkExperience.position),ee(3),De("ngModel",i.myWorkExperience.company),ee(3),De("ngModel",i.myWorkExperience.accomplishments),ee(2),Nt(i.btntxt),ee(4),It("ngForOf",i.workExperience))},dependencies:[Dn,rn,Ot,tn,nn,Wt,Gt],styles:[".experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff14;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000004d;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;margin-bottom:1.5rem}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-top:1rem;display:block}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-top:.5rem;margin-bottom:1rem;background-color:#ffffff26;border:none;border-radius:6px;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:6px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;margin-top:1rem;transition:background .3s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-top:.5rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.experience-item[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding-top:1rem;margin-top:1rem}.job-details[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})}}return n})();var Kc=class{constructor(){this.startDate="",this.endDate="",this.Degree="",this.Collage=""}};var OR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}updateEducation(t,r){return this.educationRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q$(n,e){if(n&1){let t=Yt();O(0,"div",10)(1,"span"),z(2),k(),O(3,"button",11),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteEducation(i.id))}),z(4,"Eliminar"),k(),O(5,"button",12),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editEducation(i))}),z(6,"Editar"),k()()}if(n&2){let t=e.$implicit;ee(2),dy("",t.Degree," - ",t.Collage," (",t.startDate," a ",t.endDate,")")}}var FR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myEducation=new Kc,console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}AgregarEducation(){this.myEducation.id?this.educationService.updateEducation(this.myEducation.id,this.myEducation).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.educationService.createEducation(this.myEducation).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteEducation(t){this.educationService.deleteEducation(t).then(()=>{console.log("Deleted successfully")})}editEducation(t){this.myEducation=P({},t),this.btntxt="Actualizar"}resetForm(){this.myEducation=new Kc,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ie(OR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-education"]],decls:15,vars:7,consts:[[1,"education-section"],[1,"education-list","card"],["class","edu-item",4,"ngFor","ngForOf"],[1,"education-form","card"],[3,"ngSubmit"],["type","text","name","Degree","placeholder","T\xEDtulo o grado",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","Collage","placeholder","Instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","startDate","placeholder","Fecha inicio (YYYY)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Fecha fin (YYYY)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"edu-item"],[1,"btn","delete",3,"click"],[1,"btn","edit",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Educaci\xF3n Guardada"),k(),Rt(4,q$,7,4,"div",2),k(),O(5,"div",3)(6,"h2"),z(7),k(),O(8,"form",4),Ae("ngSubmit",function(){return i.AgregarEducation()}),O(9,"input",5),be("ngModelChange",function(s){return xe(i.myEducation.Degree,s)||(i.myEducation.Degree=s),s}),k(),O(10,"input",6),be("ngModelChange",function(s){return xe(i.myEducation.Collage,s)||(i.myEducation.Collage=s),s}),k(),O(11,"input",7),be("ngModelChange",function(s){return xe(i.myEducation.startDate,s)||(i.myEducation.startDate=s),s}),k(),O(12,"input",8),be("ngModelChange",function(s){return xe(i.myEducation.endDate,s)||(i.myEducation.endDate=s),s}),k(),O(13,"button",9),z(14),k()()()()),r&2&&(ee(4),It("ngForOf",i.education),ee(3),Cn("",i.btntxt," Educaci\xF3n"),ee(2),De("ngModel",i.myEducation.Degree),ee(),De("ngModel",i.myEducation.Collage),ee(),De("ngModel",i.myEducation.startDate),ee(),De("ngModel",i.myEducation.endDate),ee(2),Nt(i.btntxt))},dependencies:[Dn,rn,Ot,tn,nn,Wt,Gt],styles:[".education-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.edu-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .edu-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;font-weight:700}.edu-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}button.delete[_ngcontent-%COMP%]{background-color:#c0392b}button.delete[_ngcontent-%COMP%]:hover{background-color:#e74c3c}@media (max-width: 600px){.education-section[_ngcontent-%COMP%]{padding:1rem}.edu-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})}}return n})();var Qc=class{constructor(){this.certificate="",this.context="",this.year=""}};var VR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificateRef=t.collection(this.dbPath)}getCertificate(){return this.certificateRef}createCertificate(t){return this.certificateRef.add(P({},t))}deleteCertificate(t){return this.certificateRef.doc(t).delete()}updateCertificate(t,r){return this.certificateRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function G$(n,e){if(n&1){let t=Yt();O(0,"div",9)(1,"span"),z(2),k(),O(3,"button",10),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteCertificate(i.id))}),z(4,"Eliminar"),k(),O(5,"button",11),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editCertificate(i))}),z(6,"Editar"),k()()}if(n&2){let t=e.$implicit;ee(2),Du("",t.certificate," - ",t.year,"")}}var LR=(()=>{class n{constructor(t){this.certificatesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates=new Qc,console.log(this.certificatesService),this.certificatesService.getCertificate().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}AgregarCertificates(){this.myCertificates.id?this.certificatesService.updateCertificate(this.myCertificates.id,this.myCertificates).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.certificatesService.createCertificate(this.myCertificates).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteCertificate(t){this.certificatesService.deleteCertificate(t).then(()=>{console.log("Deleted successfully")})}editCertificate(t){this.myCertificates=P({},t),this.btntxt="Actualizar"}resetForm(){this.myCertificates=new Qc,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(ie(VR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-certificates"]],decls:14,vars:6,consts:[[1,"certificate-section"],[1,"cert-list","card"],["class","cert-item",4,"ngFor","ngForOf"],[1,"cert-form","card"],[3,"ngSubmit"],["type","text","name","certificate","placeholder","Nombre del certificado",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","context","placeholder","Contexto o instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","year","placeholder","A\xF1o (YYYY)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"cert-item"],[1,"btn","delete",3,"click"],[1,"btn","edit",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Certificados Guardados"),k(),Rt(4,G$,7,2,"div",2),k(),O(5,"div",3)(6,"h2"),z(7),k(),O(8,"form",4),Ae("ngSubmit",function(){return i.AgregarCertificates()}),O(9,"input",5),be("ngModelChange",function(s){return xe(i.myCertificates.certificate,s)||(i.myCertificates.certificate=s),s}),k(),O(10,"input",6),be("ngModelChange",function(s){return xe(i.myCertificates.context,s)||(i.myCertificates.context=s),s}),k(),O(11,"input",7),be("ngModelChange",function(s){return xe(i.myCertificates.year,s)||(i.myCertificates.year=s),s}),k(),O(12,"button",8),z(13),k()()()()),r&2&&(ee(4),It("ngForOf",i.certificates),ee(3),Cn("",i.btntxt," Certificado"),ee(2),De("ngModel",i.myCertificates.certificate),ee(),De("ngModel",i.myCertificates.context),ee(),De("ngModel",i.myCertificates.year),ee(2),Nt(i.btntxt))},dependencies:[Dn,rn,Ot,tn,nn,Wt,Gt],styles:[".certificate-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%;max-width:900px}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.cert-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cert-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;font-weight:700}.cert-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff;font-size:1rem}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border:none;border-radius:5px;font-weight:600;font-size:1rem;cursor:pointer;background-color:#2980b9;color:#fff;transition:background-color .3s ease,transform .2s ease}button.btn[_ngcontent-%COMP%]:hover{background-color:#3498db;transform:scale(1.05)}button.delete[_ngcontent-%COMP%]{background-color:#c0392b}button.delete[_ngcontent-%COMP%]:hover{background-color:#e74c3c}@media (max-width: 600px){.certificate-section[_ngcontent-%COMP%]{padding:1rem}.cert-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})}}return n})();var Yc=class{constructor(){this.skill="",this.percentage=""}};var jR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skill",this.skillRef=t.collection(this.dbPath)}getSkill(){return this.skillRef}createSkill(t){return this.skillRef.add(P({},t))}deleteSkill(t){return this.skillRef.doc(t).delete()}updateSkill(t,r){return this.skillRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function K$(n,e){if(n&1){let t=Yt();O(0,"div",9)(1,"button",10),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteSkill(i.id))}),z(2,"Eliminar"),k(),O(3,"button",11),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editSkill(i))}),z(4,"Editar"),k(),z(5),k()}if(n&2){let t=e.$implicit;ee(5),Du(" ",t.skill," - ",t.percentage," ")}}var BR=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],this.mySkill=new Yc,this.btntxt="Guardar",console.log(this.skillsService),this.skillsService.getSkill().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}AgregarSkill(){this.mySkill.id?this.skillsService.updateSkill(this.mySkill.id,this.mySkill).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.skillsService.createSkill(this.mySkill).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteSkill(t){this.skillsService.deleteSkill(t).then(()=>{console.log("Deleted successfully")})}editSkill(t){this.mySkill=P({},t),this.btntxt="Actualizar"}resetForm(){this.mySkill=new Yc,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(ie(jR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-skills"]],decls:18,vars:4,consts:[[1,"skills-section"],[1,"card"],[3,"ngSubmit"],["for","skill"],["type","text","id","skill","name","skill","placeholder","Nombre de la habilidad",1,"txt",3,"ngModelChange","ngModel"],["for","level"],["type","text","id","level","name","level","placeholder","Porcentaje",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","skill-container",4,"ngFor","ngForOf"],[1,"skill-container"],[1,"btn","danger",3,"click"],[1,"btn","edit",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Habilidades"),k()(),O(4,"div",1)(5,"form",2),Ae("ngSubmit",function(){return i.AgregarSkill()}),O(6,"label",3),z(7,"Habilidad"),k(),O(8,"input",4),be("ngModelChange",function(s){return xe(i.mySkill.skill,s)||(i.mySkill.skill=s),s}),k(),O(9,"label",5),z(10,"Nivel"),k(),O(11,"input",6),be("ngModelChange",function(s){return xe(i.mySkill.percentage,s)||(i.mySkill.percentage=s),s}),k(),O(12,"button",7),z(13),k()()(),O(14,"div",1)(15,"h3"),z(16,"Habilidades guardadas"),k(),Rt(17,K$,6,2,"div",8),k()()),r&2&&(ee(8),De("ngModel",i.mySkill.skill),ee(3),De("ngModel",i.mySkill.percentage),ee(2),Nt(i.btntxt),ee(4),It("ngForOf",i.skills))},dependencies:[Dn,rn,Ot,tn,nn,Wt,Gt],styles:[".skills-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;margin-top:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-left:auto}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.skill-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.skill-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.progress-bar[_ngcontent-%COMP%]{height:10px;background-color:#fff3;border-radius:5px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#2ecc71;transition:width .4s ease}"]})}}return n})();var Zc=class{constructor(){this.language="",this.percentage=""}};var UR=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="Languagues Service is Running...",this.dbPath="/languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}createLanguage(t){return this.languageRef.add(P({},t))}deleteLanguage(t){return this.languageRef.doc(t).delete()}updateLanguage(t,r){return this.languageRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y$(n,e){if(n&1){let t=Yt();O(0,"div",9)(1,"div",10)(2,"strong"),z(3),k(),z(4),k(),O(5,"div",11)(6,"button",12),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteLanguage(i.id))}),z(7,"Eliminar"),k(),O(8,"button",13),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editLanguage(i))}),z(9,"Editar"),k()()()}if(n&2){let t=e.$implicit;ee(3),Nt(t.language),ee(),Cn(" - ",t.percentage," ")}}var $R=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],this.myLanguage=new Zc,this.btntxt="Guardar",console.log(this.languagesService),this.languagesService.getLanguage().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarLanguage(){this.myLanguage.id?this.languagesService.updateLanguage(this.myLanguage.id,this.myLanguage).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.languagesService.createLanguage(this.myLanguage).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteLanguage(t){this.languagesService.deleteLanguage(t).then(()=>{console.log("Deleted successfully")})}editLanguage(t){this.myLanguage=P({},t),this.btntxt="Actualizar"}resetForm(){this.myLanguage=new Zc,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(ie(UR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-languages"]],decls:18,vars:4,consts:[[1,"language-section"],[1,"card"],[3,"ngSubmit"],["for","language"],["type","text","id","language","name","language","placeholder","Idioma","required","",1,"txt",3,"ngModelChange","ngModel"],["for","level"],["type","text","id","level","name","level","placeholder","Porcentaje (ej. 90%)","required","",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],[1,"language-details"],[1,"language-actions"],[1,"btn","danger",3,"click"],[1,"btn",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Idiomas"),k()(),O(4,"div",1)(5,"form",2),Ae("ngSubmit",function(){return i.AgregarLanguage()}),O(6,"label",3),z(7,"Idioma"),k(),O(8,"input",4),be("ngModelChange",function(s){return xe(i.myLanguage.language,s)||(i.myLanguage.language=s),s}),k(),O(9,"label",5),z(10,"Nivel"),k(),O(11,"input",6),be("ngModelChange",function(s){return xe(i.myLanguage.percentage,s)||(i.myLanguage.percentage=s),s}),k(),O(12,"button",7),z(13),k()()(),O(14,"div",1)(15,"h3"),z(16,"Idiomas Guardados"),k(),Rt(17,Y$,10,2,"div",8),k()()),r&2&&(ee(8),De("ngModel",i.myLanguage.language),ee(3),De("ngModel",i.myLanguage.percentage),ee(2),Nt(i.btntxt),ee(4),It("ngForOf",i.languages))},dependencies:[Dn,rn,Ot,tn,nn,WE,Wt,Gt],styles:[".language-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;margin-top:1rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.life-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}"]})}}return n})();var Jc=class{constructor(){this.interest=""}};var HR=(()=>{class n{constructor(t){this.db=t,this.accessoInterests="Interests Service is Running",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterests(t){return this.interestsRef.add(P({},t))}deleteInterests(t){return this.interestsRef.doc(t).delete()}updateInterests(t,r){return this.interestsRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(en))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J$(n,e){if(n&1){let t=Yt();O(0,"div",7)(1,"button",8),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.deleteInterest(i.id))}),z(2,"Eliminar"),k(),O(3,"button",9),Ae("click",function(){let i=Fe(t).$implicit,o=Ne();return Ve(o.editInterest(i))}),z(4,"Editar"),k(),z(5),k()}if(n&2){let t=e.$implicit;ee(5),Cn(" ",t.interest," ")}}var qR=(()=>{class n{constructor(t){this.interestsService=t,this.myInterests=new Jc,this.interests=[],this.btntxt="Guardar",console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(Y(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}AgregarInterest(){this.myInterests.id?this.interestsService.updateInterests(this.myInterests.id,this.myInterests).then(()=>{console.log("Updated successfully"),this.resetForm()}):this.interestsService.createInterests(this.myInterests).then(()=>{console.log("Created successfully"),this.resetForm()})}deleteInterest(t){this.interestsService.deleteInterests(t).then(()=>{console.log("Deleted successfully")})}editInterest(t){this.myInterests=P({},t),this.btntxt="Actualizar"}resetForm(){this.myInterests=new Jc,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(ie(HR))}}static{this.\u0275cmp=gt({type:n,selectors:[["app-admin-interests"]],decls:15,vars:3,consts:[[1,"interest-section"],[1,"card"],[3,"ngSubmit"],["for","interest"],["type","text","id","interest","name","interest","placeholder","\xBFQu\xE9 te interesa?",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],["class","life-container",4,"ngFor","ngForOf"],[1,"life-container"],["type","button",1,"btn","danger",3,"click"],["type","button",1,"btn","edit",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Intereses"),k()(),O(4,"div",1)(5,"form",2),Ae("ngSubmit",function(){return i.AgregarInterest()}),O(6,"label",3),z(7,"Inter\xE9s"),k(),O(8,"input",4),be("ngModelChange",function(s){return xe(i.myInterests.interest,s)||(i.myInterests.interest=s),s}),k(),O(9,"button",5),z(10),k()()(),O(11,"div",1)(12,"h3"),z(13,"Tus intereses"),k(),Rt(14,J$,6,1,"div",6),k()()),r&2&&(ee(8),De("ngModel",i.myInterests.interest),ee(2),Nt(i.btntxt),ee(4),It("ngForOf",i.interests))},dependencies:[Dn,rn,Ot,tn,nn,Wt,Gt],styles:[".interest-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{background-color:#ffffff1a;padding:2rem;border-radius:10px;box-shadow:0 4px 12px #0003;color:#fff}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}input.txt[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:1.5rem;border:none;border-radius:5px;background:#fff3;color:#fff}input.txt[_ngcontent-%COMP%]::placeholder{color:#ccc}button.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:5px;background-color:#3498db;color:#fff;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}button.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:scale(1.05)}button.danger[_ngcontent-%COMP%]{background-color:#e74c3c;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.life-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}"]})}}return n})();var X$=[{path:"header",component:NR},{path:"workexperience",component:kR},{path:"education",component:FR},{path:"certificates",component:LR},{path:"skills",component:BR},{path:"languages",component:$R},{path:"interests",component:qR}],zR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n})}static{this.\u0275inj=pt({imports:[vv.forRoot(X$),vv]})}}return n})();var GR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=gt({type:n,selectors:[["app-root"]],decls:28,vars:0,consts:[["routerLink","/header","routerLinkActive","active"],["routerLink","/workexperience","routerLinkActive","active"],["routerLink","/education","routerLinkActive","active"],["routerLink","/certificates","routerLinkActive","active"],["routerLink","/skills","routerLinkActive","active"],["routerLink","/languages","routerLinkActive","active"],["routerLink","/interests","routerLinkActive","active"]],template:function(r,i){r&1&&(O(0,"header")(1,"h1"),z(2,"Admin-CV App"),k()(),O(3,"nav")(4,"ul")(5,"li")(6,"a",0),z(7,"Header"),k()(),O(8,"li")(9,"a",1),z(10,"Work Experience"),k()(),O(11,"li")(12,"a",2),z(13,"Education"),k()(),O(14,"li")(15,"a",3),z(16,"Certificates"),k()(),O(17,"li")(18,"a",4),z(19,"Skills"),k()(),O(20,"li")(21,"a",5),z(22,"Languages"),k()(),O(23,"li")(24,"a",6),z(25,"Interests"),k()()()(),O(26,"main"),xr(27,"router-outlet"),k())},dependencies:[hv,Sh,cS]})}}return n})();var WR={production:!1,firebaseConfig:{apiKey:"AIzaSyAhXFZnSoplTKnWAToyz17iADYtot7uKzc",authDomain:"josealan2119-mycv-19640.firebaseapp.com",projectId:"josealan2119-mycv-19640",storageBucket:"josealan2119-mycv-19640.firebasestorage.app",messagingSenderId:"320363882070",appId:"1:320363882070:web:aab1e255f9aab19289bdf7"}};var KR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mt({type:n,bootstrap:[GR]})}static{this.\u0275inj=pt({imports:[_T,zR,RR,AS.initializeApp(WR.firebaseConfig)]})}}return n})();vT().bootstrapModule(KR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
